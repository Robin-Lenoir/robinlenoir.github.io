<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="robots" content="noindex, nofollow">
<title></title>
<meta name="author" content=""/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<style type="text/css">
/**
 * reveal.js 5.2.0
 * https://revealjs.com
 * MIT licensed
 *
 * Copyright (C) 2011-2024 Hakim El Hattab, https://hakim.se
 */

.reveal .r-stretch,.reveal .stretch{max-width:none;max-height:none}.reveal pre.r-stretch code,.reveal pre.stretch code{height:100%;max-height:100%;box-sizing:border-box}.reveal .r-fit-text{display:inline-block;white-space:nowrap}.reveal .r-stack{display:grid;grid-template-rows:100%}.reveal .r-stack>*{grid-area:1/1;margin:auto}.reveal .r-hstack,.reveal .r-vstack{display:flex}.reveal .r-hstack img,.reveal .r-hstack video,.reveal .r-vstack img,.reveal .r-vstack video{min-width:0;min-height:0;object-fit:contain}.reveal .r-vstack{flex-direction:column;align-items:center;justify-content:center}.reveal .r-hstack{flex-direction:row;align-items:center;justify-content:center}.reveal .items-stretch{align-items:stretch}.reveal .items-start{align-items:flex-start}.reveal .items-center{align-items:center}.reveal .items-end{align-items:flex-end}.reveal .justify-between{justify-content:space-between}.reveal .justify-around{justify-content:space-around}.reveal .justify-start{justify-content:flex-start}.reveal .justify-center{justify-content:center}.reveal .justify-end{justify-content:flex-end}html.reveal-full-page{width:100%;height:100%;height:100vh;height:calc(var(--vh,1vh) * 100);height:100dvh;overflow:hidden}.reveal-viewport{height:100%;overflow:hidden;position:relative;line-height:1;margin:0;background-color:#fff;color:#000;--r-controls-spacing:12px;--r-overlay-header-height:40px;--r-overlay-margin:0px;--r-overlay-padding:6px;--r-overlay-gap:5px}@media screen and (max-width:1024px),(max-height:768px){.reveal-viewport{--r-overlay-header-height:26px}}.reveal-viewport:fullscreen{top:0!important;left:0!important;width:100%!important;height:100%!important;transform:none!important}.reveal .fragment{transition:all .2s ease}.reveal .fragment:not(.custom){opacity:0;visibility:hidden;will-change:opacity}.reveal .fragment.visible{opacity:1;visibility:inherit}.reveal .fragment.disabled{transition:none}.reveal .fragment.grow{opacity:1;visibility:inherit}.reveal .fragment.grow.visible{transform:scale(1.3)}.reveal .fragment.shrink{opacity:1;visibility:inherit}.reveal .fragment.shrink.visible{transform:scale(.7)}.reveal .fragment.zoom-in{transform:scale(.1)}.reveal .fragment.zoom-in.visible{transform:none}.reveal .fragment.fade-out{opacity:1;visibility:inherit}.reveal .fragment.fade-out.visible{opacity:0;visibility:hidden}.reveal .fragment.semi-fade-out{opacity:1;visibility:inherit}.reveal .fragment.semi-fade-out.visible{opacity:.5;visibility:inherit}.reveal .fragment.strike{opacity:1;visibility:inherit}.reveal .fragment.strike.visible{text-decoration:line-through}.reveal .fragment.fade-up{transform:translate(0,40px)}.reveal .fragment.fade-up.visible{transform:translate(0,0)}.reveal .fragment.fade-down{transform:translate(0,-40px)}.reveal .fragment.fade-down.visible{transform:translate(0,0)}.reveal .fragment.fade-right{transform:translate(-40px,0)}.reveal .fragment.fade-right.visible{transform:translate(0,0)}.reveal .fragment.fade-left{transform:translate(40px,0)}.reveal .fragment.fade-left.visible{transform:translate(0,0)}.reveal .fragment.current-visible,.reveal .fragment.fade-in-then-out{opacity:0;visibility:hidden}.reveal .fragment.current-visible.current-fragment,.reveal .fragment.fade-in-then-out.current-fragment{opacity:1;visibility:inherit}.reveal .fragment.fade-in-then-semi-out{opacity:0;visibility:hidden}.reveal .fragment.fade-in-then-semi-out.visible{opacity:.5;visibility:inherit}.reveal .fragment.fade-in-then-semi-out.current-fragment{opacity:1;visibility:inherit}.reveal .fragment.highlight-blue,.reveal .fragment.highlight-current-blue,.reveal .fragment.highlight-current-green,.reveal .fragment.highlight-current-red,.reveal .fragment.highlight-green,.reveal .fragment.highlight-red{opacity:1;visibility:inherit}.reveal .fragment.highlight-red.visible{color:#ff2c2d}.reveal .fragment.highlight-green.visible{color:#17ff2e}.reveal .fragment.highlight-blue.visible{color:#1b91ff}.reveal .fragment.highlight-current-red.current-fragment{color:#ff2c2d}.reveal .fragment.highlight-current-green.current-fragment{color:#17ff2e}.reveal .fragment.highlight-current-blue.current-fragment{color:#1b91ff}.reveal:after{content:"";font-style:italic}.reveal iframe{z-index:1}.reveal a{position:relative}@keyframes bounce-right{0%,10%,25%,40%,50%{transform:translateX(0)}20%{transform:translateX(10px)}30%{transform:translateX(-5px)}}@keyframes bounce-left{0%,10%,25%,40%,50%{transform:translateX(0)}20%{transform:translateX(-10px)}30%{transform:translateX(5px)}}@keyframes bounce-down{0%,10%,25%,40%,50%{transform:translateY(0)}20%{transform:translateY(10px)}30%{transform:translateY(-5px)}}.reveal .controls{display:none;position:absolute;top:auto;bottom:var(--r-controls-spacing);right:var(--r-controls-spacing);left:auto;z-index:11;color:#000;pointer-events:none;font-size:10px}.reveal .controls button{position:absolute;padding:0;background-color:transparent;border:0;outline:0;cursor:pointer;color:currentColor;transform:scale(.9999);transition:color .2s ease,opacity .2s ease,transform .2s ease;z-index:2;pointer-events:auto;font-size:inherit;visibility:hidden;opacity:0;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.reveal .controls .controls-arrow:after,.reveal .controls .controls-arrow:before{content:"";position:absolute;top:0;left:0;width:2.6em;height:.5em;border-radius:.25em;background-color:currentColor;transition:all .15s ease,background-color .8s ease;transform-origin:.2em 50%;will-change:transform}.reveal .controls .controls-arrow{position:relative;width:3.6em;height:3.6em}.reveal .controls .controls-arrow:before{transform:translateX(.5em) translateY(1.55em) rotate(45deg)}.reveal .controls .controls-arrow:after{transform:translateX(.5em) translateY(1.55em) rotate(-45deg)}.reveal .controls .controls-arrow:hover:before{transform:translateX(.5em) translateY(1.55em) rotate(40deg)}.reveal .controls .controls-arrow:hover:after{transform:translateX(.5em) translateY(1.55em) rotate(-40deg)}.reveal .controls .controls-arrow:active:before{transform:translateX(.5em) translateY(1.55em) rotate(36deg)}.reveal .controls .controls-arrow:active:after{transform:translateX(.5em) translateY(1.55em) rotate(-36deg)}.reveal .controls .navigate-left{right:6.4em;bottom:3.2em;transform:translateX(-10px)}.reveal .controls .navigate-left.highlight{animation:bounce-left 2s 50 both ease-out}.reveal .controls .navigate-right{right:0;bottom:3.2em;transform:translateX(10px)}.reveal .controls .navigate-right .controls-arrow{transform:rotate(180deg)}.reveal .controls .navigate-right.highlight{animation:bounce-right 2s 50 both ease-out}.reveal .controls .navigate-up{right:3.2em;bottom:6.4em;transform:translateY(-10px)}.reveal .controls .navigate-up .controls-arrow{transform:rotate(90deg)}.reveal .controls .navigate-down{right:3.2em;bottom:-1.4em;padding-bottom:1.4em;transform:translateY(10px)}.reveal .controls .navigate-down .controls-arrow{transform:rotate(-90deg)}.reveal .controls .navigate-down.highlight{animation:bounce-down 2s 50 both ease-out}.reveal .controls[data-controls-back-arrows=faded] .navigate-up.enabled{opacity:.3}.reveal .controls[data-controls-back-arrows=faded] .navigate-up.enabled:hover{opacity:1}.reveal .controls[data-controls-back-arrows=hidden] .navigate-up.enabled{opacity:0;visibility:hidden}.reveal .controls .enabled{visibility:visible;opacity:.9;cursor:pointer;transform:none}.reveal .controls .enabled.fragmented{opacity:.5}.reveal .controls .enabled.fragmented:hover,.reveal .controls .enabled:hover{opacity:1}.reveal:not(.rtl) .controls[data-controls-back-arrows=faded] .navigate-left.enabled{opacity:.3}.reveal:not(.rtl) .controls[data-controls-back-arrows=faded] .navigate-left.enabled:hover{opacity:1}.reveal:not(.rtl) .controls[data-controls-back-arrows=hidden] .navigate-left.enabled{opacity:0;visibility:hidden}.reveal.rtl .controls[data-controls-back-arrows=faded] .navigate-right.enabled{opacity:.3}.reveal.rtl .controls[data-controls-back-arrows=faded] .navigate-right.enabled:hover{opacity:1}.reveal.rtl .controls[data-controls-back-arrows=hidden] .navigate-right.enabled{opacity:0;visibility:hidden}.reveal[data-navigation-mode=linear].has-horizontal-slides .navigate-down,.reveal[data-navigation-mode=linear].has-horizontal-slides .navigate-up{display:none}.reveal:not(.has-vertical-slides) .controls .navigate-left,.reveal[data-navigation-mode=linear].has-horizontal-slides .navigate-left{bottom:1.4em;right:5.5em}.reveal:not(.has-vertical-slides) .controls .navigate-right,.reveal[data-navigation-mode=linear].has-horizontal-slides .navigate-right{bottom:1.4em;right:.5em}.reveal:not(.has-horizontal-slides) .controls .navigate-up{right:1.4em;bottom:5em}.reveal:not(.has-horizontal-slides) .controls .navigate-down{right:1.4em;bottom:.5em}.reveal.has-dark-background .controls{color:#fff}.reveal.has-light-background .controls{color:#000}.reveal.no-hover .controls .controls-arrow:active:before,.reveal.no-hover .controls .controls-arrow:hover:before{transform:translateX(.5em) translateY(1.55em) rotate(45deg)}.reveal.no-hover .controls .controls-arrow:active:after,.reveal.no-hover .controls .controls-arrow:hover:after{transform:translateX(.5em) translateY(1.55em) rotate(-45deg)}@media screen and (min-width:500px){.reveal-viewport{--r-controls-spacing:0.8em}.reveal .controls[data-controls-layout=edges]{top:0;right:0;bottom:0;left:0}.reveal .controls[data-controls-layout=edges] .navigate-down,.reveal .controls[data-controls-layout=edges] .navigate-left,.reveal .controls[data-controls-layout=edges] .navigate-right,.reveal .controls[data-controls-layout=edges] .navigate-up{bottom:auto;right:auto}.reveal .controls[data-controls-layout=edges] .navigate-left{top:50%;left:var(--r-controls-spacing);margin-top:-1.8em}.reveal .controls[data-controls-layout=edges] .navigate-right{top:50%;right:var(--r-controls-spacing);margin-top:-1.8em}.reveal .controls[data-controls-layout=edges] .navigate-up{top:var(--r-controls-spacing);left:50%;margin-left:-1.8em}.reveal .controls[data-controls-layout=edges] .navigate-down{bottom:calc(var(--r-controls-spacing) - 1.4em + .3em);left:50%;margin-left:-1.8em}}.reveal .progress{position:absolute;display:none;height:3px;width:100%;bottom:0;left:0;z-index:10;background-color:rgba(0,0,0,.2);color:#fff}.reveal .progress:after{content:"";display:block;position:absolute;height:10px;width:100%;top:-10px}.reveal .progress span{display:block;height:100%;width:100%;background-color:currentColor;transition:transform .8s cubic-bezier(.26,.86,.44,.985);transform-origin:0 0;transform:scaleX(0)}.reveal .slide-number{position:absolute;display:block;right:8px;bottom:8px;z-index:31;font-family:Helvetica,sans-serif;font-size:12px;line-height:1;color:#fff;background-color:rgba(0,0,0,.4);padding:5px}.reveal .slide-number a{color:currentColor}.reveal .slide-number-delimiter{margin:0 3px}.reveal{position:relative;width:100%;height:100%;overflow:hidden;touch-action:pinch-zoom}.reveal.embedded{touch-action:pan-y}.reveal.embedded.is-vertical-slide{touch-action:none}.reveal .slides{position:absolute;width:100%;height:100%;top:0;right:0;bottom:0;left:0;margin:auto;pointer-events:none;overflow:visible;z-index:1;text-align:center;perspective:600px;perspective-origin:50% 40%}.reveal .slides>section{perspective:600px}.reveal .slides>section,.reveal .slides>section>section{display:none;position:absolute;width:100%;pointer-events:auto;z-index:10;transform-style:flat;transition:transform-origin .8s cubic-bezier(.26,.86,.44,.985),transform .8s cubic-bezier(.26,.86,.44,.985),visibility .8s cubic-bezier(.26,.86,.44,.985),opacity .8s cubic-bezier(.26,.86,.44,.985)}.reveal[data-transition-speed=fast] .slides section{transition-duration:.4s}.reveal[data-transition-speed=slow] .slides section{transition-duration:1.2s}.reveal .slides section[data-transition-speed=fast]{transition-duration:.4s}.reveal .slides section[data-transition-speed=slow]{transition-duration:1.2s}.reveal .slides>section.stack{padding-top:0;padding-bottom:0;pointer-events:none;height:100%}.reveal .slides>section.present,.reveal .slides>section>section.present{display:block;z-index:11;opacity:1}.reveal .slides>section:empty,.reveal .slides>section>section:empty,.reveal .slides>section>section[data-background-interactive],.reveal .slides>section[data-background-interactive]{pointer-events:none}.reveal.center,.reveal.center .slides,.reveal.center .slides section{min-height:0!important}.reveal .slides>section:not(.present),.reveal .slides>section>section:not(.present){pointer-events:none}.reveal.overview .slides>section,.reveal.overview .slides>section>section{pointer-events:auto}.reveal .slides>section.future,.reveal .slides>section.future>section,.reveal .slides>section.past,.reveal .slides>section.past>section,.reveal .slides>section>section.future,.reveal .slides>section>section.past{opacity:0}.reveal .slides>section[data-transition=slide].past,.reveal .slides>section[data-transition~=slide-out].past,.reveal.slide .slides>section:not([data-transition]).past{transform:translate(-150%,0)}.reveal .slides>section[data-transition=slide].future,.reveal .slides>section[data-transition~=slide-in].future,.reveal.slide .slides>section:not([data-transition]).future{transform:translate(150%,0)}.reveal .slides>section>section[data-transition=slide].past,.reveal .slides>section>section[data-transition~=slide-out].past,.reveal.slide .slides>section>section:not([data-transition]).past{transform:translate(0,-150%)}.reveal .slides>section>section[data-transition=slide].future,.reveal .slides>section>section[data-transition~=slide-in].future,.reveal.slide .slides>section>section:not([data-transition]).future{transform:translate(0,150%)}.reveal .slides>section[data-transition=linear].past,.reveal .slides>section[data-transition~=linear-out].past,.reveal.linear .slides>section:not([data-transition]).past{transform:translate(-150%,0)}.reveal .slides>section[data-transition=linear].future,.reveal .slides>section[data-transition~=linear-in].future,.reveal.linear .slides>section:not([data-transition]).future{transform:translate(150%,0)}.reveal .slides>section>section[data-transition=linear].past,.reveal .slides>section>section[data-transition~=linear-out].past,.reveal.linear .slides>section>section:not([data-transition]).past{transform:translate(0,-150%)}.reveal .slides>section>section[data-transition=linear].future,.reveal .slides>section>section[data-transition~=linear-in].future,.reveal.linear .slides>section>section:not([data-transition]).future{transform:translate(0,150%)}.reveal .slides section[data-transition=default].stack,.reveal.default .slides section.stack{transform-style:preserve-3d}.reveal .slides>section[data-transition=default].past,.reveal .slides>section[data-transition~=default-out].past,.reveal.default .slides>section:not([data-transition]).past{transform:translate3d(-100%,0,0) rotateY(-90deg) translate3d(-100%,0,0)}.reveal .slides>section[data-transition=default].future,.reveal .slides>section[data-transition~=default-in].future,.reveal.default .slides>section:not([data-transition]).future{transform:translate3d(100%,0,0) rotateY(90deg) translate3d(100%,0,0)}.reveal .slides>section>section[data-transition=default].past,.reveal .slides>section>section[data-transition~=default-out].past,.reveal.default .slides>section>section:not([data-transition]).past{transform:translate3d(0,-300px,0) rotateX(70deg) translate3d(0,-300px,0)}.reveal .slides>section>section[data-transition=default].future,.reveal .slides>section>section[data-transition~=default-in].future,.reveal.default .slides>section>section:not([data-transition]).future{transform:translate3d(0,300px,0) rotateX(-70deg) translate3d(0,300px,0)}.reveal .slides section[data-transition=convex].stack,.reveal.convex .slides section.stack{transform-style:preserve-3d}.reveal .slides>section[data-transition=convex].past,.reveal .slides>section[data-transition~=convex-out].past,.reveal.convex .slides>section:not([data-transition]).past{transform:translate3d(-100%,0,0) rotateY(-90deg) translate3d(-100%,0,0)}.reveal .slides>section[data-transition=convex].future,.reveal .slides>section[data-transition~=convex-in].future,.reveal.convex .slides>section:not([data-transition]).future{transform:translate3d(100%,0,0) rotateY(90deg) translate3d(100%,0,0)}.reveal .slides>section>section[data-transition=convex].past,.reveal .slides>section>section[data-transition~=convex-out].past,.reveal.convex .slides>section>section:not([data-transition]).past{transform:translate3d(0,-300px,0) rotateX(70deg) translate3d(0,-300px,0)}.reveal .slides>section>section[data-transition=convex].future,.reveal .slides>section>section[data-transition~=convex-in].future,.reveal.convex .slides>section>section:not([data-transition]).future{transform:translate3d(0,300px,0) rotateX(-70deg) translate3d(0,300px,0)}.reveal .slides section[data-transition=concave].stack,.reveal.concave .slides section.stack{transform-style:preserve-3d}.reveal .slides>section[data-transition=concave].past,.reveal .slides>section[data-transition~=concave-out].past,.reveal.concave .slides>section:not([data-transition]).past{transform:translate3d(-100%,0,0) rotateY(90deg) translate3d(-100%,0,0)}.reveal .slides>section[data-transition=concave].future,.reveal .slides>section[data-transition~=concave-in].future,.reveal.concave .slides>section:not([data-transition]).future{transform:translate3d(100%,0,0) rotateY(-90deg) translate3d(100%,0,0)}.reveal .slides>section>section[data-transition=concave].past,.reveal .slides>section>section[data-transition~=concave-out].past,.reveal.concave .slides>section>section:not([data-transition]).past{transform:translate3d(0,-80%,0) rotateX(-70deg) translate3d(0,-80%,0)}.reveal .slides>section>section[data-transition=concave].future,.reveal .slides>section>section[data-transition~=concave-in].future,.reveal.concave .slides>section>section:not([data-transition]).future{transform:translate3d(0,80%,0) rotateX(70deg) translate3d(0,80%,0)}.reveal .slides section[data-transition=zoom],.reveal.zoom .slides section:not([data-transition]){transition-timing-function:ease}.reveal .slides>section[data-transition=zoom].past,.reveal .slides>section[data-transition~=zoom-out].past,.reveal.zoom .slides>section:not([data-transition]).past{visibility:hidden;transform:scale(16)}.reveal .slides>section[data-transition=zoom].future,.reveal .slides>section[data-transition~=zoom-in].future,.reveal.zoom .slides>section:not([data-transition]).future{visibility:hidden;transform:scale(.2)}.reveal .slides>section>section[data-transition=zoom].past,.reveal .slides>section>section[data-transition~=zoom-out].past,.reveal.zoom .slides>section>section:not([data-transition]).past{transform:scale(16)}.reveal .slides>section>section[data-transition=zoom].future,.reveal .slides>section>section[data-transition~=zoom-in].future,.reveal.zoom .slides>section>section:not([data-transition]).future{transform:scale(.2)}.reveal.cube .slides{perspective:1300px}.reveal.cube .slides section{padding:30px;min-height:700px;backface-visibility:hidden;box-sizing:border-box;transform-style:preserve-3d}.reveal.center.cube .slides section{min-height:0}.reveal.cube .slides section:not(.stack):before{content:"";position:absolute;display:block;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,.1);border-radius:4px;transform:translateZ(-20px)}.reveal.cube .slides section:not(.stack):after{content:"";position:absolute;display:block;width:90%;height:30px;left:5%;bottom:0;background:0 0;z-index:1;border-radius:4px;box-shadow:0 95px 25px rgba(0,0,0,.2);transform:translateZ(-90px) rotateX(65deg)}.reveal.cube .slides>section.stack{padding:0;background:0 0}.reveal.cube .slides>section.past{transform-origin:100% 0;transform:translate3d(-100%,0,0) rotateY(-90deg)}.reveal.cube .slides>section.future{transform-origin:0 0;transform:translate3d(100%,0,0) rotateY(90deg)}.reveal.cube .slides>section>section.past{transform-origin:0 100%;transform:translate3d(0,-100%,0) rotateX(90deg)}.reveal.cube .slides>section>section.future{transform-origin:0 0;transform:translate3d(0,100%,0) rotateX(-90deg)}.reveal.page .slides{perspective-origin:0 50%;perspective:3000px}.reveal.page .slides section{padding:30px;min-height:700px;box-sizing:border-box;transform-style:preserve-3d}.reveal.page .slides section.past{z-index:12}.reveal.page .slides section:not(.stack):before{content:"";position:absolute;display:block;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,.1);transform:translateZ(-20px)}.reveal.page .slides section:not(.stack):after{content:"";position:absolute;display:block;width:90%;height:30px;left:5%;bottom:0;background:0 0;z-index:1;border-radius:4px;box-shadow:0 95px 25px rgba(0,0,0,.2);transform:translateZ(-90px) rotateX(65deg)}.reveal.page .slides>section.stack{padding:0;background:0 0}.reveal.page .slides>section.past{transform-origin:0 0;transform:translate3d(-40%,0,0) rotateY(-80deg)}.reveal.page .slides>section.future{transform-origin:100% 0;transform:translate3d(0,0,0)}.reveal.page .slides>section>section.past{transform-origin:0 0;transform:translate3d(0,-40%,0) rotateX(80deg)}.reveal.page .slides>section>section.future{transform-origin:0 100%;transform:translate3d(0,0,0)}.reveal .slides section[data-transition=fade],.reveal.fade .slides section:not([data-transition]),.reveal.fade .slides>section>section:not([data-transition]){transform:none;transition:opacity .5s}.reveal.fade.overview .slides section,.reveal.fade.overview .slides>section>section{transition:none}.reveal .slides section[data-transition=none],.reveal.none .slides section:not([data-transition]){transform:none;transition:none}.reveal .pause-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;visibility:hidden;opacity:0;z-index:100;transition:all 1s ease}.reveal .pause-overlay .resume-button{position:absolute;bottom:20px;right:20px;color:#ccc;border-radius:2px;padding:6px 14px;border:2px solid #ccc;font-size:16px;background:0 0;cursor:pointer}.reveal .pause-overlay .resume-button:hover{color:#fff;border-color:#fff}.reveal.paused .pause-overlay{visibility:visible;opacity:1}.reveal .no-transition,.reveal .no-transition *,.reveal .slides.disable-slide-transitions section{transition:none!important}.reveal .slides.disable-slide-transitions section{transform:none!important}.reveal .backgrounds{position:absolute;width:100%;height:100%;top:0;left:0;perspective:600px}.reveal .slide-background{display:none;position:absolute;width:100%;height:100%;opacity:0;visibility:hidden;overflow:hidden;background-color:rgba(0,0,0,0);transition:all .8s cubic-bezier(.26,.86,.44,.985)}.reveal .slide-background-content{position:absolute;width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;background-size:cover}.reveal .slide-background.stack{display:block}.reveal .slide-background.present{opacity:1;visibility:visible;z-index:2}.print-pdf .reveal .slide-background{opacity:1!important;visibility:visible!important}.reveal .slide-background video{position:absolute;width:100%;height:100%;max-width:none;max-height:none;top:0;left:0;object-fit:cover}.reveal .slide-background[data-background-size=contain] video{object-fit:contain}.reveal>.backgrounds .slide-background[data-background-transition=none],.reveal[data-background-transition=none]>.backgrounds .slide-background:not([data-background-transition]){transition:none}.reveal>.backgrounds .slide-background[data-background-transition=slide],.reveal[data-background-transition=slide]>.backgrounds .slide-background:not([data-background-transition]){opacity:1}.reveal>.backgrounds .slide-background.past[data-background-transition=slide],.reveal[data-background-transition=slide]>.backgrounds .slide-background.past:not([data-background-transition]){transform:translate(-100%,0)}.reveal>.backgrounds .slide-background.future[data-background-transition=slide],.reveal[data-background-transition=slide]>.backgrounds .slide-background.future:not([data-background-transition]){transform:translate(100%,0)}.reveal>.backgrounds .slide-background>.slide-background.past[data-background-transition=slide],.reveal[data-background-transition=slide]>.backgrounds .slide-background>.slide-background.past:not([data-background-transition]){transform:translate(0,-100%)}.reveal>.backgrounds .slide-background>.slide-background.future[data-background-transition=slide],.reveal[data-background-transition=slide]>.backgrounds .slide-background>.slide-background.future:not([data-background-transition]){transform:translate(0,100%)}.reveal>.backgrounds .slide-background.past[data-background-transition=convex],.reveal[data-background-transition=convex]>.backgrounds .slide-background.past:not([data-background-transition]){opacity:0;transform:translate3d(-100%,0,0) rotateY(-90deg) translate3d(-100%,0,0)}.reveal>.backgrounds .slide-background.future[data-background-transition=convex],.reveal[data-background-transition=convex]>.backgrounds .slide-background.future:not([data-background-transition]){opacity:0;transform:translate3d(100%,0,0) rotateY(90deg) translate3d(100%,0,0)}.reveal>.backgrounds .slide-background>.slide-background.past[data-background-transition=convex],.reveal[data-background-transition=convex]>.backgrounds .slide-background>.slide-background.past:not([data-background-transition]){opacity:0;transform:translate3d(0,-100%,0) rotateX(90deg) translate3d(0,-100%,0)}.reveal>.backgrounds .slide-background>.slide-background.future[data-background-transition=convex],.reveal[data-background-transition=convex]>.backgrounds .slide-background>.slide-background.future:not([data-background-transition]){opacity:0;transform:translate3d(0,100%,0) rotateX(-90deg) translate3d(0,100%,0)}.reveal>.backgrounds .slide-background.past[data-background-transition=concave],.reveal[data-background-transition=concave]>.backgrounds .slide-background.past:not([data-background-transition]){opacity:0;transform:translate3d(-100%,0,0) rotateY(90deg) translate3d(-100%,0,0)}.reveal>.backgrounds .slide-background.future[data-background-transition=concave],.reveal[data-background-transition=concave]>.backgrounds .slide-background.future:not([data-background-transition]){opacity:0;transform:translate3d(100%,0,0) rotateY(-90deg) translate3d(100%,0,0)}.reveal>.backgrounds .slide-background>.slide-background.past[data-background-transition=concave],.reveal[data-background-transition=concave]>.backgrounds .slide-background>.slide-background.past:not([data-background-transition]){opacity:0;transform:translate3d(0,-100%,0) rotateX(-90deg) translate3d(0,-100%,0)}.reveal>.backgrounds .slide-background>.slide-background.future[data-background-transition=concave],.reveal[data-background-transition=concave]>.backgrounds .slide-background>.slide-background.future:not([data-background-transition]){opacity:0;transform:translate3d(0,100%,0) rotateX(90deg) translate3d(0,100%,0)}.reveal>.backgrounds .slide-background[data-background-transition=zoom],.reveal[data-background-transition=zoom]>.backgrounds .slide-background:not([data-background-transition]){transition-timing-function:ease}.reveal>.backgrounds .slide-background.past[data-background-transition=zoom],.reveal[data-background-transition=zoom]>.backgrounds .slide-background.past:not([data-background-transition]){opacity:0;visibility:hidden;transform:scale(16)}.reveal>.backgrounds .slide-background.future[data-background-transition=zoom],.reveal[data-background-transition=zoom]>.backgrounds .slide-background.future:not([data-background-transition]){opacity:0;visibility:hidden;transform:scale(.2)}.reveal>.backgrounds .slide-background>.slide-background.past[data-background-transition=zoom],.reveal[data-background-transition=zoom]>.backgrounds .slide-background>.slide-background.past:not([data-background-transition]){opacity:0;visibility:hidden;transform:scale(16)}.reveal>.backgrounds .slide-background>.slide-background.future[data-background-transition=zoom],.reveal[data-background-transition=zoom]>.backgrounds .slide-background>.slide-background.future:not([data-background-transition]){opacity:0;visibility:hidden;transform:scale(.2)}.reveal[data-transition-speed=fast]>.backgrounds .slide-background{transition-duration:.4s}.reveal[data-transition-speed=slow]>.backgrounds .slide-background{transition-duration:1.2s}.reveal [data-auto-animate-target^=unmatched]{will-change:opacity}.reveal section[data-auto-animate]:not(.stack):not([data-auto-animate=running]) [data-auto-animate-target^=unmatched]{opacity:0}.reveal.overview{perspective-origin:50% 50%;perspective:700px}.reveal.overview .slides section{height:100%;top:0!important;opacity:1!important;overflow:hidden;visibility:visible!important;cursor:pointer;box-sizing:border-box}.reveal.overview .slides section.present,.reveal.overview .slides section:hover{outline:10px solid rgba(150,150,150,.4);outline-offset:10px}.reveal.overview .slides section .fragment{opacity:1;transition:none}.reveal.overview .slides section:after,.reveal.overview .slides section:before{display:none!important}.reveal.overview .slides>section.stack{padding:0;top:0!important;background:0 0;outline:0;overflow:visible}.reveal.overview .backgrounds{perspective:inherit}.reveal.overview .backgrounds .slide-background{opacity:1;visibility:visible;outline:10px solid rgba(150,150,150,.1);outline-offset:10px}.reveal.overview .backgrounds .slide-background.stack{overflow:visible}.reveal.overview .slides section,.reveal.overview-deactivating .slides section{transition:none}.reveal.overview .backgrounds .slide-background,.reveal.overview-deactivating .backgrounds .slide-background{transition:none}.reveal.rtl .slides,.reveal.rtl .slides h1,.reveal.rtl .slides h2,.reveal.rtl .slides h3,.reveal.rtl .slides h4,.reveal.rtl .slides h5,.reveal.rtl .slides h6{direction:rtl;font-family:sans-serif}.reveal.rtl code,.reveal.rtl pre{direction:ltr}.reveal.rtl ol,.reveal.rtl ul{text-align:right}.reveal.rtl .progress span{transform-origin:100% 0}.reveal.has-parallax-background .backgrounds{transition:all .8s ease}.reveal.has-parallax-background[data-transition-speed=fast] .backgrounds{transition-duration:.4s}.reveal.has-parallax-background[data-transition-speed=slow] .backgrounds{transition-duration:1.2s}@keyframes fade-in{from{opacity:0}to{opacity:1}}@keyframes scale-up{from{transform:scale(.95)}to{transform:scale(1)}}.reveal [data-preview-image],.reveal [data-preview-link]:not(a):not([data-preview-link=false]),.reveal [data-preview-video]{cursor:zoom-in}.r-overlay{position:absolute;top:var(--r-overlay-margin);right:var(--r-overlay-margin);bottom:var(--r-overlay-margin);left:var(--r-overlay-margin);border-radius:min(var(--r-overlay-margin),6px);z-index:99;background:rgba(0,0,0,.95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease;color:#fff;animation:fade-in .3s ease;font-family:ui-sans-serif,system-ui,-apple-system,Helvetica,sans-serif}.r-overlay-viewport{position:absolute;top:var(--r-overlay-padding);right:var(--r-overlay-padding);bottom:var(--r-overlay-padding);left:var(--r-overlay-padding);gap:var(--r-overlay-gap);display:flex;flex-direction:column}.r-overlay-header{display:flex;z-index:2;box-sizing:border-box;align-items:center;justify-content:flex-end;height:var(--r-overlay-header-height);gap:6px}.r-overlay-header .r-overlay-button{all:unset;display:flex;align-items:center;justify-content:center;min-width:var(--r-overlay-header-height);min-height:var(--r-overlay-header-height);padding:0 calc(var(--r-overlay-header-height)/ 4);opacity:1;border-radius:6px;font-size:18px;gap:8px;cursor:pointer;box-sizing:border-box}.r-overlay-header .r-overlay-button:hover{opacity:1;background-color:rgba(255,255,255,.15)}.r-overlay-header .icon{display:inline-block;width:20px;height:20px;background-position:50% 50%;background-size:100%;background-repeat:no-repeat}.r-overlay-close .icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuODU0IDIuODU0YS41LjUgMCAwIDAtLjcwOC0uNzA4TDcuNSA2Ljc5MyAyLjg1NCAyLjE0NmEuNS41IDAgMSAwLS43MDguNzA4TDYuNzkzIDcuNWwtNC42NDcgNC42NDZhLjUuNSAwIDAgMCAuNzA4LjcwOEw3LjUgOC4yMDdsNC42NDYgNC42NDdhLjUuNSAwIDAgMCAuNzA4LS43MDhMOC4yMDcgNy41bDQuNjQ3LTQuNjQ2WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.r-overlay-external .icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyAyYTEgMSAwIDAgMC0xIDF2OWExIDEgMCAwIDAgMSAxaDlhMSAxIDAgMCAwIDEtMVY4LjVhLjUuNSAwIDAgMC0xIDBWMTJIM1YzaDMuNWEuNS41IDAgMCAwIDAtMUgzWm05Ljg1NC4xNDZhLjUuNSAwIDAgMSAuMTQ2LjM1MVY1LjVhLjUuNSAwIDAgMS0xIDBWMy43MDdMNi44NTQgOC44NTRhLjUuNSAwIDEgMS0uNzA4LS43MDhMMTEuMjkzIDNIOS41YS41LjUgMCAwIDEgMC0xaDNhLjQ5OS40OTkgMCAwIDEgLjM1NC4xNDZaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.r-overlay-content{position:relative;display:grid;place-items:center;border-radius:6px;overflow:hidden;flex-grow:1;background-color:rgba(20,20,20,.8);animation:scale-up .5s cubic-bezier(.26,.86,.44,.985)}.r-overlay-spinner{position:absolute;display:block;top:50%;left:50%;width:32px;height:32px;margin:-16px 0 0 -16px;z-index:10;background-image:url(data:image/gif;base64,R0lGODlhIAAgAPMAAJmZmf%2F%2F%2F6%2Bvr8nJybW1tcDAwOjo6Nvb26ioqKOjo7Ozs%2FLy8vz8%2FAAAAAAAAAAAACH%2FC05FVFNDQVBFMi4wAwEAAAAh%2FhpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh%2BQQJCgAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ%2FV%2FnmOM82XiHRLYKhKP1oZmADdEAAAh%2BQQJCgAAACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY%2FCZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB%2BA4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6%2BHo7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq%2BB6QDtuetcaBPnW6%2BO7wDHpIiK9SaVK5GgV543tzjgGcghAgAh%2BQQJCgAAACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK%2B%2BG%2Bw48edZPK%2BM6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkECQoAAAAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE%2BG%2BcD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm%2BFNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk%2BaV%2BoJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkECQoAAAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0%2FVNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAkKAAAALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc%2BXiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30%2FiI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE%2FjiuL04RGEBgwWhShRgQExHBAAh%2BQQJCgAAACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR%2BipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAkKAAAALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY%2BYip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd%2BMFCN6HAAIKgNggY0KtEBAAh%2BQQJCgAAACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1%2BvsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d%2BjYUqfAhhykOFwJWiAAAIfkECQoAAAAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg%2BygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0%2Bbm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h%2BKr0SJ8MFihpNbx%2B4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX%2BBP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA%3D%3D);visibility:hidden;opacity:0}.r-overlay-preview .r-overlay-content iframe{width:100%;height:100%;max-width:100%;max-height:100%;border:0;opacity:0;visibility:hidden;transition:all .3s ease}.r-overlay-preview[data-state=loaded] iframe{opacity:1;visibility:visible}.r-overlay-preview .r-overlay-content img,.r-overlay-preview .r-overlay-content video{position:absolute;max-width:100%;max-height:100%;width:100%;height:100%;margin:0;object-fit:scale-down}.r-overlay-preview[data-preview-fit=none] img,.r-overlay-preview[data-preview-fit=none] video{object-fit:none}.r-overlay-preview[data-preview-fit=scale-down] img,.r-overlay-preview[data-preview-fit=scale-down] video{object-fit:scale-down}.r-overlay-preview[data-preview-fit=contain] img,.r-overlay-preview[data-preview-fit=contain] video{object-fit:contain}.r-overlay-preview[data-preview-fit=cover] img,.r-overlay-preview[data-preview-fit=cover] video{object-fit:cover}.r-overlay-preview[data-state=loaded] .r-overlay-content-inner{position:absolute;z-index:-1;left:0;top:45%;width:100%;text-align:center;letter-spacing:normal}.r-overlay-preview .r-overlay-error{font-size:18px;color:orange}.r-overlay-preview .x-frame-error{opacity:0;transition:opacity .3s ease .3s}.r-overlay-preview[data-state=loaded] .x-frame-error{opacity:1}.r-overlay-preview[data-state=loading] .r-overlay-spinner{opacity:.6;visibility:visible}.r-overlay-help .r-overlay-content{overflow:auto}.r-overlay-help-content{max-width:560px;padding:20px 0;margin:auto;text-align:center;letter-spacing:normal}.r-overlay-help-content .title{font-size:20px;margin-top:0}.r-overlay-help .r-overlay-help-content table{border:1px solid #fff;border-collapse:collapse;font-size:16px;text-align:left}.r-overlay-help .r-overlay-help-content table td,.r-overlay-help .r-overlay-help-content table th{width:240px;padding:14px;border:1px solid #fff;vertical-align:middle}.r-overlay-help .r-overlay-help-content table th{padding-top:20px;padding-bottom:20px}.reveal .playback{position:absolute;left:15px;bottom:20px;z-index:30;cursor:pointer;transition:all .4s ease;-webkit-tap-highlight-color:transparent}.reveal.overview .playback{opacity:0;visibility:hidden}.reveal .hljs{min-height:100%}.reveal .hljs table{margin:initial}.reveal .hljs-ln-code,.reveal .hljs-ln-numbers{padding:0;border:0}.reveal .hljs-ln-numbers{opacity:.6;padding-right:.75em;text-align:right;vertical-align:top}.reveal .hljs.has-highlights tr:not(.highlight-line){opacity:.4}.reveal .hljs.has-highlights.fragment{transition:all .2s ease}.reveal .hljs:not(:first-child).fragment{position:absolute;top:0;left:0;width:100%;box-sizing:border-box}.reveal pre[data-auto-animate-target]{overflow:hidden}.reveal pre[data-auto-animate-target] code{height:100%}.reveal .roll{display:inline-block;line-height:1.2;overflow:hidden;vertical-align:top;perspective:400px;perspective-origin:50% 50%}.reveal .roll:hover{background:0 0;text-shadow:none}.reveal .roll span{display:block;position:relative;padding:0 2px;pointer-events:none;transition:all .4s ease;transform-origin:50% 0;transform-style:preserve-3d;backface-visibility:hidden}.reveal .roll:hover span{background:rgba(0,0,0,.5);transform:translate3d(0,0,-45px) rotateX(90deg)}.reveal .roll span:after{content:attr(data-title);display:block;position:absolute;left:0;top:0;padding:0 2px;backface-visibility:hidden;transform-origin:50% 0;transform:translate3d(0,110%,0) rotateX(-90deg)}.reveal aside.notes{display:none}.reveal .speaker-notes{display:none;position:absolute;width:33.3333333333%;height:100%;top:0;left:100%;padding:14px 18px 14px 18px;z-index:1;font-size:18px;line-height:1.4;border:1px solid rgba(0,0,0,.05);color:#222;background-color:#f5f5f5;overflow:auto;box-sizing:border-box;text-align:left;font-family:Helvetica,sans-serif;-webkit-overflow-scrolling:touch}.reveal .speaker-notes .notes-placeholder{color:#ccc;font-style:italic}.reveal .speaker-notes:focus{outline:0}.reveal .speaker-notes:before{content:"Speaker notes";display:block;margin-bottom:10px;opacity:.5}.reveal.show-notes{max-width:75%;overflow:visible}.reveal.show-notes .speaker-notes{display:block}@media screen and (min-width:1600px){.reveal .speaker-notes{font-size:20px}}@media screen and (max-width:1024px){.reveal.show-notes{border-left:0;max-width:none;max-height:70%;max-height:70vh;overflow:visible}.reveal.show-notes .speaker-notes{top:100%;left:0;width:100%;height:30vh;border:0}}@media screen and (max-width:600px){.reveal.show-notes{max-height:60%;max-height:60vh}.reveal.show-notes .speaker-notes{top:100%;height:40vh}.reveal .speaker-notes{font-size:14px}}.reveal .jump-to-slide{position:absolute;top:15px;left:15px;z-index:30;font-size:32px;-webkit-tap-highlight-color:transparent}.reveal .jump-to-slide-input{background:0 0;padding:8px;font-size:inherit;color:currentColor;border:0}.reveal .jump-to-slide-input::placeholder{color:currentColor;opacity:.5}.reveal.has-dark-background .jump-to-slide-input{color:#fff}.reveal.has-light-background .jump-to-slide-input{color:#222}.reveal .jump-to-slide-input:focus{outline:0}.zoomed .reveal *,.zoomed .reveal :after,.zoomed .reveal :before{backface-visibility:visible!important}.zoomed .reveal .controls,.zoomed .reveal .progress{opacity:0}.zoomed .reveal .roll span{background:0 0}.zoomed .reveal .roll span:after{visibility:hidden}.reveal-viewport.loading-scroll-mode{visibility:hidden}.reveal-viewport.reveal-scroll{margin:0 auto;overflow:auto;overflow-x:hidden;overflow-y:auto;z-index:1;--r-scrollbar-width:7px;--r-scrollbar-trigger-size:5px;--r-controls-spacing:8px}@media screen and (max-width:500px){.reveal-viewport.reveal-scroll{--r-scrollbar-width:3px;--r-scrollbar-trigger-size:3px}}.reveal-viewport.reveal-scroll .backgrounds,.reveal-viewport.reveal-scroll .controls,.reveal-viewport.reveal-scroll .playback,.reveal-viewport.reveal-scroll .progress,.reveal-viewport.reveal-scroll .slide-number,.reveal-viewport.reveal-scroll .speaker-notes{display:none!important}.reveal-viewport.reveal-scroll .pause-overlay,.reveal-viewport.reveal-scroll .r-overlay{position:fixed}.reveal-viewport.reveal-scroll .reveal{overflow:visible;touch-action:manipulation}.reveal-viewport.reveal-scroll .slides{position:static;pointer-events:initial;left:auto;top:auto;width:100%!important;margin:0;padding:0;overflow:visible;display:block;perspective:none;perspective-origin:50% 50%}.reveal-viewport.reveal-scroll .scroll-page{position:relative;width:100%;height:calc(var(--page-height) + var(--page-scroll-padding));z-index:1;overflow:visible}.reveal-viewport.reveal-scroll .scroll-page-sticky{position:sticky;height:var(--page-height);top:0}.reveal-viewport.reveal-scroll .scroll-page-content{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.reveal-viewport.reveal-scroll .scroll-page section{visibility:visible!important;display:block!important;position:absolute!important;width:var(--slide-width)!important;height:var(--slide-height)!important;top:50%!important;left:50%!important;opacity:1!important;transform:scale(var(--slide-scale)) translate(-50%,-50%)!important;transform-style:flat!important;transform-origin:0 0!important}.reveal-viewport.reveal-scroll .slide-background{display:block!important;position:absolute;top:0;left:0;width:100%;height:100%;z-index:auto!important;visibility:visible;opacity:1;touch-action:manipulation}.reveal-viewport.reveal-scroll[data-scrollbar=auto]::-webkit-scrollbar,.reveal-viewport.reveal-scroll[data-scrollbar=true]::-webkit-scrollbar{display:none}.reveal-viewport.reveal-scroll[data-scrollbar=auto],.reveal-viewport.reveal-scroll[data-scrollbar=true]{scrollbar-width:none}.reveal-viewport.has-dark-background,.reveal.has-dark-background{--r-overlay-element-bg-color:240,240,240;--r-overlay-element-fg-color:0,0,0}.reveal-viewport.has-light-background,.reveal.has-light-background{--r-overlay-element-bg-color:0,0,0;--r-overlay-element-fg-color:240,240,240}.reveal-viewport.reveal-scroll .scrollbar{position:sticky;top:50%;z-index:20;opacity:0;transition:all .3s ease}.reveal-viewport.reveal-scroll .scrollbar.visible,.reveal-viewport.reveal-scroll .scrollbar:hover{opacity:1}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-inner{position:absolute;width:var(--r-scrollbar-width);height:calc(var(--viewport-height) - var(--r-controls-spacing) * 2);right:var(--r-controls-spacing);top:0;transform:translateY(-50%);border-radius:var(--r-scrollbar-width);z-index:10}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-playhead{position:absolute;width:var(--r-scrollbar-width);height:var(--r-scrollbar-width);top:0;left:0;border-radius:var(--r-scrollbar-width);background-color:rgba(var(--r-overlay-element-bg-color),1);z-index:11;transition:background-color .2s ease}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide{position:absolute;width:100%;background-color:rgba(var(--r-overlay-element-bg-color),.2);box-shadow:0 0 0 1px rgba(var(--r-overlay-element-fg-color),.1);border-radius:var(--r-scrollbar-width);transition:background-color .2s ease}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide:after{content:"";position:absolute;width:200%;height:100%;top:0;left:-50%;background:rgba(0,0,0,0);z-index:-1}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide.active,.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide:hover{background-color:rgba(var(--r-overlay-element-bg-color),.4)}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-trigger{position:absolute;width:100%;transition:background-color .2s ease}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide.active.has-triggers{background-color:rgba(var(--r-overlay-element-bg-color),.4);z-index:10}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide.active .scrollbar-trigger:after{content:"";position:absolute;width:var(--r-scrollbar-trigger-size);height:var(--r-scrollbar-trigger-size);border-radius:20px;top:50%;left:50%;transform:translate(-50%,-50%);background-color:rgba(var(--r-overlay-element-bg-color),1);transition:transform .2s ease,opacity .2s ease;opacity:.4}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide.active .scrollbar-trigger.active:after,.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide.active .scrollbar-trigger.active~.scrollbar-trigger:after{opacity:1}.reveal-viewport.reveal-scroll .scrollbar .scrollbar-slide.active .scrollbar-trigger~.scrollbar-trigger.active:after{transform:translate(calc(var(--r-scrollbar-width) * -2),0);background-color:rgba(var(--r-overlay-element-bg-color),1)}html.reveal-print *{-webkit-print-color-adjust:exact}html.reveal-print{width:100%;height:100%;overflow:visible}html.reveal-print body{margin:0 auto!important;border:0;padding:0;float:none!important;overflow:visible}html.reveal-print .nestedarrow,html.reveal-print .reveal .controls,html.reveal-print .reveal .playback,html.reveal-print .reveal .progress,html.reveal-print .reveal.overview,html.reveal-print .state-background{display:none!important}html.reveal-print .reveal pre code{overflow:hidden!important}html.reveal-print .reveal{width:auto!important;height:auto!important;overflow:hidden!important}html.reveal-print .reveal .slides{position:static;width:100%!important;height:auto!important;zoom:1!important;pointer-events:initial;left:auto;top:auto;margin:0!important;padding:0!important;overflow:visible;display:block;perspective:none;perspective-origin:50% 50%}html.reveal-print .reveal .slides .pdf-page{position:relative;overflow:hidden;z-index:1;page-break-after:always}html.reveal-print .reveal .slides .pdf-page:last-of-type{page-break-after:avoid}html.reveal-print .reveal .slides section{visibility:visible!important;display:block!important;position:absolute!important;margin:0!important;padding:0!important;box-sizing:border-box!important;min-height:1px;opacity:1!important;transform-style:flat!important;transform:none!important}html.reveal-print .reveal section.stack{position:relative!important;margin:0!important;padding:0!important;page-break-after:avoid!important;height:auto!important;min-height:auto!important}html.reveal-print .reveal img{box-shadow:none}html.reveal-print .reveal .backgrounds{display:none}html.reveal-print .reveal .slide-background{display:block!important;position:absolute;top:0;left:0;width:100%;height:100%;z-index:auto!important}html.reveal-print .reveal.show-notes{max-width:none;max-height:none}html.reveal-print .reveal .speaker-notes-pdf{display:block;width:100%;height:auto;max-height:none;top:auto;right:auto;bottom:auto;left:auto;z-index:100}html.reveal-print .reveal .speaker-notes-pdf[data-layout=separate-page]{position:relative;color:inherit;background-color:transparent;padding:20px;page-break-after:always;border:0}html.reveal-print .reveal .slide-number-pdf{display:block;position:absolute;font-size:14px;visibility:visible}html.reveal-print .aria-status{display:none}@media print{html:not(.print-pdf){overflow:visible;width:auto;height:auto}html:not(.print-pdf) body{margin:0;padding:0;overflow:visible}html:not(.print-pdf) .reveal{background:#fff;font-size:20pt}html:not(.print-pdf) .reveal .backgrounds,html:not(.print-pdf) .reveal .controls,html:not(.print-pdf) .reveal .progress,html:not(.print-pdf) .reveal .slide-number,html:not(.print-pdf) .reveal .state-background{display:none!important}html:not(.print-pdf) .reveal li,html:not(.print-pdf) .reveal p,html:not(.print-pdf) .reveal td{font-size:20pt!important;color:#000}html:not(.print-pdf) .reveal h1,html:not(.print-pdf) .reveal h2,html:not(.print-pdf) .reveal h3,html:not(.print-pdf) .reveal h4,html:not(.print-pdf) .reveal h5,html:not(.print-pdf) .reveal h6{color:#000!important;height:auto;line-height:normal;text-align:left;letter-spacing:normal}html:not(.print-pdf) .reveal h1{font-size:28pt!important}html:not(.print-pdf) .reveal h2{font-size:24pt!important}html:not(.print-pdf) .reveal h3{font-size:22pt!important}html:not(.print-pdf) .reveal h4{font-size:22pt!important;font-variant:small-caps}html:not(.print-pdf) .reveal h5{font-size:21pt!important}html:not(.print-pdf) .reveal h6{font-size:20pt!important;font-style:italic}html:not(.print-pdf) .reveal a:link,html:not(.print-pdf) .reveal a:visited{color:#000!important;font-weight:700;text-decoration:underline}html:not(.print-pdf) .reveal div,html:not(.print-pdf) .reveal ol,html:not(.print-pdf) .reveal p,html:not(.print-pdf) .reveal ul{visibility:visible;position:static;width:auto;height:auto;display:block;overflow:visible;margin:0;text-align:left!important}html:not(.print-pdf) .reveal pre,html:not(.print-pdf) .reveal table{margin-left:0;margin-right:0}html:not(.print-pdf) .reveal pre code{padding:20px}html:not(.print-pdf) .reveal blockquote{margin:20px 0}html:not(.print-pdf) .reveal .slides{position:static!important;width:auto!important;height:auto!important;left:0!important;top:0!important;margin-left:0!important;margin-top:0!important;padding:0!important;zoom:1!important;transform:none!important;overflow:visible!important;display:block!important;text-align:left!important;perspective:none;perspective-origin:50% 50%}html:not(.print-pdf) .reveal .slides section{visibility:visible!important;position:static!important;width:auto!important;height:auto!important;display:block!important;overflow:visible!important;left:0!important;top:0!important;margin-left:0!important;margin-top:0!important;padding:60px 20px!important;z-index:auto!important;opacity:1!important;page-break-after:always!important;transform-style:flat!important;transform:none!important;transition:none!important}html:not(.print-pdf) .reveal .slides section.stack{padding:0!important}html:not(.print-pdf) .reveal .slides section:last-of-type{page-break-after:avoid!important}html:not(.print-pdf) .reveal .slides section .fragment{opacity:1!important;visibility:visible!important;transform:none!important}html:not(.print-pdf) .reveal .r-fit-text{white-space:normal!important}html:not(.print-pdf) .reveal section img{display:block;margin:15px 0;background:#fff;border:1px solid #666;box-shadow:none}html:not(.print-pdf) .reveal section small{font-size:.8em}html:not(.print-pdf) .reveal .hljs{max-height:100%;white-space:pre-wrap;word-wrap:break-word;word-break:break-word;font-size:15pt}html:not(.print-pdf) .reveal .hljs .hljs-ln-numbers{white-space:nowrap}html:not(.print-pdf) .reveal .hljs td{font-size:inherit!important;color:inherit!important}}
</style>

<style type="text/css">
/**
 * White theme for reveal.js. This is the opposite of the 'black' theme.
 *
 * By Hakim El Hattab, http://hakim.se
 */
@import url(./fonts/source-sans-pro/source-sans-pro.css);
section.has-dark-background, section.has-dark-background h1, section.has-dark-background h2, section.has-dark-background h3, section.has-dark-background h4, section.has-dark-background h5, section.has-dark-background h6 {
  color: #fff;
}

/*********************************************
 * GLOBAL STYLES
 *********************************************/
:root {
  --r-background-color: #fff;
  --r-main-font: Source Sans Pro, Helvetica, sans-serif;
  --r-main-font-size: 42px;
  --r-main-color: #222;
  --r-block-margin: 20px;
  --r-heading-margin: 0 0 20px 0;
  --r-heading-font: Source Sans Pro, Helvetica, sans-serif;
  --r-heading-color: #222;
  --r-heading-line-height: 1.2;
  --r-heading-letter-spacing: normal;
  --r-heading-text-transform: uppercase;
  --r-heading-text-shadow: none;
  --r-heading-font-weight: 600;
  --r-heading1-text-shadow: none;
  --r-heading1-size: 2.5em;
  --r-heading2-size: 1.6em;
  --r-heading3-size: 1.3em;
  --r-heading4-size: 1em;
  --r-code-font: monospace;
  --r-link-color: #2a76dd;
  --r-link-color-dark: rgb(30.7720647773, 99.5566801619, 192.7779352227);
  --r-link-color-hover: rgb(73.95, 138.55, 226.1);
  --r-selection-background-color: rgb(95.25, 152.25, 229.5);
  --r-selection-color: #fff;
  --r-overlay-element-bg-color: 0, 0, 0;
  --r-overlay-element-fg-color: 240, 240, 240;
}

.reveal-viewport {
  background: #fff;
  background-color: var(--r-background-color);
}

.reveal {
  font-family: var(--r-main-font);
  font-size: var(--r-main-font-size);
  font-weight: normal;
  color: var(--r-main-color);
}

.reveal ::selection {
  color: var(--r-selection-color);
  background: var(--r-selection-background-color);
  text-shadow: none;
}

.reveal ::-moz-selection {
  color: var(--r-selection-color);
  background: var(--r-selection-background-color);
  text-shadow: none;
}

.reveal .slides section,
.reveal .slides section > section {
  line-height: 1.3;
  font-weight: inherit;
}

/*********************************************
 * HEADERS
 *********************************************/
.reveal h1,
.reveal h2,
.reveal h3,
.reveal h4,
.reveal h5,
.reveal h6 {
  margin: var(--r-heading-margin);
  color: var(--r-heading-color);
  font-family: var(--r-heading-font);
  font-weight: var(--r-heading-font-weight);
  line-height: var(--r-heading-line-height);
  letter-spacing: var(--r-heading-letter-spacing);
  text-transform: var(--r-heading-text-transform);
  text-shadow: var(--r-heading-text-shadow);
  word-wrap: break-word;
}

.reveal h1 {
  font-size: var(--r-heading1-size);
}

.reveal h2 {
  font-size: var(--r-heading2-size);
}

.reveal h3 {
  font-size: var(--r-heading3-size);
}

.reveal h4 {
  font-size: var(--r-heading4-size);
}

.reveal h1 {
  text-shadow: var(--r-heading1-text-shadow);
}

/*********************************************
 * OTHER
 *********************************************/
.reveal p {
  margin: var(--r-block-margin) 0;
  line-height: 1.3;
}

/* Remove trailing margins after titles */
.reveal h1:last-child,
.reveal h2:last-child,
.reveal h3:last-child,
.reveal h4:last-child,
.reveal h5:last-child,
.reveal h6:last-child {
  margin-bottom: 0;
}

/* Ensure certain elements are never larger than the slide itself */
.reveal img,
.reveal video,
.reveal iframe {
  max-width: 95%;
  max-height: 95%;
}

.reveal strong,
.reveal b {
  font-weight: bold;
}

.reveal em {
  font-style: italic;
}

.reveal ol,
.reveal dl,
.reveal ul {
  display: inline-block;
  text-align: left;
  margin: 0 0 0 1em;
}

.reveal ol {
  list-style-type: decimal;
}

.reveal ul {
  list-style-type: disc;
}

.reveal ul ul {
  list-style-type: square;
}

.reveal ul ul ul {
  list-style-type: circle;
}

.reveal ul ul,
.reveal ul ol,
.reveal ol ol,
.reveal ol ul {
  display: block;
  margin-left: 40px;
}

.reveal dt {
  font-weight: bold;
}

.reveal dd {
  margin-left: 40px;
}

.reveal blockquote {
  display: block;
  position: relative;
  width: 70%;
  margin: var(--r-block-margin) auto;
  padding: 5px;
  font-style: italic;
  background: rgba(255, 255, 255, 0.05);
  box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.2);
}

.reveal blockquote p:first-child,
.reveal blockquote p:last-child {
  display: inline-block;
}

.reveal q {
  font-style: italic;
}

.reveal pre {
  display: block;
  position: relative;
  width: 90%;
  margin: var(--r-block-margin) auto;
  text-align: left;
  font-size: 0.55em;
  font-family: var(--r-code-font);
  line-height: 1.2em;
  word-wrap: break-word;
  box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.15);
}

.reveal code {
  font-family: var(--r-code-font);
  text-transform: none;
  tab-size: 2;
}

.reveal pre code {
  display: block;
  padding: 5px;
  overflow: auto;
  max-height: 400px;
  word-wrap: normal;
}

.reveal .code-wrapper {
  white-space: normal;
}

.reveal .code-wrapper code {
  white-space: pre;
}

.reveal table {
  margin: auto;
  border-collapse: collapse;
  border-spacing: 0;
}

.reveal table th {
  font-weight: bold;
}

.reveal table th,
.reveal table td {
  text-align: left;
  padding: 0.2em 0.5em 0.2em 0.5em;
  border-bottom: 1px solid;
}

.reveal table th[align=center],
.reveal table td[align=center] {
  text-align: center;
}

.reveal table th[align=right],
.reveal table td[align=right] {
  text-align: right;
}

.reveal table tbody tr:last-child th,
.reveal table tbody tr:last-child td {
  border-bottom: none;
}

.reveal sup {
  vertical-align: super;
  font-size: smaller;
}

.reveal sub {
  vertical-align: sub;
  font-size: smaller;
}

.reveal small {
  display: inline-block;
  font-size: 0.6em;
  line-height: 1.2em;
  vertical-align: top;
}

.reveal small * {
  vertical-align: top;
}

.reveal img {
  margin: var(--r-block-margin) 0;
}

/*********************************************
 * LINKS
 *********************************************/
.reveal a {
  color: var(--r-link-color);
  text-decoration: none;
  transition: color 0.15s ease;
}

.reveal a:hover {
  color: var(--r-link-color-hover);
  text-shadow: none;
  border: none;
}

.reveal .roll span:after {
  color: #fff;
  background: var(--r-link-color-dark);
}

/*********************************************
 * Frame helper
 *********************************************/
.reveal .r-frame {
  border: 4px solid var(--r-main-color);
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
}

.reveal a .r-frame {
  transition: all 0.15s linear;
}

.reveal a:hover .r-frame {
  border-color: var(--r-link-color);
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.55);
}

/*********************************************
 * NAVIGATION CONTROLS
 *********************************************/
.reveal .controls {
  color: var(--r-link-color);
}

/*********************************************
 * PROGRESS BAR
 *********************************************/
.reveal .progress {
  background: rgba(0, 0, 0, 0.2);
  color: var(--r-link-color);
}

/*********************************************
 * PRINT BACKGROUND
 *********************************************/
@media print {
  .backgrounds {
    background-color: var(--r-background-color);
  }
}
</style>

<style type="text/css">
/* ============================================
   Custom CSS for "Capital Reallocation and Bank Lending Networks"
   org-reveal presentation  19201080 target
   ============================================ */

/*  Google Fonts fallback for Linux  */
@import url('https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap');

/*  Color palette (consistent with TikZ diagrams)  */
:root {
  --blue:   #2166ac;  /* internal margin / portfolio /  */
  --orange: #e08214;  /* external margin / leverage /  */
  --red:    #b2182b;  /* shock / fragile / soft modes */
  --green:  #1b7837;  /* robust / stiff modes */
  --purple: #7b2d8e;  /* definitions / equilibrium */
  --gray:   #666666;  /* benchmark / neutral */
  --lightgray: #f5f5f5;
  --darktext: #222222;
}

/*  Base typography (serif, academic look)  */
.reveal {
  font-family: "EB Garamond", "Palatino Linotype", Palatino, "Book Antiqua", "Georgia", serif;
  font-size: 34px;
  line-height: 1.45;
  color: var(--darktext);
}

.reveal h1 {
  font-size: 2.2em;
  font-weight: 700;
  margin-bottom: 0.4em;
}

.reveal h2 {
  font-size: 1.4em;
  font-weight: 600;
  margin: 0 0 0.5em 0;
  color: var(--darktext);
  border-bottom: 1.5px solid #ddd;
  padding-bottom: 0.15em;
}

.reveal h3 {
  font-size: 1.1em;
  font-weight: 600;
  color: #444;
  margin-bottom: 0.3em;
}

/*  Slide layout & overflow fixes  */
/* Force top-alignment: override reveal.js default vertical centering.
   This ensures h2 titles stay at a fixed position regardless of content. */
.reveal .slides section {
  text-align: left;
  padding: 1em 1.4em;
  box-sizing: border-box;
  overflow: hidden;
  /* Pin content to top  prevents title position from shifting */
  display: flex !important;
  flex-direction: column !important;
  justify-content: flex-start !important;
  height: 100%;
}

.reveal .slides section * {
  box-sizing: border-box;
  flex-shrink: 0;
}

/* Center-slide exception: title slide uses centered layout */
.reveal .slides section.center-slide {
  text-align: center;
  justify-content: center !important;
}

/* .notitle slides: add top padding to match the space the h2 would occupy,
   so the content body starts at the same vertical position */
.reveal .slides section.notitle {
  padding-top: calc(1em + 1.4em * 1.45 + 0.5em + 0.15em + 1.5px);
  /* = section padding + h2 font-sizeline-height + h2 margin-bottom + padding-bottom + border */
}

/* Prevent content overflow */
.reveal .slides section table,
.reveal .slides section .katex-display {
  max-width: 100%;
}

/*  .notitle: hide h2 on slides that don't need visible titles  */
.notitle h2 {
  display: none !important;
}

/*  .title-as-text: demote heading to body-text styling  */
.title-as-text h2 {
  font-size: 1em;
  font-weight: 400;
  border-bottom: none;
  margin: 0 0 0.3em 0;
  padding-bottom: 0;
}

/*  Multi-column layouts  */
.two-col {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5em;
  align-items: start;
}

.two-col-60-40 {
  display: grid;
  grid-template-columns: 3fr 2fr;
  gap: 1.5em;
  align-items: start;
}

.two-col-65-35 {
  display: grid;
  grid-template-columns: 65fr 35fr;
  gap: 1.5em;
  align-items: start;
}

.three-col {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 1.2em;
  align-items: start;
}

.lit-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: auto auto;
  gap: 0.6em 1.0em;
  align-items: start;
}

.lit-grid .lit-bottom {
  grid-column: 1 / 4;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.0em;
  max-width: 66%;
  margin: 0 auto;
}

.split-panel {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2em;
  align-items: center;
}

/*  Color utility classes  */
.blue    { color: var(--blue); }
.orange  { color: var(--orange); }
.red     { color: var(--red); }
.green   { color: var(--green); }
.purple  { color: var(--purple); }
.gray    { color: var(--gray); }
.dimmed  { opacity: 0.35; }

/*  Unified Box System 
   Base .box class with left-border accent pattern.
   Variants: .theorem, .definition, .assumption, .remark, .equation
*/
.box {
  border-left: 4px solid var(--gray);
  border-radius: 0 4px 4px 0;
  padding: 0.6em 1em;
  margin: 0.6em 0;
  font-size: 0.92em;
}

.box .box-title {
  font-weight: 700;
  margin-bottom: 0.3em;
}

/* Theorem / Result box */
.box.theorem {
  border-left-color: var(--red);
  background: #fbeef0;
}

/* Definition box */
.box.definition {
  border-left-color: var(--purple);
  background: #f3edf5;
}

/* Assumption box */
.box.assumption {
  border-left-color: var(--orange);
  background: #fdf3e6;
}

/* Remark box */
.box.remark {
  border-left-color: var(--green);
  background: #eef6ee;
}

/* Equation highlight box (full border, centered) */
.box.equation {
  border: 2px solid var(--blue);
  border-radius: 6px;
  padding: 0.5em 0.8em;
  margin: 0.5em auto;
  text-align: center;
  background: #fafafa;
  display: inline-block;
}

/*  Legacy boxed equations (keep for compatibility)  */
.boxed-eq {
  border: 2.5px solid var(--darktext);
  border-radius: 6px;
  padding: 0.5em 0.8em;
  margin: 0.7em auto;
  display: inline-block;
  background: #fafafa;
}

.boxed-eq.blue-border  { border-color: var(--blue); }
.boxed-eq.red-border   { border-color: var(--red); }

/*  Legacy remark-box (still used in some slides)  */
.remark-box {
  background: var(--lightgray);
  border-left: 4px solid var(--gray);
  padding: 0.5em 0.8em;
  margin: 0.5em 0;
  font-size: 0.88em;
}

.remark-box.kappa-box {
  border-left-color: var(--blue);
  background: #eef4fb;
}

/*  Shield / Amplify domain-specific panels  */
.shield-panel {
  border: 2px solid var(--blue);
  border-radius: 8px;
  padding: 0.6em;
  background: #f0f6fc;
}

.amplify-panel {
  border: 2px solid var(--orange);
  border-radius: 8px;
  padding: 0.6em;
  background: #fdf3e6;
}

/*  Tables  */
.reveal table {
  border-collapse: collapse;
  margin: 0.5em auto;
  font-size: 0.85em;
  max-width: 100%;
}

.reveal table th {
  background: var(--lightgray);
  font-weight: 700;
  padding: 0.35em 0.7em;
  border-bottom: 2px solid #999;
  text-align: left;
}

.reveal table td {
  padding: 0.3em 0.7em;
  border-bottom: 1px solid #ddd;
  vertical-align: top;
}

.reveal table tr:last-child td {
  border-bottom: 2px solid #999;
}

/*  Spacing normalization  */
.reveal p {
  margin: 0.4em 0;
}

.reveal ul, .reveal ol {
  margin: 0.3em 0;
}

.reveal li {
  margin-bottom: 0.2em;
}

.katex-display {
  margin: 0.5em 0 !important;
}

.reveal section img {
  margin: 0.3em auto;
}

/*  Taglines  */
.tagline {
  font-style: italic;
  font-size: 1.05em;
  text-align: center;
  margin-top: 1em;
  color: #444;
}

.closing-sentence {
  font-style: italic;
  font-size: 1.1em;
  text-align: center;
  margin-top: 1em;
  color: var(--darktext);
}

/*  Literature slide  */
.lit-column h4 {
  font-size: 1em;
  margin-bottom: 0.3em;
  color: var(--darktext);
}

.lit-column .contrast {
  font-style: italic;
  font-size: 0.82em;
  color: var(--gray);
  margin-bottom: 0.4em;
}

.lit-column ul {
  font-size: 0.8em;
  padding-left: 1em;
  list-style: none;
}

.lit-column ul li {
  margin-bottom: 0.2em;
}

/*  Question / prominent text  */
.research-question {
  font-style: italic;
  font-size: 1.3em;
  text-align: center;
  margin: 1.5em 0 0.8em 0;
  color: var(--darktext);
}

/*  Placeholder boxes (for data-dependent slides)  */
.placeholder-box {
  border: 2px dashed var(--gray);
  border-radius: 8px;
  padding: 2em 1em;
  text-align: center;
  color: var(--gray);
  font-style: italic;
  background: #fafafa;
  min-height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/*  Diagram containers  */
.diagram-container {
  text-align: center;
  margin: 0.5em 0;
}

.diagram-container img {
  max-width: 100%;
  height: auto;
}

.diagram-caption {
  font-size: 0.78em;
  color: var(--gray);
  text-align: center;
  margin-top: 0.3em;
}

/*  Diagram overlay container (stacked-shifted)  */
.diagram-overlay-container {
  position: relative;
  width: 100%;
  min-height: 300px;
}

.diagram-overlay-container img {
  position: absolute;
  top: 0;
  max-width: 90%;
  height: auto;
}

/*  Fragment tweaks  */
.reveal .fragment.semi-fade-out.visible {
  opacity: 0.3;
}

/* Cross-out fragment: dims and adds red strikethrough */
.reveal .fragment.cross-out.visible {
  opacity: 0.3;
  text-decoration: line-through;
  text-decoration-color: var(--red);
}

/* Fade-up entrance animation */
.reveal .fragment.fade-up {
  transform: translateY(20px);
  opacity: 0;
  transition: transform 0.4s ease, opacity 0.4s ease;
}

.reveal .fragment.fade-up.visible {
  transform: translateY(0);
  opacity: 1;
}

/* Highlight-flash: brief colored pulse to draw attention */
@keyframes highlight-pulse {
  0%   { background: transparent; }
  30%  { background: #fdf3e6; }
  100% { background: transparent; }
}

.reveal .fragment.highlight-flash.visible {
  animation: highlight-pulse 1.2s ease-out;
  border-radius: 4px;
}

/* r-stack: ensure proper layering */
.reveal .r-stack > * {
  margin: 0;
}

/*  Comparison table (hook slide)  */
.hook-table td:first-child {
  font-weight: 700;
  color: var(--gray);
  white-space: nowrap;
}

/*  Equation blocks with colored terms  */
.eq-block {
  background: var(--lightgray);
  border-radius: 6px;
  padding: 0.5em 0.8em;
  margin: 0.4em 0;
}

/*  Legacy theorem box (kept for compat, prefer .box.theorem)  */
.theorem-box {
  border: 2px solid var(--darktext);
  border-radius: 6px;
  padding: 0.5em 1em;
  margin: 0.5em 0;
  background: #fafafa;
}

.theorem-box .theorem-title {
  font-weight: 700;
  margin-bottom: 0.3em;
}

/*  Small supplementary text  */
.small-note {
  font-size: 0.75em;
  color: var(--gray);
}

/*  Title slide  */
.title-slide > h2 {
  display: none;  /* hide org heading text */
}

.title-slide h1 {
  font-size: 2.4em;
  margin-bottom: 0.1em;
}

.title-slide .subtitle {
  font-size: 1.1em;
  color: var(--gray);
  margin-bottom: 1.5em;
}

.title-slide .author {
  font-size: 1.0em;
}

.title-slide .date {
  font-size: 0.85em;
  color: var(--gray);
}

/*  Fix reveal.js white theme defaults  */
.reveal section img {
  border: none;
  box-shadow: none;
  background: none;
}

/*  KaTeX overrides for presentation  */
.katex { font-size: 1.05em !important; }

/*  Print / PDF overrides  */
@media print {
  .reveal .slides section {
    page-break-inside: avoid;
  }
  .placeholder-box {
    border-style: solid;
  }
}

</style>
<script type="text/javascript" src=""></script>
<link rel="stylesheet" href="./katex/katex.min.css"><script defer src="./katex/katex.min.js"></script><script defer src="./katex/contrib/auto-render.min.js" onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true},{left: '$', right: '$', display: false},{left: '\\(', right: '\\)', display: false},{left: '\\[', right: '\\]', display: true}], throwOnError: false});"></script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section>
<section id="slide-org3393bc7" class="center-slide title-slide">
<h2 id="org3393bc7">Title Slide</h2>
<h1>Capital Reallocation and<br>Bank Lending Networks</h1>
<p class="author">Robin Lenoir</p>
<p class="date">NYU &middot; February 2026</p>

<aside class="notes">
<ul>
<li>motivation: banking integration, talk in the ECB of it, etc.</li>
<li>but what is it?
<ul>
<li>we understand its moving savings from helskinki to lisboa</li>
<li>but how does this work exactly? one big bank? interbanks?</li>

</ul></li>

</ul>

</aside>
</section>
</section>
<section>
<section id="slide-fifty-ways" class="notitle" data-transition="none">
<h2 id="fifty-ways">50 ways to integrate banking</h2>
<!-- Top zone: Comparison table with row-wise fragments -->
<table class="hook-table" style="width:100%; font-size:0.9em; margin-bottom:0.5em;">
<thead>
<tr>
  <th style="width:22%"></th>
  <th style="width:26%">Canada</th>
  <th style="width:26%">Germany</th>
  <th style="width:26%">US</th>
</tr>
</thead>
<tbody>

<tr class="fragment" data-fragment-index="1">
  <td>Number of banks</td>
  <td> 88 banks</td>
  <td> 1,360 credit institutions</td>
  <td> 4,600 banks</td>
</tr>

<tr class="fragment" data-fragment-index="2">
  <td>Local banking footprint (asset share)</td>
  <td> 6% outside Big-6</td>
  <td> 25.6% at savings + cooperative banks</td>
  <td> 11.3% at community banks</td>
</tr>

<tr class="fragment" data-fragment-index="3">
  <td>
    Interbank lending<br>
    <span style="font-size:0.75em; opacity:0.85;">(loans to banks / total assets)</span>
  </td>
  <td>
    Low
  </td>
  <td>
     20.6%
  </td>
  <td>
     1.8%
  </td>
</tr>

</tbody>
</table>
<p style="text-align:right; margin-top:0.1em;"><a href="#/slide-sources-appendix" style="color:var(--blue); font-size:0.7em; text-decoration:none;">Sources</a></p>

<!-- Bottom zone: text left, diagram right -->
<div class="two-col fragment" data-fragment-index="4" style="margin-top:0.3em;">
  <div>
    <p class="fragment" data-fragment-index="5" style="margin-bottom:0.2em;"><strong>System adjusts by:</strong></p>
    <ul style="font-size:0.92em;">
      <li class="fragment" data-fragment-index="7">Intra-bank reallocation (portfolio shifts)</li>
      <li class="fragment" data-fragment-index="8">Interbank reallocation (leverage / balance sheet)</li>
      <li class="fragment" data-fragment-index="9">A mix &mdash; determined by the network</li>
    </ul>
  </div>
  <div>
    <svg viewBox="0 0 480 310" style="max-height:360px; width:100%;">
      <defs>
        <marker id="ah-blue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto">
          <path d="M0,1 L9,5 L0,9 Z" fill="#2166ac"/>
        </marker>
        <marker id="ah-orange" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto">
          <path d="M0,1 L9,5 L0,9 Z" fill="#e08214"/>
        </marker>
      </defs>
      <!-- BASE: network (always visible) -->
      <g>
        <circle cx="85" cy="75" r="30" fill="#f5f5f5" stroke="#666" stroke-width="1.2"/>
        <text x="85" y="83" text-anchor="middle" font-size="20" font-family="serif" font-style="italic" fill="#333">A</text>
        <circle cx="395" cy="75" r="30" fill="#f5f5f5" stroke="#666" stroke-width="1.2"/>
        <text x="395" y="83" text-anchor="middle" font-size="20" font-family="serif" font-style="italic" fill="#333">B</text>
        <circle cx="240" cy="260" r="30" fill="#f5f5f5" stroke="#666" stroke-width="1.2"/>
        <text x="240" y="268" text-anchor="middle" font-size="20" font-family="serif" font-style="italic" fill="#333">C</text>
        <rect x="195" y="5" width="90" height="26" rx="4" fill="#fff" stroke="#666" stroke-width="1"/>
        <text x="240" y="23" text-anchor="middle" font-size="12" font-family="sans-serif" fill="#333">Bank 1</text>
        <rect x="355" y="155" width="90" height="26" rx="4" fill="#fff" stroke="#666" stroke-width="1"/>
        <text x="400" y="173" text-anchor="middle" font-size="12" font-family="sans-serif" fill="#333">Bank 2</text>
        <rect x="35" y="155" width="90" height="26" rx="4" fill="#fff" stroke="#666" stroke-width="1"/>
        <text x="80" y="173" text-anchor="middle" font-size="12" font-family="sans-serif" fill="#333">Bank 3</text>
        <line x1="195" y1="26" x2="112" y2="53" stroke="#b3b3b3" stroke-width="2"/>
        <line x1="285" y1="26" x2="368" y2="53" stroke="#b3b3b3" stroke-width="2"/>
        <line x1="400" y1="155" x2="400" y2="105" stroke="#b3b3b3" stroke-width="2"/>
        <line x1="395" y1="181" x2="265" y2="238" stroke="#b3b3b3" stroke-width="2"/>
        <line x1="80" y1="155" x2="83" y2="105" stroke="#b3b3b3" stroke-width="2"/>
        <line x1="85" y1="181" x2="215" y2="238" stroke="#b3b3b3" stroke-width="2"/>
      </g>
      <!-- SHOCK: red starburst near A -->
      <g class="fragment" data-fragment-index="6">
        <polygon points="42,22 47,31 58,27 54,38 64,43 54,48 58,59 47,55 42,64 37,55 26,59 30,48 20,43 30,38 26,27 37,31"
                 fill="#f0d1d5" stroke="#b2182b" stroke-width="1.3"/>
        <text x="42" y="46" text-anchor="middle" font-size="9" font-family="sans-serif" font-weight="bold" fill="#b2182b">shock</text>
      </g>
      <!-- BLUE: internal margin  rebalance along existing edges -->
      <g class="fragment" data-fragment-index="7">
        <!-- Bank 1 rebalances: more capital to A, pulls from B -->
        <line x1="195" y1="26" x2="112" y2="53" stroke="#2166ac" stroke-width="3" marker-end="url(#ah-blue)"/>
        <line x1="368" y1="53" x2="285" y2="26" stroke="#2166ac" stroke-width="3" marker-end="url(#ah-blue)"/>
        <!-- Bank 3 rebalances: more capital to A, pulls from C -->
        <line x1="80" y1="155" x2="83" y2="105" stroke="#2166ac" stroke-width="3" marker-end="url(#ah-blue)"/>
        <line x1="215" y1="238" x2="85" y2="181" stroke="#2166ac" stroke-width="3" marker-end="url(#ah-blue)"/>
        <text x="165" y="50" font-size="11" font-family="sans-serif" fill="#2166ac" font-style="italic">rebalance</text>
      </g>
      <!-- ORANGE: external margin  interbank flows between banks -->
      <g class="fragment" data-fragment-index="8">
        <!-- Bank 2 lends to Bank 1 on interbank market -->
        <path d="M370,155 C350,105 310,60 272,31" fill="none" stroke="#e08214" stroke-width="2.5" stroke-dasharray="5 3" marker-end="url(#ah-orange)"/>
        <!-- Bank 2 lends to Bank 3 on interbank market -->
        <path d="M355,172 C300,205 185,205 125,172" fill="none" stroke="#e08214" stroke-width="2.5" stroke-dasharray="5 3" marker-end="url(#ah-orange)"/>
        <text x="240" y="220" text-anchor="middle" font-size="11" font-family="sans-serif" fill="#e08214" font-style="italic">interbank</text>
      </g>
    </svg>
  </div>
</div>

<aside class="notes">
<p>
These three banking systems are all highly integrated  capital flows freely across regions, interest rates are equalized. But they look very different:
</p>
<ul>
<li>Canada have big national giants while Germany is a system of small local banks organized into bigger lander level banks that redistribute funds</li>
<li>US sits in the middle</li>

</ul>


<p>
Does this structural difference matter? When the system is hit by a shock, how does it adjust?
</p>

<p>
Three channels. Banks can shift their portfolios  redirect capital from other locations (the internal margin). They can expand their balance sheets through the interbank market (the external margin). Or a mix of both  and the co-lending network determines what mix is feasible.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orgb770a0a" class="notitle" data-transition="none">
<h2 id="orgb770a0a">Research question</h2>
<p style="font-size:1.1em; margin-top:0.8em;">Multi-market banks adjust through two margins:</p>
<ul style="font-size:1.05em; margin-top:0.2em;">
  <li><span class="blue"><strong>Internal</strong> &mdash; portfolio reallocation</span> (information frictions)</li>
  <li><span class="orange"><strong>External</strong> &mdash; leverage / interbank</span> (financial frictions)</li>
</ul>

<p class="fragment" data-fragment-index="1" style="font-size:1.15em; margin-top:0.6em;">$\Longrightarrow$ <strong>Goal:</strong> a tractable model where spatial heterogeneity in lending opportunities is addressed by both, and their interaction.</p>

<div class="fragment" data-fragment-index="2" style="margin-top:0.8em;">
  <p style="margin-bottom:0.4em;"><strong>Result preview:</strong></p>
  <ul>
    <li class="fragment" data-fragment-index="3">Different integration structures deliver the same efficiency in normal times, but respond very differently to shocks</li>
    <li class="fragment" data-fragment-index="4">The co-lending network &mdash; which banks lend where &mdash; determines the response to local shocks</li>
    <li class="fragment" data-fragment-index="5">Fragility is directional: the same shock can be absorbed or amplified, depending on where it hits the network and which friction dominates</li>
  </ul>
</div>

<aside class="notes">
<p>
The goal statement ties directly to slide 2: two margins, one network. The question refines the motivation  not whether integration helps, but which form of integration is fragile.
</p>

<p>
Three results, each narrowing. First: many architectures are equally efficient in steady state  the network doesn&rsquo;t matter until a shock hits. Second: when it does, the sign of spillover depends on the shock pattern and which friction dominates  information friction shields, financial friction amplifies. Third: the optimal network architecture depends on which friction dominates  diversification helps under financial friction, specialization helps under information friction. There is no universal &ldquo;safe&rdquo; structure.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org51c8e95" data-transition="none">
<h2 id="org51c8e95">Related literature</h2>
<div class="lit-grid">
  <!-- Top row: 3 columns -->
  <div class="lit-column fragment" data-fragment-index="1">
    <h4>Financial Integration</h4>
    <ul>
      <li><strong>Morgan, Rime, Strahan (2004)</strong></li>
      <li>D'Amico &amp; Alekseev (2025)</li>
      <li>Bau &amp; Matray (2023)</li>
      <li>Quincy &amp; Xu (2025)</li>
    </ul>
    <p class="contrast" style="margin-top:0.4em;"><em>Contribution: integration as a structured object &mdash; which structures are fragile?</em></p>
  </div>
  <div class="lit-column fragment" data-fragment-index="2">
    <h4>Financial Networks</h4>
    <ul>
      <li>Allen &amp; Gale (2000)</li>
      <li>Acemoglu, Ozdaglar, Tahbaz-Salehi (2015)</li>
      <li>Elliott, Golub, Jackson (2014)</li>
      <li><strong>Greenwood, Landier, Thesmar (2014)</strong></li>
    </ul>
    <p class="contrast" style="margin-top:0.4em;"><em>Contribution: contagion via lending reallocation, not defaults or fire sales</em></p>
  </div>
  <div class="lit-column fragment" data-fragment-index="3">
    <h4>Internal Capital Markets</h4>
    <ul>
      <li><strong>Cort&eacute;s &amp; Strahan (2017)</strong></li>
      <li><strong>Gilje, Loutskina, Strahan (2016)</strong></li>
      <li>Berrospide, Black, Keeton (2016)</li>
      <li>Kundu, Park, Vats (2021)</li>
    </ul>
    <p class="contrast" style="margin-top:0.4em;"><em>Contribution: theory language explaining empirics + allowing aggregation</em></p>
  </div>
  <!-- Bottom row: 2 columns centered under the gaps -->
  <div class="lit-bottom">
    <div class="lit-column fragment" data-fragment-index="4">
      <h4>Spatial Banking</h4>
      <ul>
        <li><strong>Maingi (2024)</strong></li>
        <li>Oberfield, Rossi-Hansberg et al. (2024)</li>
        <li>Aguirregabiria, Clark, Wang (2025)</li>
      </ul>
      <p class="contrast" style="margin-top:0.4em;"><em>Contribution: focus on lending and not deposit &mdash; interbank market</em></p>
    </div>
    <div class="lit-column fragment" data-fragment-index="5">
      <h4>Distance &amp; Specialization</h4>
      <ul>
        <li><strong>Casado &amp; Martinez-Miera (2024)</strong></li>
        <li>Adams, Brevoort, Driscoll (2023)</li>
        <li>Granja, Leuz, Rajan (2022)</li>
        <li>Blickle, Parlatore, Saunders (2023)</li>
      </ul>
      <p class="contrast" style="margin-top:0.4em;"><em>Contribution: aggregate implications of specialization &mdash; geographic concentration shapes systemic risk</em></p>
    </div>
  </div>
</div>

<aside class="notes">
<p>
Five strands, three on top, two on the bottom.
</p>

<p>
<b>Column 1  Financial Integration</b>: studies integration as a scalar  does more integration help? Always long run outcome. Answer is always yes. I model integration as a structured object and ask which structures are fragile.
</p>

<ul>
<li><b>Morgan, Rime, Strahan (2004)</b>: Foundational. Integration reduces volatility within states (smoothing supply shocks) but increases synchronization across states (transmitting demand shocks). Uses interstate banking deregulation as identification. My model explains this dual effect: supply shocks work through  (integration helps), demand shocks work through  (integration may amplify).</li>
<li><b>D&rsquo;Amico &amp; Alekseev (2025)</b>: Historical capital integration (19531983). &ldquo;Nominal rate channel&rdquo;: high rates  deposit outflows  wholesale funding  rate convergence. Secular friction decline of 4.31%/year. Shows - interaction: normal times  dominates (depositors sticky), high-rate times  loosens but  binds for small banks.</li>
<li><b>Bau &amp; Matray (2023)</b>: Studies capital misallocation across Indian districts after financial liberalization. Shows integration reallocates capital toward high-productivity areas but gains depend on the structure of integration, not just its level. Motivates the alignment condition in my model.</li>
<li><b>Quincy &amp; Xu (2025)</b>: Constructs &ldquo;Deposit Market Access&rdquo; (DMA)  directly analogous to W. Border discontinuity (adjacent counties, different 1930s branching laws) shows branching counties have 1520% higher manufacturing TFP. Critical: gains come through reallocation, not capital deepening. DMA IS W.</li>

</ul>

<p>
<b>Column 2  Financial Networks</b>: models contagion through interbank exposures and default cascades. My contagion channel is lending reallocation  no defaults, no fire sales.
</p>

<ul>
<li><b>Allen &amp; Gale (2000)</b>: Classic model of financial contagion through interbank deposits. Complete networks are more resilient than incomplete ones because losses are spread more thinly. My model differs: contagion operates through lending reallocation, not interbank claims. Network structure matters for different reasons  it shapes where capital flows, not how defaults cascade.</li>
<li><b>Acemoglu, Ozdaglar, Tahbaz-Salehi (2015)</b>: Shows network topology has non-monotonic effects on systemic risk. Dense connections provide insurance for small shocks but become channels for contagion with large shocks (phase transition). I share the theme that network structure determines stability, but through a different mechanism  co-lending overlap G rather than counterparty exposure.</li>
<li><b>Elliott, Golub, Jackson (2014)</b>: Models cross-holdings of assets across financial institutions. Shows diversification can create systemic fragility by increasing interconnection. Related to my G matrix: their cross-holdings create common exposure; my co-lending overlap creates correlated geographic exposure.</li>
<li><b>Greenwood, Landier, Thesmar (2014)</b>: &ldquo;Vulnerable Banks.&rdquo; Models fire-sale contagion through portfolio overlap. Banks holding similar assets transmit shocks through price impact. Closest antecedent to my G matrix, but their overlap is in asset space; mine is in geographic space, and transmission works through lending reallocation rather than mark-to-market losses.</li>

</ul>

<p>
<b>Column 3  Internal Capital Markets</b>: documents empirically how multi-market banks reallocate capital through internal capital markets  the demand vs supply shock taxonomy. I provide the unified theory: the sign and geography of transmission depend on the network and friction environment.
</p>

<ul>
<li><b>Corts &amp; Strahan (2017)</b>: Natural disasters as demand shocks. Small banks (&lt;$2B) reduce lending in connected markets by 4250 cents per dollar of extra disaster-area lending. Large banks shield connected markets entirely. Core markets (high W) protected, non-core cut first. Demand shock  substitution (opposite-direction transmission). Maps to my model: small/large asymmetry reflects binding , core/non-core reflects /W.</li>
<li><b>Gilje, Loutskina, Strahan (2016)</b>: Shale discoveries as exogenous liquidity shocks. Banks with branches in boom counties increase lending elsewhere: elasticity 2.27% for retained mortgages, zero for securitized. Effect only through local branch networks. Supply shock  spillover (same-direction transmission). Branch presence = high W = low effective friction.</li>
<li><b>Berrospide, Black, Keeton (2016)</b>: Spillover dominates substitution for negative supply shocks (mortgage losses). Peripheral markets (low W, no branch) face 9 larger spillover than core markets with branches. Validates that effective friction /W determines who gets cut first. Negative supply shock  spillover channel.</li>
<li><b>Kundu, Park, Vats (2021)</b>: GIV methodology applied to banking networks. Geographic concentration of deposits creates granularity  idiosyncratic county shocks don&rsquo;t diversify away. Deposit elasticity of GDP = 1.49, R = 5.80%. Validates that network structure (concentrated W) determines whether local shocks become aggregate.</li>

</ul>

<p>
<b>Column 4  Spatial Banking</b>: structural spatial models of banking. These papers embed banks in geographic space and estimate how branch networks shape capital flows. My contribution is the G matrix  co-lending overlap gives location-to-location transmission in spatial equilibrium.
</p>

<ul>
<li><b>Maingi (2024)</b>: First paper integrating banks&rsquo; spatial lending networks into quantitative spatial GE (Eaton-Kortum + banking). During 2023 regional bank panic, positive deposit reallocation offset ~89% of potential output damage. Calibrates distance decay ( = 1.14). Provides macro validation that cross-sectional allocation matters; my model provides the micro network mechanism explaining why.</li>
<li><b>Oberfield, Rossi-Hansberg et al. (2024)</b>: &ldquo;Banks in Space&rdquo;  structural model of how banks choose branch networks endogenously. Models the location decision, not the contagion consequence. Relevant as a foundation for understanding how W is formed, complementary to my model which takes W as given and studies its stability implications.</li>
<li><b>Aguirregabiria, Clark, Wang (2025)</b>: Structurally estimates -side frictions in a multi-market framework. Novel &ldquo;Imbalance Index&rdquo; (II = 0.210.31 over 19982010). Counterfactuals: removing branch networks cuts lending 28%, removing local synergies cuts deposits 62%. Provides structural template for estimating both frictions from quantity data. Closest structural antecedent.</li>

</ul>

<p>
<b>Column 5  Distance &amp; Specialization</b>: the empirical evidence that information frictions are persistent and drive where banks lend. Within-bank lending distances are flat over 20 years; banks expand toward specialized markets. This grounds the KL divergence as the right functional form for portfolio reallocation costs.
</p>

<ul>
<li><b>Casado &amp; Martinez-Miera (2024)</b>: When banks reallocate (here: MP easing), WHERE does it flow? To specialized markets. One SD increase in specialization  54 bps increase in lending growth. Effect 35% stronger in information-intensive segments (jumbos). MP easing relaxes   amplifies returns to specialization  banks concentrate in high-W markets. Low rates endogenously reduce geographic diversification.</li>
<li><b>Adams, Brevoort, Driscoll (2023)</b>: Aggregate lending distances increased 170% (19962017) but within-bank distances remained flat. Entire increase is a composition effect from ~18 specialized lenders gaining share. Technology did NOT &ldquo;harden&rdquo; soft information  W is structurally stable. Justifies treating the natural portfolio as a structural parameter.</li>
<li><b>Granja, Leuz, Rajan (2022)</b>: Distant loans are 23 riskier but not priced higher. Distance is procyclical (175350 miles in 200407). Banks with diversified branch networks show no procyclical stretching  internal capital markets act as an escape valve. When  loosens (financial slack), banks are tempted to pay  costs  two frictions interact.</li>
<li><b>Blickle, Parlatore, Saunders (2023)</b>: Industry specialization mirror of geographic specialization. Large banks specialize by NAICS sector (+8.2% over benchmark); specialized banks have lower charge-offs despite less diversification. Information-based: lower defaults, more SME lending. Provides performance-testing methodology applicable to geographic work.</li>

</ul>

</aside>
</section>
</section>
<section>
<section id="slide-org2886d90" data-transition="none">
<h2 id="org2886d90">The model</h2>
<p style="margin-bottom:0.4em;"><strong>Environment:</strong>&ensp; $L$ locations, $N$ banks. Discrete time, no risk.</p>

<div class="fragment eq-block" data-fragment-index="1" style="margin-bottom:0.3em;">
  <strong>Loan demand:</strong>&ensp; Linear loan demand at each location: $K_x^D = A_x - \mu_x$
</div>

<div class="fragment eq-block" data-fragment-index="2" style="margin-bottom:0.3em;">
  <strong>Bank problem (period $t$):</strong>&ensp; Myopic bank $h$ with deposits $B_h$ and local expertise $\bar{W}_h^{\,t}$. Choose <span class="blue"><strong>where</strong></span> to lend ($\omega$) and <span class="orange"><strong>how much</strong></span> to lever ($\theta$):
  $$\max_{\omega_h, \theta_h}\; r + \theta_h \left[\sum_x \omega_{hx}\tilde{\mu}_x - \color{#2166ac}{\gamma \sum_x \omega_{hx} \log \frac{\omega_{hx}}{\bar{W}_{hx}^{\,t}}}\right] - \color{#e08214}{\frac{\lambda}{2}(\theta_h - 1)^2}$$
</div>

<div class="fragment box definition" data-fragment-index="5" style="font-size:0.88em;">
  <p class="box-title">Definition (Dynamic Equilibrium)</p>
  <p>Given $\bar{W}^0$ and parameters $(A, B, \gamma, \lambda)$, a <em>dynamic equilibrium</em> is a sequence $\{\omega^t, \theta^t, \mu^t, r^t\}$ such that:</p>
  <ol style="margin-top:0.2em; margin-bottom:0;">
    <li>Banks optimize (problem above)</li>
    <li>$\sum_h B_h \theta_h \omega_{hx} = A_x - \mu_x \;\;\forall x$ &ensp; (capital clears)</li>
    <li>$\sum_h B_h(\theta_h - 1) = 0$ &ensp; (bond clears)</li>
    <li>$\bar{W}^{t+1} = \omega^t$ &ensp; (state transition)</li>
  </ol>
</div>

<div class="r-stack" style="min-height:110px; margin-top:auto;">
  <div class="fragment fade-in-then-out box remark" data-fragment-index="1">
    <strong>Remark (demand): </strong> $\mu_x$ is the local rate for loans. $A_x$ captures how strong demand is. Linearity is for tractability, working on Cobb-Douglas production function for robustness.   
  </div>
  <div class="fragment fade-in-then-out box remark" data-fragment-index="2">
    <strong>Remark (KL divergence): </strong> Internal adjustment frictions are captured by the <span class="blue">Kullback-Leibler divergence</span> &mdash; an entropy-based cost of deviating from your natural lending pattern. Standard in the rational inattention literature (Sims 2003; Matejka &amp; McKay 2015).
  </div>
  <div class="fragment fade-in-then-out box remark" data-fragment-index="3">
    <strong>Remark (empirics): </strong> Within-bank lending distances flat over 20 years (Adams et al. 2023); banks expand toward markets they know (Casado &amp; Martinez-Miera 2024); peripheral markets cut first in crises (Berrospide et al. 2016).
  </div>
  <div class="fragment fade-in-then-out box remark" data-fragment-index="4">
    <strong>Remark (separability): </strong> <span class="blue">Information cost</span> and <span class="orange">financial friction</span> are symmetric in structure. The key assumption is separability &mdash; <em>where</em> to lend and <em>how much</em> to lever are chosen independently.
  </div>
  <div class="fragment fade-in-then-out box remark" data-fragment-index="5">
    <strong>Remark (dynamics): </strong> $\bar{W}^{t+1} = \omega^t$ &mdash; <em>"you become what you do."</em> Expertise tomorrow equals portfolio today.
  </div>
</div>

<aside class="notes">
<p>
The full model on one slide. Walk through each block.
</p>

<p>
Setup: L locations, N banks with heterogeneous expertise  this is the co-lending network.
</p>

<p>
Loan demand is linear  this buys tractability and closed-form solutions.
</p>

<p>
Bank problem: the key slide. Written in the leverage formulation  theta multiplies the return net of KL cost. The KL divergence (Kullback-Leibler) in blue is an entropy-based friction on portfolio reallocation  standard in rational inattention (Sims, Matejka-McKay). Economically: it&rsquo;s costly to develop loans where you have few branches because of soft information and relationship lending. The quadratic in orange governs leverage. The two are separable: KL determines WHERE, quadratic determines HOW MUCH.
</p>

<p>
Clearing: capital market clears at each location, bond market clears in aggregate.
</p>

<p>
State transition: your expertise tomorrow equals your portfolio today. You become what you do.
</p>

<p>
Empirical grounding for KL divergence is in the remarks  cycle through as questions arise.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org6df4fd0" class="notitle" data-transition="none">
<h2 id="org6df4fd0">Solving the bank problem</h2>
<div class="eq-block" style="font-size:0.85em; margin-bottom:0.4em;">
  <strong>Bank problem (period $t$):</strong>&ensp; Myopic bank $h$ with deposits $B_h$ and local expertise $\bar{W}_h^{\,t}$. Choose <span class="blue"><strong>where</strong></span> to lend ($\omega$) and <span class="orange"><strong>how much</strong></span> to lever ($\theta$):
  $$\max_{\omega_h, \theta_h}\; r + \theta_h \left[\sum_x \omega_{hx}\tilde{\mu}_x - \color{#2166ac}{\gamma \sum_x \omega_{hx} \log \frac{\omega_{hx}}{\bar{W}_{hx}^{\,t}}}\right] - \color{#e08214}{\frac{\lambda}{2}(\theta_h - 1)^2}$$
</div>

<div class="two-col">
  <div class="fragment" data-fragment-index="1">
    <h3>Portfolio <span class="blue">(internal margin)</span></h3>
    $$\omega_{hx}^* = \frac{\bar{W}_{hx}\, \Phi_x}{Z_h}$$
    <ul style="font-size:0.9em;">
      <li>$\Phi_x = \exp(\tilde{\mu}_x / \gamma)$: yield-chasing factor</li>
      <li>$Z_h = \sum_x \bar{W}_{hx}\, \Phi_x$: portfolio normalizer</li>
      <li>Portfolio value: $V_h = \gamma \log Z_h$</li>
    </ul>
  </div>
  <div class="fragment" data-fragment-index="2">
    <h3>Leverage <span class="orange">(external margin)</span></h3>
    $$\theta_h = 1 + V_h / \lambda$$
    <ul style="font-size:0.9em;">
      <li>$V_h$ links the two margins: same yield-chasing factors tilt portfolios and determine borrowing</li>
    </ul>
  </div>
</div>

<div class="fragment" data-fragment-index="3">
<table style="margin-top:0.5em; font-size:0.95em;">
<thead>
<tr><th>Notation</th><th>Formula</th><th>Model interpretation</th><th>Asset pricing equivalent</th></tr>
</thead>
<tbody>
<tr><td>$\Phi_x$</td><td>$\exp(\tilde{\mu}_x / \gamma)$</td><td>Yield-chasing factor</td><td>State price / Arrow-Debreu</td></tr>
<tr><td>$\bar{W}_h$</td><td>row-stochastic, given</td><td>Local expertise</td><td>Pricing kernel / SDF</td></tr>
<tr><td>$Z_h$</td><td>$\sum_x \bar{W}_{hx}\,\Phi_x$</td><td>Portfolio normalizer</td><td>Price of bank $h$'s portfolio</td></tr>
<tr><td>$V_h$</td><td>$\gamma \log Z_h$</td><td>Portfolio value</td><td>Expected excess return</td></tr>
</tbody>
</table>
</div>

<aside class="notes">
<p>
Re-read the maximization problem, pointing at the colors. The blue KL term yields the portfolio FOC on the left. The orange quadratic yields the leverage rule on the right.
</p>

<p>
Portfolio: FOC of KL gives exponential tilting  softmax. Expertise is the prior, returns are the signal, gamma controls how aggressively you chase yields.
</p>

<p>
Leverage: V<sub>h</sub> = gamma log Z<sub>h</sub> also drives leverage. The better your reallocation opportunities, the more you borrow on the interbank market.
</p>

<p>
And if this reminds you of asset pricing  it should. Walk through the correspondence table. Phi is state prices, W-bar is an SDF, Z<sub>h</sub> is a portfolio price. The single-bank equation is literally E[mR] = 1.
</p>

<p>
ALGEBRA: Portfolio FOC. Maximize over  subject to   = 1: L = <sub>x</sub> <sub>hx</sub> <sub>x</sub>   <sub>x</sub> <sub>hx</sub> log(<sub>hx</sub>/W<sub>hx</sub>) + (   1). FOC: <sub>x</sub>  (log(<sub>hx</sub>/W<sub>hx</sub>) + 1) +  = 0  <sub>hx</sub> = W<sub>hx</sub> exp(<sub>x</sub>/) / Z<sub>h</sub> where Z<sub>h</sub> = <sub>x</sub> W<sub>hx</sub> exp(<sub>x</sub>/). This is exponential tilting / softmax. Substituting back: V<sub>h</sub> = max value =  log Z<sub>h</sub>. Leverage FOC. Maximize <sub>h</sub>[V<sub>h</sub>]  (/2)(<sub>h</sub>  1): FOC gives V<sub>h</sub> = (<sub>h</sub>  1), so <sub>h</sub> = 1 + V<sub>h</sub>/. The two margins link through V<sub>h</sub>: same yield-chasing factors that tilt portfolios also drive borrowing.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org5c16dc6" class="notitle" data-transition="none">
<h2 id="org5c16dc6">Equilibrium in \(\Phi\)</h2>
<div class="fragment box definition" data-fragment-index="1">
  <p class="box-title">Equilibrium characterization &mdash; fixed point in $\Phi$</p>
  <div class="two-col" style="margin-top:0.3em; gap:1em;">
    <div>
      <p style="margin:0;"><em>Capital:</em></p>
      <p style="margin:0.2em 0;">$\underbrace{\sum_h \overbrace{B_h}^{\text{wealth}} \overbrace{\theta_h(\Phi)}^{\text{leverage}} \overbrace{\bar{W}_{hx}\Phi_x / Z_h}^{\text{portfolio weight}}}_{\text{capital supply at }x}
      = A_x \underbrace{- r - \gamma \log \Phi_x}_{\text{eff. loan rate }\mu_x}$</p>
    </div>
    <div>
      <p style="margin:0;"><em>Bond:</em></p>
      <p style="margin:0.2em 0;">$\underbrace{\sum_h B_h \frac{1}{\lambda} \overbrace{\gamma \log Z_h}^{V_h\text{ (portfolio value)}}}_{\text{aggregate excess demand for leverage}} = 0$</p>
    </div>
  </div>
</div>

<div class="fragment box remark" data-fragment-index="2">
<strong>Single bank:</strong>&ensp; $Z = 1 \;\Leftrightarrow\; \bar{W} \cdot \Phi = 1$ &ensp; &mdash; exact analogue of $E[m \cdot R] = 1$.
</div>
<div class="fragment" data-fragment-index="1">
<table style="margin-top:0.5em; font-size:0.95em;">
<thead>
<tr><th>Notation</th><th>Formula</th><th>Model interpretation</th><th>Asset pricing equivalent</th></tr>
</thead>
<tbody>
<tr><td>$\Phi_x$</td><td>$\exp(\tilde{\mu}_x / \gamma)$</td><td>Yield-chasing factor</td><td>State price / Arrow-Debreu</td></tr>
<tr><td>$\bar{W}_h$</td><td>row-stochastic, given</td><td>Local expertise</td><td>Pricing kernel / SDF</td></tr>
<tr><td>$Z_h$</td><td>$\sum_x \bar{W}_{hx}\,\Phi_x$</td><td>Portfolio normalizer</td><td>Price of bank $h$'s portfolio</td></tr>
<tr><td>$V_h$</td><td>$\gamma \log Z_h$</td><td>Portfolio value</td><td>Expected excess return</td></tr>
</tbody>
</table>
</div>

<aside class="notes">
<p>
Now I aggregate across banks to get the equilibrium. Everything is a fixed point in Phi  one object summarizes the entire system.
</p>

<p>
Capital clearing: the left side is capital supply at location x, decomposed into wealth times leverage times portfolio weight. The right side is the effective loan rate, which depends on Phi through the log term.
</p>

<p>
Bond clearing: aggregate excess demand for leverage must be zero. Each bank&rsquo;s V<sub>h</sub> drives its borrowing.
</p>

<p>
The bridge to the next slide: at a steady state, omega equals W-bar, which forces Phi = 1 and theta = 1. The only remaining condition is that the natural capital supply W-transpose-B matches the first-best demand. But the set of W-bars satisfying this is large  that&rsquo;s the multiplicity result.
</p>

<p>
ALGEBRA: Capital clearing at . Supply at x: K<sub>x</sub><sup>S</sup> = <sub>h</sub> B<sub>h</sub> <sub>h</sub>() <sub>hx</sub>() = <sub>h</sub> B<sub>h</sub> <sub>h</sub> W<sub>hx</sub> <sub>x</sub> / Z<sub>h</sub>. Demand: K<sub>x</sub><sup>D</sup> = A<sub>x</sub>  r   log <sub>x</sub>. Bond clearing: <sub>h</sub> B<sub>h</sub> (/) log Z<sub>h</sub> = 0. This is the full nonlinear system in . Uniqueness: apply IFT at  = 1. The Jacobian is a bordered matrix [M, 1; (K<sup>FB</sup>)<sup>T</sup>, 0]. Schur complement S = (K<sup>FB</sup>)<sup>T</sup> M 1 &lt; 0 (since M &gt; 0 entrywise and K<sup>FB</sup> &gt; 0), so the system is locally unique.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org6ba47c7" class="notitle" data-transition="none">
<h2 id="org6ba47c7">Steady-state theorem</h2>
<div class="fragment box theorem" data-fragment-index="1">
  <p class="box-title">Theorem (Steady States)</p>
  <p>The set of deterministic steady states is:</p>
  $$\mathcal{S} = \left\{\bar{W} \in \mathbb{R}_{++}^{N \times L} : \bar{W} \text{ row-stochastic}, \; W^\top B = K^{FB}\right\}$$
</div>

<div style="margin-top:0.5em;">
<ul>
  <li class="fragment" data-fragment-index="2"><strong>First best:</strong> A planner equalizes marginal returns: $K_x^{FB} = A_x - \mu^{FB}$, &ensp; where $\mu^{FB} = \frac{1}{L}\sum_x A_x - \frac{1}{L}\sum_h B_h$.</li>
  <li class="fragment" data-fragment-index="3"><strong>Efficiency &amp; alignment:</strong> every SS achieves first-best. $\Phi^* = \mathbf{1}$, $\theta^* = 1$, $\tilde{\mu} = 0$. Natural capital supply $W^\top B$ matches first-best demand $K^{FB}$ everywhere.</li>
  <li class="fragment" data-fragment-index="4"><strong>Multiplicity:</strong> $\mathcal{S}$ is convex, dimension $(N-1)(L-1)$ &mdash; infinitely many architectures for $N, L \geq 2$.</li>
</ul>
</div>

<div class="r-stack" style="margin-top:auto;">
  <div class="fragment fade-in-then-out" data-fragment-index="5" style="width:100%;">
    <div style="display:flex; justify-content:center; gap:1.2em;">
      <img src="./diagrams/ss_network_concentrated.svg" style="height:260px;">
      <img src="./diagrams/ss_network_chain.svg" style="height:260px;">
      <img src="./diagrams/ss_network_diversified.svg" style="height:260px;">
    </div>
  </div>
  <p class="fragment" data-fragment-index="6" style="font-size:1.5em; font-style:italic; text-align:center; color:var(--red);">Question: do all steady states react the same way after a shock?</p>
</div>

<aside class="notes">
<p>
Many different banking architectures  many different &ldquo;industrial organizations&rdquo;  all achieve the same efficient outcome. The network is irrelevant in steady state.
</p>

<p>
Proof intuition: At SS, omega = W-bar. Softmax with omega = W-bar forces Phi = 1. Then V = 0, so theta = 1. Capital clearing gives W-transpose B = K-FB. The reverse direction is the same steps backward.
</p>

<p>
Three examples with the same banks and same first-best: &ldquo;Concentrated&rdquo;  each bank mostly in one market; &ldquo;Chain&rdquo;  each bank spans two locations, forming a ring; &ldquo;Diversified&rdquo;  the big bank is national. All achieve the same efficient allocation. But they are not the same out of steady state.
</p>

<p>
So where does the network matter? When a shock hits and the system must readjust. The structure determines how  and how well  it returns to equilibrium.
</p>

<p>
PROOF: () Suppose W  S (row-stochastic, W<sup>T</sup> B = K<sup>FB</sup>). Set  = 1. Then Z<sub>h</sub> = <sub>x</sub> W<sub>hx</sub>  1 = 1 (row-stochastic), V<sub>h</sub> =  log 1 = 0, <sub>h</sub> = 1. Capital supply: <sub>h</sub> B<sub>h</sub>  1  W<sub>hx</sub>  1/1 = (W<sup>T</sup> B)<sub>x</sub> = K<sub>x</sub><sup>FB</sup>. Capital demand: A<sub>x</sub>  <sup>FB</sup>    0 = K<sub>x</sub><sup>FB</sup>. Clears. Bond: <sub>h</sub> B<sub>h</sub>  0 = 0. Clears. () Suppose (*, r*) is equilibrium with * = W. Softmax: <sub>hx</sub> = W<sub>hx</sub> <sub>x</sub>/Z<sub>h</sub>. For  = W: <sub>x</sub>/Z<sub>h</sub> = 1 for all h,x   must be constant. Normalize  = 1, then Z<sub>h</sub> = 1, V<sub>h</sub> = 0, <sub>h</sub> = 1. Capital clearing forces (W<sup>T</sup> B)<sub>x</sub> = A<sub>x</sub>  r = K<sub>x</sub><sup>FB</sup>. Multiplicity: S = {W row-stochastic : W<sup>T</sup> B = K<sup>FB</sup>}. This is a polytope in R<sup>NL</sup>. Row-stochastic: N(L1) free parameters. Column constraint W<sup>T</sup> B = K<sup>FB</sup>: L1 independent constraints (one redundant since  K<sup>FB</sup> =  B). Dimension = N(L1)  (L1) = (N1)(L1).
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org13e7a68" class="notitle" data-transition="none">
<h2 id="org13e7a68">Linearization &amp; the market matrix</h2>
<p style="margin-bottom:0.4em;">$\Longrightarrow$ Immediate reaction after a small localized misalignment: $A_x \to A_x + \varepsilon_x$</p>

<div class="fragment box" data-fragment-index="1" style="border-left-color:var(--red); background:#fbeef0;">
  <p class="box-title" style="color:var(--red);">Linearize equilibrium equations</p>
  <div class="two-col" style="margin-top:0.3em; gap:1em; font-size:0.88em; text-align:center;">
    <div>
      <em>Capital clearing:</em><br>
      $\sum_h B_h \theta_h(\Phi)\bar{W}_{hx}\Phi_x / Z_h
      = A_x - r - \gamma \log \Phi_x$
      <p class="fragment" data-fragment-index="2" style="margin:0.2em 0; color:var(--red); font-size:0.95em;">$\big\downarrow$ <small style="font-size:0.7em; color:#888;">1st order, $\Phi=\mathbf{1}$</small></p>
      <p class="fragment" data-fragment-index="2" style="margin:0; font-size:0.82em;">$\Big[\,{\color{#4A90D9}{\sum_h B_h \bar{W}_{hx}}} + \gamma\Big]\phi_x + {\color{#9B59B6}{\frac{\gamma\!-\!\lambda}{\lambda}}}{\color{#E8830C}{\sum_y \Big(\sum_h B_h\, \bar{W}_{hx}\bar{W}_{hy}\Big) \phi_y}} = \varepsilon_x - \delta r$</p>
      <p class="fragment" data-fragment-index="3" style="margin:0.2em 0; color:var(--red); font-size:0.95em;">$\big\downarrow$ <small style="font-size:0.7em; color:#888;">collect terms</small></p>
      <p class="fragment" data-fragment-index="3" style="margin:0;">$\big({\color{#4A90D9}{K_x^{FB}}}+\gamma\big)\phi_x + {\color{#9B59B6}{\kappa}} {\color{#E8830C}{\sum_y G_{xy}\,\phi_y}} = \varepsilon_x - \delta r$</p>
    </div>
    <div>
      <em>Bond clearing:</em><br>
      $\sum_h B_h \frac{\gamma}{\lambda} \log Z_h = 0$
      <p class="fragment" data-fragment-index="2" style="margin:0.2em 0; color:var(--red); font-size:0.95em;">$\big\downarrow$ <small style="font-size:0.7em; color:#888;">$\log Z_h \approx (W\phi)_h$</small></p>
      <p class="fragment" data-fragment-index="2" style="margin:0; font-size:0.88em;">$\sum_x {\color{#4A90D9}{\sum_h B_h\, \bar{W}_{hx}}}\, \phi_x = 0$</p>
      <p class="fragment" data-fragment-index="3" style="margin:0.2em 0; color:var(--red); font-size:0.95em;">$\big\downarrow$</p>
      <p class="fragment" data-fragment-index="3" style="margin:0;">$({\color{#4A90D9}{K^{FB}}})^\top \phi = 0$</p>
    </div>
  </div>
</div>

<div class="fragment two-col" data-fragment-index="4" style="margin-top:0.4em; gap:1em; text-align:center;">
  <div class="boxed-eq red-border" style="position:relative;">
    <em style="color:var(--red);">Capital market:</em><br>
    $M\phi = \varepsilon -$ <span style="position:relative; display:inline-block;"><span class="fragment" data-fragment-index="5" style="position:absolute; left:-2px; right:-2px; top:50%; border-top:2.5px solid var(--red);"></span>$\delta r \cdot \mathbf{1}$</span> &emsp; where &ensp; $M = \tilde{D} + \kappa\, G$
  </div>
  <div class="boxed-eq red-border" style="position:relative;">
    <em style="color:var(--red);">Bond market:</em><br>
    $(K^{FB})^\top \phi = 0$
    <div class="fragment" data-fragment-index="5" style="position:absolute; top:0; left:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; font-size:4em; color:var(--red); font-weight:bold; opacity:0.6;">&#x2717;</div>
  </div>
</div>

<div class="r-stack" style="margin-top:auto; font-size:0.88em; min-height:140px;">
  <div style="width:100%;">
    <div class="fragment box remark" data-fragment-index="2" style="margin:0.2em 0; padding:0.3em 0.8em;">
      <strong>Wedge:</strong>&ensp; $\phi_x = \Phi_x - 1 = O(\|\varepsilon\|)$ &mdash; linearized deviation in location yields. &ensp; $\delta r$ = shift in interbank rate.
    </div>
    <div class="fragment box remark" data-fragment-index="3" style="margin:0.2em 0; padding:0.3em 0.8em;">
      <strong>Notation:</strong>&ensp; ${\color{#4A90D9}{K_x^{FB} \equiv \sum_h B_h\,\bar{W}_{hx}}}$: first-best capital at $x$. &ensp; ${\color{#E8830C}{G_{xy} \equiv \sum_h B_h\,\bar{W}_{hx}\bar{W}_{hy}}}$: co-lending overlap. &ensp; ${\color{#9B59B6}{\kappa \equiv \tfrac{\gamma-\lambda}{\lambda}}}$: friction ratio.
    </div>
    <div class="fragment box remark" data-fragment-index="4" style="margin:0.2em 0; padding:0.3em 0.8em;">
      <strong>Components:</strong>&ensp; $\tilde{D} = \text{diag}(K^{FB} + \gamma)$: local market depth. &ensp; $G = W^\top D_B\, W$: <strong>co-lending overlap matrix</strong> (Gram matrix).
    </div>
  </div>
  <p class="fragment" data-fragment-index="5" style="font-size:1.2em; text-align:center; color:var(--red); background:white; padding:0.5em; width:100%;"><strong>Today:</strong> focus on partial equilibrium &ensp; $\Longrightarrow\; \delta r = 0$</p>
</div>

<aside class="notes">
<p>
I perturb around the steady state. phi<sub>x</sub> measures how far location x&rsquo;s pricing deviates from efficiency. epsilon<sub>x</sub> is the local productivity shock.
</p>

<p>
Start with both clearing conditions. First-order Taylor around the aligned equilibrium  theta is 1 at alignment, so the zeroth order cancels and we&rsquo;re left with these two groups of first-order terms. The blue terms capture how much capital sits at x. The orange terms capture cross-location portfolio rebalancing  banks exposed to both x and y adjust simultaneously.
</p>

<p>
Then we just name things: the blue sum is K-FB, the orange double sum is the Gram matrix G, and the friction ratio is kappa. That gives the compact form.
</p>

<p>
Today I focus on partial equilibrium  cross out the bond equation, delta r = 0. This isolates the cross-location propagation without the aggregate interest rate feedback.
</p>

<p>
The linearized system is M*phi = epsilon. Everything about propagation lives in this matrix M. Two pieces: D-tilde captures local market depth, and kappa*G is a network term.
</p>

<p>
The key parameter is kappa: the percentage by which info friction exceeds financial friction. When they&rsquo;re equal  kappa = 0  the network term drops out entirely.
</p>

<p>
ALGEBRA: Linearize around  = 1 (aligned SS). Write <sub>x</sub> = 1 + <sub>x</sub>. Key expansions: Z<sub>h</sub> = <sub>x</sub> W<sub>hx</sub>(1 + <sub>x</sub>) = 1 + (W)<sub>h</sub>. log Z<sub>h</sub>  (W)<sub>h</sub>. V<sub>h</sub> = (W)<sub>h</sub>. <sub>h</sub>  1 + (/)(W)<sub>h</sub>. <sub>x</sub>/Z<sub>h</sub>  1 + <sub>x</sub>  (W)<sub>h</sub>. Product: <sub>h</sub>  <sub>x</sub>/Z<sub>h</sub>  1 + <sub>x</sub> + (/  1)(W)<sub>h</sub> = 1 + <sub>x</sub> + (W)<sub>h</sub>, where  = ()/. Capital supply (first order): K<sub>x</sub><sup>S</sup> = <sub>h</sub> B<sub>h</sub> W<sub>hx</sub> [1 + <sub>x</sub> + (W)<sub>h</sub>] = K<sub>x</sub><sup>FB</sup> + K<sub>x</sub><sup>FB</sup> <sub>x</sub> +  <sub>h</sub> B<sub>h</sub> W<sub>hx</sub> (W)<sub>h</sub>. The network term: <sub>h</sub> B<sub>h</sub> W<sub>hx</sub> (W)<sub>h</sub> = <sub>h</sub> B<sub>h</sub> W<sub>hx</sub> <sub>y</sub> W<sub>hy</sub> <sub>y</sub> = <sub>y</sub> [<sub>h</sub> B<sub>h</sub> W<sub>hx</sub> W<sub>hy</sub>] <sub>y</sub> = (G)<sub>x</sub>, defining G<sub>xy</sub> = <sub>h</sub> B<sub>h</sub> W<sub>hx</sub> W<sub>hy</sub> (Gram matrix, G = W<sup>T</sup> D<sub>B</sub> W). Capital demand: A<sub>x</sub> + <sub>x</sub>  (<sup>FB</sup> + r)  <sub>x</sub> = K<sub>x</sub><sup>FB</sup> + <sub>x</sub>  r  <sub>x</sub>. Equate, cancel K<sub>x</sub><sup>FB</sup>: (K<sub>x</sub><sup>FB</sup> + )<sub>x</sub> + (G)<sub>x</sub> = <sub>x</sub>  r. In matrix form: M =   r1, with M = D + G, D = diag(K<sup>FB</sup> + ). Bond market: <sub>h</sub> B<sub>h</sub>(/)(W)<sub>h</sub> = (/) <sub>x</sub> K<sub>x</sub><sup>FB</sup> <sub>x</sub> = 0  (K<sup>FB</sup>)<sup>T</sup>  = 0.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org1043823" class="notitle" data-transition="none">
<h2 id="org1043823">No-network benchmark</h2>
<p style="margin-bottom:0.4em;"><strong>No-network benchmark:</strong>&ensp; suppose $\kappa = 0$.</p>

<div class="two-col" style="align-items:start; gap:1.5em;">
  <!-- LEFT: derivation chain -->
  <div style="text-align:center;">
    <div class="boxed-eq blue-border" style="display:block; margin:0.3em auto;">
      $M\phi = \varepsilon$
    </div>

    <p class="fragment" data-fragment-index="1" style="margin:0.3em 0; color:var(--blue); font-size:1.1em;">$\big\downarrow$</p>
    <div class="fragment boxed-eq blue-border" data-fragment-index="1" style="display:block; margin:0.3em auto;">
      $\phi = M^{-1}\varepsilon$
    </div>

    <p class="fragment" data-fragment-index="2" style="margin:0.3em 0; color:var(--blue); font-size:1.1em;">$\big\downarrow$</p>
    <div class="fragment boxed-eq blue-border" data-fragment-index="2" style="display:block; margin:0.3em auto;">
      $\phi_x = \dfrac{\varepsilon_x}{K_x^{FB} + \gamma}$
    </div>
  </div>

  <!-- RIGHT: consequences  interpretation (r-stack) -->
  <div class="r-stack" style="align-self:start;">
    <div class="fragment fade-in-then-out box remark" data-fragment-index="2" style="font-size:0.88em;">
      <p class="box-title">Consequences (no network)</p>
      <ul style="margin:0.2em 0; padding-left:1em; list-style:none;">
        <li style="margin-bottom:0.4em;">
          <strong>Spreads:</strong>&ensp; $\delta\tilde{\mu}_x = (1 - d_x)\,\varepsilon_x$ &ensp; where $d_x = \dfrac{K_x^{FB}}{K_x^{FB}+\gamma}$<br>
          <span style="font-size:0.9em; color:var(--gray);">Only shocked locations affected.</span>
        </li>
        <li style="margin-bottom:0.4em;">
          <strong>Capital:</strong>&ensp; $\delta K_x = d_x\,\varepsilon_x$<br>
          <span style="font-size:0.9em; color:var(--gray);">Deep markets ($d_x \approx 1$): absorb via capital. Thin ($d_x \approx 0$): absorb via spreads.</span>
        </li>
        <li style="margin-bottom:0.4em;">
          <strong>Portfolios:</strong>&ensp; $\delta\omega_{hx} = \bar{W}_{hx}\!\left(\phi_x - \bar{W}_h \cdot \phi\right)$<br>
          <span style="font-size:0.9em; color:var(--gray);">Banks rebalance  but net effect cancels at non-shocked $x$.</span>
        </li>
        <li>
          <strong>Leverage:</strong>&ensp; $\delta\theta_h = \dfrac{\gamma}{\lambda}\,\bar{W}_h \cdot \phi$<br>
          <span style="font-size:0.9em; color:var(--gray);">Exposed banks lever up; $\delta\Theta = (\gamma/\lambda)\,d \cdot \varepsilon \neq 0$ absorbed externally.</span>
        </li>
      </ul>
      <p style="margin-top:0.3em; font-style:italic;">Each location absorbs its own shock. No cross-location transmission.</p>
    </div>

    <div class="fragment box assumption" data-fragment-index="3" style="font-size:0.88em;">
      <p class="box-title">Why no spillovers at $\kappa = 0$?</p>
      <p style="margin:0.3em 0;">Each bank responds on two margins simultaneously:</p>
      <ol style="margin:0.2em 0; padding-left:1.2em;">
        <li><span class="blue">Rebalance</span> toward shocked location &rarr; <em>withdraws</em> capital from neighbors</li>
        <li><span class="orange">Lever up</span> on all locations &rarr; <em>adds</em> capital everywhere proportionally</li>
      </ol>
      <p style="margin:0.4em 0;">When $\gamma = \lambda$: equal marginal costs $\Longrightarrow$ the two externalities <strong>cancel exactly</strong> at every non-shocked location.</p>
      <p style="margin-top:0.4em; font-style:italic;">$G$ drops out. The network is the <strong>channel</strong>; friction asymmetry ($\kappa \neq 0$) is the <strong>switch</strong>.</p>
    </div>
  </div>
</div>

<div class="fragment box remark" data-fragment-index="1" style="margin-top:auto;">
  <strong>Remember:</strong>&ensp; $M = \text{diag}(K^{FB}+\gamma) + \kappa\, G$ &ensp; $\xrightarrow{\;\kappa=0\;}$ &ensp; $M = \text{diag}(K^{FB}+\gamma)$, &ensp; $M^{-1} = \text{diag}\!\left(\tfrac{1}{K_x^{FB}+\gamma}\right)$
</div>

<aside class="notes">
<p>
Keep the linearized equation visible at the top as a reminder. Without the network, each location is an island.
</p>

<p>
The depth ratio d<sub>x</sub> tells you: what fraction of the shock translates into capital vs. spreads. Deep markets absorb through quantity. Thin markets absorb through prices.
</p>

<p>
Why no spillovers? Banks respond on two margins simultaneously. They rebalance toward the shocked location (withdrawing capital from neighbors) and they lever up (adding capital everywhere). At  = 0 these two externalities cancel exactly at every non-shocked location. The network is the channel; friction asymmetry (  0) is the switch.
</p>

<p>
This is the conceptual core  everything that follows is about what happens when the two margins don&rsquo;t cancel. The &ldquo;no-network benchmark&rdquo; isn&rsquo;t really no network  it&rsquo;s the knife-edge where the network is present but invisible because the two forces offset.
</p>

<p>
Shock at A: only A moves. No contagion. Now  what does the network add?
</p>

<p>
ALGEBRA: At  = 0, M = D = diag(K<sup>FB</sup> + ), so <sub>x</sub> = <sub>x</sub>/(K<sub>x</sub><sup>FB</sup> + ). Spreads: <sub>x</sub> = <sub>x</sub> = <sub>x</sub>/(K<sub>x</sub><sup>FB</sup> + ) = (1  d<sub>x</sub>)<sub>x</sub> where d<sub>x</sub> = K<sub>x</sub><sup>FB</sup>/(K<sub>x</sub><sup>FB</sup> + ). Capital: K<sub>x</sub> = <sub>x</sub> + <sub>x</sub> = d<sub>x</sub> <sub>x</sub>. Why cancellation: bank h&rsquo;s net capital change at non-shocked y is K<sub>hy</sub> = B<sub>h</sub>[(<sub>h</sub> <sub>hy</sub>)] = B<sub>h</sub> W<sub>hy</sub>[<sub>y</sub> + (W)<sub>h</sub>]. At  = 0 and y  shocked location: <sub>y</sub> = 0, so K<sub>hy</sub> = 0 identically. The portfolio rebalancing (W<sub>hx</sub> <sub>x</sub> at y through  normalization) exactly offsets the leverage injection (+W<sub>hy</sub> (/)(W)<sub>h</sub>) when / = 1.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orge224064" class="notitle" data-transition="none">
<h2 id="orge224064">What if </h2>
<p style="margin-bottom:0.4em; font-size:1.2em; color:var(--red);"><strong>What if $\kappa \neq 0$?</strong></p>

<div class="two-col" style="align-items:start; gap:1.5em;">
  <!-- LEFT: repeat slide 10 derivation (all visible), then transform -->
  <div style="text-align:center;">
    <div class="boxed-eq blue-border" style="display:block; margin:0.3em auto;">
      $M\phi = \varepsilon$
    </div>

    <p style="margin:0.3em 0; color:var(--blue); font-size:1.1em;">$\big\downarrow$</p>
    <div class="boxed-eq blue-border" style="display:block; margin:0.3em auto;">
      $\phi = M^{-1}\varepsilon$
    </div>

    <p style="margin:0.3em 0; color:var(--blue); font-size:1.1em;">$\big\downarrow$</p>
    <!-- r-stack: cross out diagonal, replace with full M -->
    <div class="r-stack">
      <div class="fragment semi-fade-out" data-fragment-index="1" style="position:relative;">
        <div class="boxed-eq blue-border" style="display:block; margin:0.3em auto;">
          $\phi_x = \dfrac{\varepsilon_x}{K_x^{FB} + \gamma}$
        </div>
        <div class="fragment" data-fragment-index="1" style="position:absolute; left:5%; right:5%; top:50%; border-top:2.5px solid var(--red);"></div>
      </div>
      <div class="fragment boxed-eq red-border" data-fragment-index="2" style="display:block; margin:0.3em auto;">
        $\phi = \left(\tilde{D} + \kappa\, G\right)^{-1}\varepsilon$
      </div>
    </div>
  </div>

  <!-- RIGHT: empty (keeps two-col alignment) -->
  <div></div>
</div>

<p class="fragment" data-fragment-index="3" style="font-size:1.4em; font-style:italic; text-align:center; color:var(--red); margin:0.5em 0;">What is $G$?</p>

<div class="r-stack" style="margin-top:auto;">
  <div class="fragment semi-fade-out box remark" data-fragment-index="1">
    <strong>Remember:</strong>&ensp; $M = \text{diag}(K^{FB}+\gamma) + \kappa\, G$ &ensp; $\xrightarrow{\;\kappa=0\;}$ &ensp; $M = \text{diag}(K^{FB}+\gamma)$, &ensp; $M^{-1} = \text{diag}\!\left(\tfrac{1}{K_x^{FB}+\gamma}\right)$
  </div>
  <div class="fragment box remark" data-fragment-index="2">
    <strong>Reminder:</strong>&ensp;
    $\tilde{D} = \text{diag}(K^{FB}+\gamma)$: local market depth. &ensp;
    $G = W^\top D_B\, W$: co-lending overlap (Gram matrix). &ensp;
    $\kappa = \dfrac{\gamma - \lambda}{\lambda}$: friction ratio.
  </div>
</div>

<aside class="notes">
<p>
Transition from benchmark to the full model. Cross out the diagonal shortcut  now M has off-diagonal terms through the Gram matrix G. The next slide unpacks what G looks like.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orgb4cef65" class="notitle" data-transition="none">
<h2 id="orgb4cef65">The Gram matrix \(G\)</h2>
<div class="two-col" style="align-items:start; gap:1.5em;">
  <!-- LEFT: blue definition box + annotated diagram -->
  <div>
    <div class="box" style="border-left-color:var(--blue); background:#eef4fb; font-size:0.88em;">
      <p style="text-align:center; margin:0 0 0.4em 0; font-size:1.1em;">$G = W^\top \text{diag}(B_h)\, W$</p>
      <ul style="margin:0; padding-left:1em; list-style:none;">
        <li class="fragment" data-fragment-index="1" style="margin-bottom:0.5em;">
          <strong>Diagonal:</strong>&ensp; $G_{xx} = \sum_h B_h\, \bar{W}_{hx}^2$<br>
          <span style="font-size:0.9em; color:var(--gray);"> $x$ visibility in banks portfolio. High $G_{xx}$: banks give attention to $x$.</span>
        </li>
        <li class="fragment" data-fragment-index="2">
          <strong>Off-diagonal:</strong>&ensp; $G_{xy} = \sum_h B_h\, \bar{W}_{hx}\, \bar{W}_{hy}$<br>
          <span style="font-size:0.9em; color:var(--gray);">Co-lending overlap. High $G_{xy}$: same banks gives attention to $x$ and $y$.</span>
        </li>
      </ul>
    </div>
    <div class="fragment diagram-container" data-fragment-index="3" style="margin-top:0.4em;">
      <img src="./diagrams/filrouge_network_v2.svg" style="max-height:320px;" alt="Annotated network: 3 banks, 3 locations">
    </div>
  </div>

  <!-- RIGHT: W matrix (blue) + G matrix (orange) -->
  <div>
    <!-- W matrix -->
    <div class="fragment" data-fragment-index="3">
      <p style="margin:0 0 0.2em 0; font-weight:600; color:var(--blue); font-size:0.9em;">$\bar{W}$ &ensp; <span style="font-weight:400; font-size:0.85em;">(portfolio weights)</span></p>
      <table style="border-collapse:collapse; font-size:0.82em; width:100%;">
        <thead>
          <tr style="background:rgba(33,102,172,0.12);">
            <th style="border:1.5px solid var(--blue); padding:0.25em 0.5em; color:var(--blue);"></th>
            <th style="border:1.5px solid var(--blue); padding:0.25em 0.5em; color:var(--blue); text-align:center;">$A$</th>
            <th style="border:1.5px solid var(--blue); padding:0.25em 0.5em; color:var(--blue); text-align:center;">$B$</th>
            <th style="border:1.5px solid var(--blue); padding:0.25em 0.5em; color:var(--blue); text-align:center;">$C$</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; font-weight:600; background:rgba(33,102,172,0.06);">$h_1$</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center;">0.6</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center;">0.4</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center; color:var(--gray);">0</td>
          </tr>
          <tr>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; font-weight:600; background:rgba(33,102,172,0.06);">$h_2$</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center; color:var(--gray);">0</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center;">0.5</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center;">0.5</td>
          </tr>
          <tr>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; font-weight:600; background:rgba(33,102,172,0.06);">$h_3$</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center;">0.5</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center; color:var(--gray);">0</td>
            <td style="border:1.5px solid var(--blue); padding:0.25em 0.5em; text-align:center;">0.5</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- G matrix -->
    <div class="fragment" data-fragment-index="4" style="margin-top:0.6em;">
      <p style="margin:0 0 0.2em 0; font-weight:600; color:var(--orange); font-size:0.9em;">$G = \bar{W}^\top D_B\, \bar{W}$ &ensp; <span style="font-weight:400; font-size:0.85em;">(co-lending overlap)</span></p>
      <table style="border-collapse:collapse; font-size:0.82em; width:100%;">
        <thead>
          <tr style="background:rgba(224,130,20,0.12);">
            <th style="border:1.5px solid var(--orange); padding:0.25em 0.5em; color:var(--orange);"></th>
            <th style="border:1.5px solid var(--orange); padding:0.25em 0.5em; color:var(--orange); text-align:center;">$A$</th>
            <th style="border:1.5px solid var(--orange); padding:0.25em 0.5em; color:var(--orange); text-align:center;">$B$</th>
            <th style="border:1.5px solid var(--orange); padding:0.25em 0.5em; color:var(--orange); text-align:center;">$C$</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; font-weight:600; background:rgba(224,130,20,0.06);">$A$</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center; font-weight:600;">2.66</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">1.44</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">0.50</td>
          </tr>
          <tr>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; font-weight:600; background:rgba(224,130,20,0.06);">$B$</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">1.44</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center; font-weight:600;">1.96</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">1.00</td>
          </tr>
          <tr>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; font-weight:600; background:rgba(224,130,20,0.06);">$C$</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">0.50</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">1.00</td>
            <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center; font-weight:600;">1.50</td>
          </tr>
        </tbody>
      </table>
      <p style="font-size:0.78em; color:var(--gray); margin-top:0.2em;">
        e.g. $G_{AB} = 6 \times 0.6 \times 0.4 = 1.44$ &ensp; (only $h_1$ overlaps $A$ and $B$)
      </p>
      <p style="font-size:0.78em; color:var(--gray); margin-top:0.3em;">
        $K^{FB} = W^\top B = (4.6,\; 4.4,\; 3.0)$ &ensp;  market sizes
      </p>
    </div>
  </div>
</div>

<div class="fragment box remark" data-fragment-index="4" style="margin-top:auto; font-size:0.88em;">
  <strong>Reading $G$:</strong>&ensp; $A$$B$ strongly linked ($G_{AB}=1.44$, via $h_1$). &ensp; $A$$C$ weakly linked ($G_{AC}=0.50$, via small $h_3$). &ensp; Shock at $A$ propagates most to $B$.
</div>

<aside class="notes">
<p>
Now let me unpack that network term kappa*G from earlier.
</p>

<p>
G is a Gram matrix  inner products of banks&rsquo; lending portfolios weighted by wealth. If two locations are served by the same banks, G<sub>xy</sub> is large. Think of it as an endogenous spatial weight matrix.
</p>

<p>
Right side: a concrete example. Three banks with different sizes and specializations. Bank 1 is the largest and lends in A and B. Bank 2 lends in B and C. Bank 3 is small, lends in A and C.
</p>

<p>
The explicit calculation: G<sub>AB</sub> comes from the only bank that overlaps A and B, which is Bank 1. That gives 6  0.6  0.4 = 1.44. This is the strength of the contagion channel from A to B.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org5cbfda1" class="notitle" data-transition="none">
<h2 id="org5cbfda1">Decomposing \(G\): second moment = covariance + mean</h2>
<div style="display:grid; grid-template-columns:1fr 1fr; grid-template-rows:auto auto; gap:0.5em 1.5em; align-items:start;">

  <!-- NW: r-stack  blue formula (fragments 1-3)  diagram (fragment 4) -->
  <div class="r-stack" style="justify-self:stretch; align-self:stretch;">
    <div class="fragment fade-in box" data-fragment-index="1" style="border-left-color:var(--blue); background:#eef4fb; font-size:0.85em; width:100%;">
      <p style="text-align:center; margin:0 0 0.3em 0; font-size:1.05em;">
        $G = \underbrace{\operatorname{Cov}_B(\bar{W})}_{\alpha\;\text{(specialization)}} + \underbrace{B_{\text{total}}\,\bar{w}\bar{w}^\top}_{\beta\;\text{(common factor)}}$
      </p>
      <p style="margin:0 0 0.3em 0; font-size:0.92em; color:var(--gray);">
        Second moment = variance + mean&sup2;. Same identity, applied to bank portfolios weighted by size.
      </p>
      <ul style="margin:0; padding-left:1em; list-style:none; font-size:0.9em;">
        <li style="margin-bottom:0.3em;">
          <strong>$\operatorname{Cov}_B(\bar{W})$</strong> $\equiv \sum_h B_h\,(\bar{W}_h - \bar{w})(\bar{W}_h - \bar{w})^\top$ &mdash; weighted by bank size $B_h$, <em>not</em> normalized.
        </li>
        <li>
          <strong>$\bar{w}$</strong> $\equiv \tfrac{1}{B_{\text{total}}}\sum_h B_h\,\bar{W}_h$ &mdash; size-weighted average portfolio.
        </li>
      </ul>
    </div>
    <div class="fragment fade-in diagram-container" data-fragment-index="4" style="width:100%; background:white;">
      <img src="./diagrams/filrouge_network_v2.svg" style="max-height:300px; max-width:100%;" alt="3-bank network example">
    </div>
  </div>

  <!-- NE:  / Cov matrix (green)  fragment 3 -->
  <div class="fragment" data-fragment-index="3">
    <p style="margin:0 0 0.2em 0; font-weight:600; color:var(--green); font-size:0.88em;">
      $\alpha = \operatorname{Cov}_B(\bar{W})$ &ensp; <span style="font-weight:400; font-size:0.85em;">(bank specialization)</span>
    </p>
    <table style="border-collapse:collapse; font-size:0.82em; width:100%;">
      <thead>
        <tr style="background:rgba(27,120,55,0.08);">
          <th style="border:1.5px solid var(--green); padding:0.25em 0.5em; color:var(--green);"></th>
          <th style="border:1.5px solid var(--green); padding:0.25em 0.5em; color:var(--green); text-align:center;">$A$</th>
          <th style="border:1.5px solid var(--green); padding:0.25em 0.5em; color:var(--green); text-align:center;">$B$</th>
          <th style="border:1.5px solid var(--green); padding:0.25em 0.5em; color:var(--green); text-align:center;">$C$</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; font-weight:600; background:rgba(27,120,55,0.04);">$A$</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; font-weight:600;">0.90</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; color:var(--red);">&minus;0.25</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; color:var(--red);">&minus;0.65</td>
        </tr>
        <tr>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; font-weight:600; background:rgba(27,120,55,0.04);">$B$</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; color:var(--red);">&minus;0.25</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; font-weight:600;">0.35</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; color:var(--red);">&minus;0.10</td>
        </tr>
        <tr>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; font-weight:600; background:rgba(27,120,55,0.04);">$C$</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; color:var(--red);">&minus;0.65</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; color:var(--red);">&minus;0.10</td>
          <td style="border:1.5px solid var(--green); padding:0.25em 0.5em; text-align:center; font-weight:600;">0.75</td>
        </tr>
      </tbody>
    </table>
    <p style="font-size:0.78em; color:var(--gray); margin-top:0.2em;">
      Negative off-diagonals: $A$&ndash;$C$ differentiated (few shared banks). Rows sum to 0.
    </p>
  </div>

  <!-- SW:  matrix (red)  fragment 2 -->
  <div class="fragment" data-fragment-index="2">
    <p style="margin:0 0 0.2em 0; font-weight:600; color:var(--red); font-size:0.88em;">
      $\beta = B_{\text{total}}\,\bar{w}\bar{w}^\top$ &ensp; <span style="font-weight:400; font-size:0.85em;">(rank-1 common factor)</span>
    </p>
    <table style="border-collapse:collapse; font-size:0.82em; width:100%;">
      <thead>
        <tr style="background:rgba(178,24,43,0.08);">
          <th style="border:1.5px solid var(--red); padding:0.25em 0.5em; color:var(--red);"></th>
          <th style="border:1.5px solid var(--red); padding:0.25em 0.5em; color:var(--red); text-align:center;">$A$</th>
          <th style="border:1.5px solid var(--red); padding:0.25em 0.5em; color:var(--red); text-align:center;">$B$</th>
          <th style="border:1.5px solid var(--red); padding:0.25em 0.5em; color:var(--red); text-align:center;">$C$</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; font-weight:600; background:rgba(178,24,43,0.04);">$A$</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">1.76</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">1.69</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">1.15</td>
        </tr>
        <tr>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; font-weight:600; background:rgba(178,24,43,0.04);">$B$</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">1.69</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">1.61</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">1.10</td>
        </tr>
        <tr>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; font-weight:600; background:rgba(178,24,43,0.04);">$C$</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">1.15</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">1.10</td>
          <td style="border:1.5px solid var(--red); padding:0.25em 0.5em; text-align:center;">0.75</td>
        </tr>
      </tbody>
    </table>
    <p style="font-size:0.78em; color:var(--gray); margin-top:0.2em;">
      All entries positive, every row proportional to $\bar{w}$.
    </p>
  </div>

  <!-- SE: G matrix (orange, always visible)  relabeled as second moment -->
  <div>
    <p style="margin:0 0 0.2em 0; font-weight:600; color:var(--orange); font-size:0.88em;">
      $G = \bar{W}^\top D_B\, \bar{W}$ &ensp; <span style="font-weight:400; font-size:0.85em;"></span>
    </p>
    <table style="border-collapse:collapse; font-size:0.82em; width:100%;">
      <thead>
        <tr style="background:rgba(224,130,20,0.12);">
          <th style="border:1.5px solid var(--orange); padding:0.25em 0.5em; color:var(--orange);"></th>
          <th style="border:1.5px solid var(--orange); padding:0.25em 0.5em; color:var(--orange); text-align:center;">$A$</th>
          <th style="border:1.5px solid var(--orange); padding:0.25em 0.5em; color:var(--orange); text-align:center;">$B$</th>
          <th style="border:1.5px solid var(--orange); padding:0.25em 0.5em; color:var(--orange); text-align:center;">$C$</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; font-weight:600; background:rgba(224,130,20,0.06);">$A$</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center; font-weight:600;">2.66</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">1.44</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">0.50</td>
        </tr>
        <tr>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; font-weight:600; background:rgba(224,130,20,0.06);">$B$</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">1.44</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center; font-weight:600;">1.96</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">1.00</td>
        </tr>
        <tr>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; font-weight:600; background:rgba(224,130,20,0.06);">$C$</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">0.50</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center;">1.00</td>
          <td style="border:1.5px solid var(--orange); padding:0.25em 0.5em; text-align:center; font-weight:600;">1.50</td>
        </tr>
      </tbody>
    </table>
  </div>

</div>

<!-- Decomposition formula  appears with diagram at fragment 4 -->
<div class="fragment" data-fragment-index="4" style="text-align:center; margin:0.3em 0; font-size:1.15em;">
  $G \;=\; \operatorname{Cov}_B(\bar{W}) \;+\; B_{\text{total}}\,\bar{w}\bar{w}^\top$
</div>

<aside class="notes">
<p>
This slide unpacks what G really is. You saw G on the previous slide as co-lending overlap. But G is a weighted second moment of bank portfolios  and a second moment decomposes into variance plus mean-squared.
</p>

<p>
[Click: formula] The decomposition. Alpha is the B-weighted covariance of portfolio weights  it measures how differently banks allocate across locations. Beta is the rank-1 outer product of the average portfolio direction  the common factor all banks share. Note the notation: Cov<sub>B</sub> is weighted by bank size B<sub>h</sub>, not divided by B<sub>total</sub>. This keeps G = alpha + beta exact without normalization constants. And w-bar is the size-weighted average portfolio  bigger banks pull the average toward their allocation.
</p>

<p>
[Click: beta] The beta matrix in red. Every entry is positive  it reflects the aggregate flow of capital. Notice it&rsquo;s rank-1: every row is proportional to w-bar = (0.38, 0.37, 0.25). Market A gets the most because the biggest bank (h1) lends there. This is the &ldquo;gravity&rdquo; term.
</p>

<p>
[Click: alpha] The covariance matrix in green. Here&rsquo;s where it gets interesting. The off-diagonals are all negative  especially AC at minus 0.65. This means the banks serving A don&rsquo;t serve C (only tiny h3 overlaps). A and C are differentiated. The row sums are zero by construction  alpha measures pure reallocation, not level effects.
</p>

<p>
[Click: diagram] Back to the network picture. You can now see the two components visually: beta is the overall market size pattern, alpha is the differentiation pattern  which banks specialize where.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-grapes-colending" class="notitle" data-transition="none">
<h2 id="grapes-colending">Colending example</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; height:calc(100% + 2.5em + 1em); display:flex; flex-direction:column;">

  <div class="r-stack" style="flex:1; min-height:0;">

    <!-- Frame 0: Colending maps  origin + destination -->
    <div class="fragment semi-fade-out" data-fragment-index="1" style="width:100%; height:100%; display:flex; flex-direction:column;">
      <div style="flex:1; display:flex; gap:0.8em; justify-content:center; align-items:center;">
        <div style="text-align:center; flex:1;">
          <img src="./figures/colending_grapes_origin.svg"
               style="max-width:100%; max-height:90%; object-fit:contain;" alt="Colending  origin county">
          <p style="font-size:0.82em; color:var(--gray); margin:0.2em 0 0;">Sequoyah County, OK</p>
        </div>
        <div style="text-align:center; flex:1;">
          <img src="./figures/colending_grapes_dest.svg"
               style="max-width:100%; max-height:90%; object-fit:contain;" alt="Colending  destination county">
          <p style="font-size:0.82em; color:var(--gray); margin:0.2em 0 0;">Kern County, CA</p>
        </div>
      </div>
      <p style="text-align:right; flex:0 0 auto; padding:0.2em 0;"><a href="#/slide-grapes-colending-appendix" style="color:var(--blue); font-size:0.7em; text-decoration:none;">More examples &rarr;</a></p>
    </div>

    <!-- Frame 1: Bankbar charts  origin + destination -->
    <div class="fragment" data-fragment-index="1" style="width:100%; height:100%; display:flex; flex-direction:column;">
      <div style="flex:1; display:flex; gap:0.8em; justify-content:center; align-items:center;">
        <div style="text-align:center; flex:1;">
          <img src="./figures/colending_grapes_origin_bankbar.svg"
               style="max-width:100%; max-height:90%; object-fit:contain;" alt="Origin county bank shares">
        </div>
        <div style="text-align:center; flex:1;">
          <img src="./figures/colending_grapes_dest_bankbar.svg"
               style="max-width:95%; max-height:90%; object-fit:contain;" alt="Destination county bank shares">
        </div>
      </div>
      <p style="text-align:right; flex:0 0 auto; padding:0.2em 0;"><a href="#/slide-bankfootprints" style="color:var(--blue); font-size:0.7em; text-decoration:none;">Bank footprints &rarr;</a></p>
    </div>

  </div>

  <!-- Remark always visible below the r-stack -->
  <div class="box remark" style="margin:0.2em 0; padding:0.3em 0.8em; flex:0 0 auto;">
    <strong>Construction:</strong>&ensp; Total CI + agricultural bank lending (call reports) redistributed by county-level distribution of number of branches (Summary of Deposit). Date: 2023.      &ensp;<a href="#/slide-data-methodology-appendix" style="color:var(--blue); font-size:0.9em; text-decoration:none;">Methodology &rarr;</a>
  </div>

</div>

<aside class="notes">
<p>
This is the running empirical example. Two counties that share no obvious economic link  Sequoyah County, Oklahoma (population ~42,000, rural, eastern Oklahoma) and Kern County, California (population ~900,000, Bakersfield, Central Valley agriculture and oil).
</p>

<p>
[Frame 0] Left: colending map for Sequoyah County. Right: colending map for Kern County. The colending matrix G<sub>xy</sub> measures the deposit-weighted overlap of bank portfolios between any two counties. These two counties are connected because they share banks  not because they share industries or demographics.
</p>

<p>
[Frame 1] Bank composition of each county. Who are the banks that create this connection? Individual bank footprints are in the appendix.
</p>

<p>
This is the G matrix in action. The colending network is not a metaphor  it is the literal overlap of bank branch networks, weighted by deposits.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orgea87c6b" class="notitle" data-transition="none">
<h2 id="orgea87c6b">Leontief cascade</h2>
<div class="two-col" style="align-items:start; gap:1.5em;">
  <!-- LEFT: derivation chain (continues from slide 11) -->
  <div style="text-align:center;">
    <div class="boxed-eq blue-border" style="display:block; margin:0.3em auto;">
      $M\phi = \varepsilon$
    </div>

    <p style="margin:0.3em 0; color:var(--blue); font-size:1.1em;">$\big\downarrow$</p>
    <div class="boxed-eq blue-border" style="display:block; margin:0.3em auto;">
      $\phi = M^{-1}\varepsilon$
    </div>

    <p style="margin:0.3em 0; color:var(--blue); font-size:1.1em;">$\big\downarrow$</p>
    <div class="boxed-eq red-border" style="display:block; margin:0.3em auto;">
      $\phi = \left(\tilde{D} + \kappa\, G\right)^{-1}\varepsilon$
    </div>

    <p class="fragment" data-fragment-index="1" style="margin:0.3em 0; color:var(--red); font-size:1.1em;">$\big\downarrow$ <small style="font-size:0.7em; color:#888;">factor</small></p>
    <div class="fragment boxed-eq red-border" data-fragment-index="1" style="display:block; margin:0.3em auto;">
      $\phi = \underbrace{(I + \kappa\, \tilde{D}^{-1}G)^{-1}}_{\text{cascade (Leontief)}} \;\underbrace{\tilde{D}^{-1}\varepsilon}_{\text{local depth}}$
    </div>

    <p class="fragment" data-fragment-index="2" style="margin:0.3em 0; color:var(--red); font-size:1.1em;">$\big\downarrow$ <small style="font-size:0.7em; color:#888;">Neumann series</small></p>
    <div class="fragment boxed-eq red-border" data-fragment-index="2" style="display:block; margin:0.3em auto; font-size:0.9em;">
      $\phi = \Big(I - \kappa\tilde{D}^{-1}G + \kappa^2(\tilde{D}^{-1}G)^2 - \cdots\Big)\;\tilde{D}^{-1}\varepsilon$
    </div>
  </div>

  <!-- RIGHT: cascade interpretation -->
  <div>
    <div class="fragment box" data-fragment-index="1" style="border-left-color:var(--red); background:#fbeef0; font-size:0.88em;">
      <p class="box-title" style="color:var(--red);">Cascade interpretation</p>
      <ul style="margin:0; padding-left:0.5em; list-style:none;">
        <li style="margin-bottom:0.5em;">
          <strong>Round 0:</strong>&ensp; $\tilde{D}^{-1}\varepsilon$<br>
          <span style="font-size:0.9em; color:var(--gray);">Local absorption &mdash; each market absorbs its own shock (= benchmark).</span>
        </li>
        <li class="fragment" data-fragment-index="2" style="margin-bottom:0.3em;">
          <strong>Round 1:</strong>&ensp; $-\kappa\,\tilde{D}^{-1}G\;\tilde{D}^{-1}\varepsilon$<br>
          <span style="font-size:0.9em; color:var(--gray);">One-hop spillover: rebalancing spills capital to co-lent neighbors.</span>
        </li>
        <li class="fragment" data-fragment-index="2" style="margin-bottom:0.3em; text-align:center; list-style:none; color:var(--gray);">$\vdots$</li>
        <li class="fragment" data-fragment-index="2" style="margin-bottom:0.3em;">
          <strong>Round $n$:</strong>&ensp; $(-\kappa\,\tilde{D}^{-1}G)^n\;\tilde{D}^{-1}\varepsilon$<br>
          <span style="font-size:0.9em; color:var(--gray);">Echo of the echo &mdash; geometrically decaying.</span>
        </li>
        <li class="fragment" data-fragment-index="2" style="margin-bottom:0.3em; text-align:center; list-style:none; color:var(--gray);">$\vdots$</li>
        <li class="fragment" data-fragment-index="2">
          <strong>Round $\infty$:</strong>&ensp; $M^{-1}\varepsilon$<br>
          <span style="font-size:0.9em; color:var(--gray);">Full cascade &mdash; all rounds summed = Leontief inverse.</span>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="fragment box remark" data-fragment-index="2" style="margin-top:auto; font-size:0.88em;">
  <strong>Sign structure:</strong>&ensp; round $n$ carries $(-\kappa)^n$. &ensp;
  $\kappa < 0$: all rounds same sign &rarr; <span class="orange">amplification</span>. &ensp;
  $\kappa > 0$: alternating signs &rarr; <span class="blue">shielding</span>.
</div>

<aside class="notes">
<p>
Now I solve M*phi = epsilon. The key step: factor M = D(I +  DG), so M separates into a cascade operator times local depth.
</p>

<p>
This is exactly the Leontief inverse from input-output economics. Expand it as a Neumann series: each power is one more round of cascade through the network.
</p>

<p>
Round 0 is the benchmark  no network. Round 1: the shock at A spills to B and C through co-lending (the G matrix from the previous slide). Each subsequent round is smaller.
</p>

<p>
The sign structure is the punchline: when kappa &lt; 0 (leverage margin dominates), all rounds reinforce  amplification. When kappa &gt; 0 (portfolio margin dominates), rounds alternate  the network self-corrects, shielding.
</p>

<p>
ALGEBRA: Factor M = D + G = D(I + DG). Invert: M = (I + DG) D. Define A = DG, so (I + DG) = (I  A) = <sub>n0</sub> A (Neumann series). Convergence: row sums of DG satisfy <sub>y</sub> G<sub>xy</sub>/(K<sub>x</sub><sup>FB</sup> + ) = K<sub>x</sub><sup>FB</sup>/(K<sub>x</sub><sup>FB</sup> + ) = d<sub>x</sub> &lt; 1 (uses <sub>y</sub> G<sub>xy</sub> = K<sub>x</sub><sup>FB</sup> from W row-stochastic). By Gershgorin, (DG)  max<sub>x</sub> d<sub>x</sub> &lt; 1. So series converges for || &lt; 1/d<sub>max</sub>. Round n contribution: () (DG) D. Sign of off-diagonal: (DG)<sub>xy</sub> = G<sub>xy</sub>/(K<sub>x</sub><sup>FB</sup> + )  0, so (DG)  0 entrywise. Round n carries factor (): for  &lt; 0, () &gt; 0 n (monotone); for  &gt; 0, () alternates sign.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orgb872567" class="notitle" data-transition="none">
<h2 id="orgb872567">Cascade rounds</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">
<div style="display:grid; grid-template-columns:55% 45%; grid-template-rows:auto 1fr auto 1fr; gap:0 0.3em; flex:1; align-items:center;">

  <!-- Row 1: top panel labels -->
  <p style="margin:0; font-size:0.85em; color:var(--gray); text-align:center;">Network &ensp;($\theta_h B_h$, $K_x$)</p>
  <p style="margin:0; font-size:0.85em; color:var(--gray); text-align:center;">Leverage &ensp;$\delta\theta_h$ (%)</p>

  <!--  NW: network diagram (12 states)  -->
  <div class="r-stack" style="text-align:center;">
    <div class="fragment fade-out" data-fragment-index="1"><img src="./diagrams/filrouge_cascade_net_amplify_pre.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="1"><img src="./diagrams/filrouge_cascade_net_amplify_r0.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="2"><img src="./diagrams/filrouge_cascade_net_amplify_r1.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="3"><img src="./diagrams/filrouge_cascade_net_amplify_r2.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="4"><img src="./diagrams/filrouge_cascade_net_amplify_r3.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="5"><img src="./diagrams/filrouge_cascade_net_amplify_rinf.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="6"><img src="./diagrams/filrouge_cascade_net_shield_pre.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="7"><img src="./diagrams/filrouge_cascade_net_shield_r0.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="8"><img src="./diagrams/filrouge_cascade_net_shield_r1.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="9"><img src="./diagrams/filrouge_cascade_net_shield_r2.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="10"><img src="./diagrams/filrouge_cascade_net_shield_r3.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment" data-fragment-index="11"><img src="./diagrams/filrouge_cascade_net_shield_rinf.svg" style="max-height:420px; max-width:100%;"></div>
  </div>

  <!--  NE: leverage _h (%)  -->
  <div class="r-stack" style="text-align:center;">
    <div class="fragment fade-out" data-fragment-index="1"><img src="./diagrams/filrouge_cascade_lev_amplify_pre.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="1"><img src="./diagrams/filrouge_cascade_lev_amplify_r0.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="2"><img src="./diagrams/filrouge_cascade_lev_amplify_r1.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="3"><img src="./diagrams/filrouge_cascade_lev_amplify_r2.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="4"><img src="./diagrams/filrouge_cascade_lev_amplify_r3.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="5"><img src="./diagrams/filrouge_cascade_lev_amplify_rinf.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="6"><img src="./diagrams/filrouge_cascade_lev_shield_pre.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="7"><img src="./diagrams/filrouge_cascade_lev_shield_r0.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="8"><img src="./diagrams/filrouge_cascade_lev_shield_r1.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="9"><img src="./diagrams/filrouge_cascade_lev_shield_r2.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="10"><img src="./diagrams/filrouge_cascade_lev_shield_r3.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment" data-fragment-index="11"><img src="./diagrams/filrouge_cascade_lev_shield_rinf.svg" style="max-height:420px; max-width:100%;"></div>
  </div>

  <!-- Row 3: bottom panel labels -->
  <p style="margin:0; font-size:0.85em; color:var(--gray); text-align:center;">Pass-through &ensp;$\delta\tilde\mu_x / \varepsilon$ (%)</p>
  <p style="margin:0; font-size:0.85em; color:var(--gray); text-align:center;">Capital &ensp;$\delta K_x / K_x^{FB}$ (%)</p>

  <!--  SW: spreads _x  -->
  <div class="r-stack" style="text-align:center;">
    <div class="fragment fade-out" data-fragment-index="1"><img src="./diagrams/filrouge_cascade_spr_amplify_pre.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="1"><img src="./diagrams/filrouge_cascade_spr_amplify_r0.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="2"><img src="./diagrams/filrouge_cascade_spr_amplify_r1.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="3"><img src="./diagrams/filrouge_cascade_spr_amplify_r2.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="4"><img src="./diagrams/filrouge_cascade_spr_amplify_r3.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="5"><img src="./diagrams/filrouge_cascade_spr_amplify_rinf.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="6"><img src="./diagrams/filrouge_cascade_spr_shield_pre.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="7"><img src="./diagrams/filrouge_cascade_spr_shield_r0.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="8"><img src="./diagrams/filrouge_cascade_spr_shield_r1.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="9"><img src="./diagrams/filrouge_cascade_spr_shield_r2.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="10"><img src="./diagrams/filrouge_cascade_spr_shield_r3.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment" data-fragment-index="11"><img src="./diagrams/filrouge_cascade_spr_shield_rinf.svg" style="max-height:420px; max-width:100%;"></div>
  </div>

  <!--  SE: capital K/K^FB (%)  -->
  <div class="r-stack" style="text-align:center;">
    <div class="fragment fade-out" data-fragment-index="1"><img src="./diagrams/filrouge_cascade_cap_amplify_pre.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="1"><img src="./diagrams/filrouge_cascade_cap_amplify_r0.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="2"><img src="./diagrams/filrouge_cascade_cap_amplify_r1.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="3"><img src="./diagrams/filrouge_cascade_cap_amplify_r2.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="4"><img src="./diagrams/filrouge_cascade_cap_amplify_r3.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="5"><img src="./diagrams/filrouge_cascade_cap_amplify_rinf.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="6"><img src="./diagrams/filrouge_cascade_cap_shield_pre.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="7"><img src="./diagrams/filrouge_cascade_cap_shield_r0.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="8"><img src="./diagrams/filrouge_cascade_cap_shield_r1.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="9"><img src="./diagrams/filrouge_cascade_cap_shield_r2.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment fade-in-then-out" data-fragment-index="10"><img src="./diagrams/filrouge_cascade_cap_shield_r3.svg" style="max-height:420px; max-width:100%;"></div>
    <div class="fragment" data-fragment-index="11"><img src="./diagrams/filrouge_cascade_cap_shield_rinf.svg" style="max-height:420px; max-width:100%;"></div>
  </div>

</div>

<!--  Caption (synchronized, 12 states)  -->
<div class="r-stack" style="text-align:center; flex:0 0 auto; padding:0.2em 0; font-size:1.05em; font-weight:600;">
  <p class="fragment fade-out" data-fragment-index="1" style="margin:0;">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=2$, &ensp;<span style="color:var(--orange);">$\kappa=-0.5$</span></p>
  <p class="fragment fade-in-then-out" data-fragment-index="1" style="margin:0; color:var(--orange);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=2$, &ensp;$\kappa=-0.5$ &ensp;(round 0)</p>
  <p class="fragment fade-in-then-out" data-fragment-index="2" style="margin:0; color:var(--orange);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=2$, &ensp;$\kappa=-0.5$ &ensp;(round 1)</p>
  <p class="fragment fade-in-then-out" data-fragment-index="3" style="margin:0; color:var(--orange);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=2$, &ensp;$\kappa=-0.5$ &ensp;(round 2)</p>
  <p class="fragment fade-in-then-out" data-fragment-index="4" style="margin:0; color:var(--orange);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=2$, &ensp;$\kappa=-0.5$ &ensp;(round 3)</p>
  <p class="fragment fade-in-then-out" data-fragment-index="5" style="margin:0; color:var(--orange);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=2$, &ensp;$\kappa=-0.5$ &ensp;(round $\infty$ &mdash; amplification)</p>
  <p class="fragment fade-in-then-out" data-fragment-index="6" style="margin:0;">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=\tfrac23$, &ensp;<span style="color:var(--blue);">$\kappa=+0.5$</span></p>
  <p class="fragment fade-in-then-out" data-fragment-index="7" style="margin:0; color:var(--blue);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=\tfrac23$, &ensp;$\kappa=+0.5$ &ensp;(round 0)</p>
  <p class="fragment fade-in-then-out" data-fragment-index="8" style="margin:0; color:var(--blue);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=\tfrac23$, &ensp;$\kappa=+0.5$ &ensp;(round 1)</p>
  <p class="fragment fade-in-then-out" data-fragment-index="9" style="margin:0; color:var(--blue);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=\tfrac23$, &ensp;$\kappa=+0.5$ &ensp;(round 2)</p>
  <p class="fragment fade-in-then-out" data-fragment-index="10" style="margin:0; color:var(--blue);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=\tfrac23$, &ensp;$\kappa=+0.5$ &ensp;(round 3)</p>
  <p class="fragment" data-fragment-index="11" style="margin:0; color:var(--blue);">
     100% demand shock to $A$, &ensp;$\gamma=1$, &ensp;$\lambda=\tfrac23$, &ensp;$\kappa=+0.5$ &ensp;(round $\infty$ &mdash; shielding)</p>
</div>
</div><!-- /wrapper -->

<aside class="notes">
<p>
Cascade on the three-bank example. Shock epsilon hits location A. Four panels: network (top-left) shows B total lending on banks and K<sub>x</sub> capital at locations; leverage  (top-right, bank-level); spreads / (bottom-left, location-level); capital reallocation K/K<sup>FB</sup> (bottom-right, location-level).
</p>

<p>
Amplification ( = 0.5,  = 2). Leverage is expensive  banks rebalance more than they lever up.
</p>

<p>
Round 0: local absorption only. Banks see the yield gap at A and lever up  h (+30%) and h (+25%) in proportion to their A exposure. h has no A exposure, unchanged. All extra capital goes to A. Spread at A drops from 100% to 18% through local market depth. No spillovers yet  this ignores that h and h also lend elsewhere.
</p>

<p>
Round 1: portfolio linkages kick in. h rebalances toward A, draining capital from B. h rebalances toward A, draining C. Scarcity spreads: B and C develop positive spreads (2.4%, 1.1%). h, previously unaffected, now sees positive yields at B and C and enters the cascade (+4.9%). Meanwhile A&rsquo;s own spread rises (18%  22%)  the system-wide scarcity feeds back on the origin. Capital at A actually falls (100%  95%) because B and C now also compete for banks&rsquo; limited capacity.
</p>

<p>
Key mechanism: with expensive leverage, banks respond to yield gaps mainly by reshuffling capital (zero-sum), not by creating new capital (positive-sum). Reshuffling toward A starves neighboring markets, creating more problems than it solves.
</p>

<p>
Rounds 2: monotone convergence. All spreads and leverage positive and increasing. Converges to: A spread +24%, B +4.2%, C +2.5%. B and C lose about 5% of capital. The network has amplified the shock beyond A.
</p>

<p>
Shielding ( = +0.5,  = 2/3). Leverage is cheap  banks create new capital rather than just reshuffle.
</p>

<p>
Round 0: same shock, but three times the firepower. h levers up +90% (vs +30% before), h +75% (vs +25%), because / = 1.5 instead of 0.5. All capital still goes to A. Spread at A = 18%, same as before  round 0 is identical except for leverage scale.
</p>

<p>
Round 1: the cavalry overshoots. h is lending so much that extra capital spills over to B (40% of h&rsquo;s portfolio). h floods C (50% of h&rsquo;s portfolio). B and C are now oversupplied  negative spreads (2.4%, 1.1%) and positive capital inflows (+3%, +2.1%). Exact opposite of amplification. h sees negative yields at B and C and deleverages (15%)  pulls back from lending. h and h moderate (90%  61%, 75%  52%) as the B/C surplus drags down their portfolio returns. Meanwhile A benefits: spread falls (18%  14%), capital rises (100%  105%).
</p>

<p>
Round 2: h&rsquo;s deleveraging was itself too aggressive  B and C swing back (2.4%  1.3%). h and h lever back up. The system oscillates around convergence.
</p>

<p>
Rounds 2: dampened oscillation. Converges to: A spread +15% (below the 18% no-network benchmark  the network helped), B 1.6%, C 0.6%. Capital: A +104%, B +2%, C +1%. h settles at 9.3% (permanently deleveraged).
</p>

<p>
Key mechanism: cheap leverage  banks flood the system with new capital (positive-sum). The extra capital overflows from A to neighbors, sharing the burden. Contrast with amplification where expensive leverage forces zero-sum reshuffling that starves neighbors.
</p>

<p>
Key contrast: amplify = monotone convergence (all same sign, all spreads rising); shield = oscillating dampening (signs flip round to round, spreads at B and C negative).
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org74193ab" class="notitle" data-transition="none">
<h2 id="org74193ab">Shield vs. Amplify</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="box theorem" style="margin:0 0.9em 0.3em 0.9em; font-size:0.82em; flex:0 0 auto;">
  <p class="box-title">Theorem (Propagation sign)</p>
  <p style="margin:0.15em 0;">Suppose the economy is spatial homogeneous ($A_x=\bar{A}$) and consider a redistributive shock ($\sum_x \varepsilon_x = 0$). Let $\delta\tilde\mu^{nn}_x = (1-d_x)\,\varepsilon_x$ be the no-network benchmark, where $d_x = K^{FB}_x/(K^{FB}_x+\gamma)$. Then:</p>
  <table style="font-size:0.95em; width:100%; text-align:center; margin:0.2em 0 0.1em 0;">
    <tr style="background:none;">
      <th style="text-align:left; background:none;"></th>
      <th style="background:none;">$\kappa > 0$ &ensp;(info friction dom.)</th>
      <th style="background:none;">$\kappa \leq 0$ &ensp;(fin. friction dom.)</th>
    </tr>
    <tr>
      <td style="text-align:left;"><strong>Own</strong> ($x = x^*$)</td>
      <td>$|\delta\tilde\mu_{x^*}| < |\delta\tilde\mu^{nn}_{x^*}|$ &ensp;(<em>shielded</em>)</td>
      <td>$|\delta\tilde\mu_{x^*}| \geq |\delta\tilde\mu^{nn}_{x^*}|$ &ensp;(<em>amplified</em>)</td>
    </tr>
    <tr>
      <td style="text-align:left;"><strong>Cross</strong> ($x \neq x^*$)</td>
      <td>$|\delta\tilde\mu_x| < |\delta\tilde\mu^{nn}_x|$ &ensp;(<em>sharing</em>)</td>
      <td>$|\delta\tilde\mu_x| \geq |\delta\tilde\mu^{nn}_x|$ &ensp;(<em>flight</em>)</td>
    </tr>
  </table>
</div>

<!-- Charts: fill remaining space -->
<div style="flex:1; position:relative;">
  <div class="fragment fade-in-then-out" data-fragment-index="1" style="position:absolute; inset:0; display:flex; gap:0.4em; justify-content:center; align-items:center;">
    <img src="./diagrams/filrouge_theorem_spr_shield_lo.svg" style="max-height:520px; max-width:48%;" alt="Shield lo">
    <img src="./diagrams/filrouge_theorem_spr_amplify_lo.svg" style="max-height:520px; max-width:48%;" alt="Amplify lo">
  </div>
  <div class="fragment" data-fragment-index="2" style="position:absolute; inset:0; display:flex; gap:0.4em; justify-content:center; align-items:center;">
    <img src="./diagrams/filrouge_theorem_spr_shield_hi.svg" style="max-height:520px; max-width:48%;" alt="Shield hi">
    <img src="./diagrams/filrouge_theorem_spr_amplify_hi.svg" style="max-height:520px; max-width:48%;" alt="Amplify hi">
  </div>
</div>

<!-- Parameter caption pinned at bottom -->
<div class="r-stack" style="flex:0 0 auto; text-align:center; padding:0.2em 0; font-size:1.05em; font-weight:600;">
  <p class="fragment fade-in-then-out" data-fragment-index="1" style="margin:0;">
    $\gamma = 1$, &ensp;$\lambda_{\kappa>0} = \tfrac{2}{3}$, &ensp;$\lambda_{\kappa<0} = 2$, &ensp;$\varepsilon = (1,\,-\tfrac{1}{2},\,-\tfrac{1}{2})$</p>
  <p class="fragment" data-fragment-index="2" style="margin:0;">
    $\gamma = 5$, &ensp;$\lambda_{\kappa>0} = \tfrac{10}{3}$, &ensp;$\lambda_{\kappa<0} = 10$, &ensp;$\varepsilon = (1,\,-\tfrac{1}{2},\,-\tfrac{1}{2})$</p>
</div>

</div><!-- /wrapper -->

<aside class="notes">
<p>
Walk through the theorem slowly before clicking.
</p>

<p>
First: redistributive shock  zero aggregate, pure reallocation. One location gets hit, others absorb. This rules out the interest rate channel (delta r = 0 automatically), so we stay in partial equilibrium.
</p>

<p>
Second: the no-network benchmark, delta-mu-nn. This is what spreads would be WITHOUT cross-bank linkages  just local market depth absorbing the shock. The green bars on the chart. The formula (1 - d<sub>x</sub>) epsilon<sub>x</sub> says: fraction (1 - d<sub>x</sub>) passes through to spreads, fraction d<sub>x</sub> is absorbed by market depth. d<sub>x</sub> is the depth ratio  how much of the local stiffness comes from capital volume vs. portfolio friction.
</p>

<p>
Third: the comparison. The theorem says: with a network, are spreads INSIDE or OUTSIDE the green bars? That depends entirely on kappa.
</p>

<p>
[Click 1  low  = 1] Shield (left): every bar inside the green benchmark. Amplify (right): every bar exceeds it. The network uniformly helps or hurts  not location by location, but everywhere at once.
</p>

<p>
[Click 2  high  = 5] Same qualitative pattern but bars are much taller. Higher  = larger baseline DWL regardless of network. But the relative comparison (inside vs outside green bars) depends only on . The theorem is about relative shielding/amplification, not absolute levels.
</p>

<p>
PROOF (propagation sign): For redistributive  ( <sub>x</sub> = 0), r = 0, so M =  with M = D + G. No-network benchmark: <sup>nn</sup> = D, spreads <sup>nn</sup><sub>x</sub> = <sup>nn</sup><sub>x</sub> = (1  d<sub>x</sub>)<sub>x</sub>. With network:  = M. Symmetrize: M = D<sup>1/2</sup> M D<sup>1/2</sup> = I +  where  = D<sup>1/2</sup>GD<sup>1/2</sup>  0 (PSD, since G = W<sup>T</sup> D<sub>B</sub> W is Gram). Case  &gt; 0: M  I  M  I (Loewner order). Diagonal: (M)<sub>xx</sub>  1  (M)<sub>xx</sub>  (D)<sub>xx</sub>. So |<sub>x</sub>| = |(M)<sub>x</sub>|  |(D)<sub>x</sub>| = |<sup>nn</sup><sub>x</sub>|  shielding. Case  &lt; 0: First Neumann order (M)<sub>xy</sub>  ||G<sub>xy</sub>/(D<sub>xx</sub> D<sub>yy</sub>) &gt; 0 for linked locations  positive cross-response means amplification. Exact: for eigenshock v<sub>j</sub>, <sub>x</sub>/<sup>nn</sup><sub>x</sub> = (K<sub>x</sub><sup>FB</sup> + )/<sub>j</sub>. Since <sub>j</sub> = (K<sub>x</sub><sup>FB</sup> + ) + g<sub>j</sub> &lt; (K<sub>x</sub><sup>FB</sup> + ) when  &lt; 0 and g<sub>j</sub> &gt; 0, the ratio exceeds 1.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-grapes-shock-amplify" class="notitle" data-transition="none">
<h2 id="grapes-shock-amplify">Amplify regime &amp;mdash; empirical</h2>
<div style="margin:-2.5em -1.5em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div style="flex:1; display:flex; gap:0.8em; justify-content:center; align-items:center;">
  <div style="text-align:center; flex:1; height:100%;">
    <img src="./figures/shock_amplify_kn0.50_g1.00_grapes_origin.svg"
         style="max-width:95%; max-height:85%; object-fit:contain;" alt="Amplify shock  origin county">
    <p style="font-size:0.78em; color:var(--gray); margin:0.2em 0 0;">Sequoyah County, OK &mdash; shock origin</p>
  </div>
  <div style="text-align:center; flex:1; height:100%;">
    <img src="./figures/shock_amplify_kn0.50_g1.00_grapes_dest.svg"
         style="max-width:95%; max-height:85%; object-fit:contain;" alt="Amplify shock  destination county">
    <p style="font-size:0.78em; color:var(--gray); margin:0.2em 0 0;">Kern County, CA &mdash; shock destination</p>
  </div>
</div>

<div style="flex:0 0 auto; text-align:center; padding:0.2em 0; font-size:0.78em; color:var(--gray); line-height:1.6;">
  <strong>Amplify regime</strong> &ensp;
  $\varepsilon_x = 1\%\,K_x$ &ensp;|&ensp;
  $\kappa = -0.50$ &ensp;|&ensp;
  $\gamma = 0.67$ &ensp;|&ensp;
  $\lambda = 1.33$ &ensp;|&ensp;
  $\gamma + \lambda = 2$ &ensp; ($g_1$-normalized)<br>
  <a href="#/slide-data-methodology-appendix" style="color:var(--blue); text-decoration:none;">Methodology &rarr;</a>
  &ensp;
  <a href="#/slide-grapes-shock-appendix" style="color:var(--blue); text-decoration:none;">More examples &rarr;</a>
</div>

</div>

<aside class="notes">
<p>
This is the amplify regime applied to our running example  Sequoyah County, OK and Kern County, CA. With kappa = -0.50 (leverage friction dominates), a shock to Sequoyah County propagates through shared banks to Kern County. The capital flight channel dominates: banks pull capital from both counties, amplifying the initial shock beyond what local absorption would produce.
</p>

<p>
Compare with the no-network benchmark: the colored areas show excess impact attributable to the network. Under amplification, every location connected to the origin through shared bank portfolios experiences a larger adjustment than it would in isolation.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-grapes-shock-shield" class="notitle" data-transition="none">
<h2 id="grapes-shock-shield">Shield regime &amp;mdash; empirical</h2>
<div style="margin:-2.5em -1.5em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div style="flex:1; display:flex; gap:0.8em; justify-content:center; align-items:center;">
  <div style="text-align:center; flex:1; height:100%;">
    <img src="./figures/shock_shield_kp0.50_g1.00_grapes_origin.svg"
         style="max-width:95%; max-height:85%; object-fit:contain;" alt="Shield shock  origin county">
    <p style="font-size:0.78em; color:var(--gray); margin:0.2em 0 0;">Sequoyah County, OK &mdash; shock origin</p>
  </div>
  <div style="text-align:center; flex:1; height:100%;">
    <img src="./figures/shock_shield_kp0.50_g1.00_grapes_dest.svg"
         style="max-width:95%; max-height:85%; object-fit:contain;" alt="Shield shock  destination county">
    <p style="font-size:0.78em; color:var(--gray); margin:0.2em 0 0;">Kern County, CA &mdash; shock destination</p>
  </div>
</div>

<div style="flex:0 0 auto; text-align:center; padding:0.2em 0; font-size:0.78em; color:var(--gray); line-height:1.6;">
  <strong>Shield regime</strong> &ensp;
  $\varepsilon_x = 1\%\,K_x$ &ensp;|&ensp;
  $\kappa = +0.50$ &ensp;|&ensp;
  $\gamma = 1.20$ &ensp;|&ensp;
  $\lambda = 0.80$ &ensp;|&ensp;
  $\gamma + \lambda = 2$ &ensp; ($g_1$-normalized)<br>
  <a href="#/slide-data-methodology-appendix" style="color:var(--blue); text-decoration:none;">Methodology &rarr;</a>
  &ensp;
  <a href="#/slide-grapes-shock-appendix" style="color:var(--blue); text-decoration:none;">More examples &rarr;</a>
</div>

</div>

<aside class="notes">
<p>
Same counties, opposite regime. With kappa = +0.50 (information friction dominates), the network dampens the shock. Banks&rsquo; leverage response injects capital broadly, compensating the flight. The colored areas now show the reduction in impact relative to the no-network benchmark.
</p>

<p>
Key visual comparison: the spatial pattern is similar (same G matrix, same banks connecting the counties), but the sign flips. Under shielding, every bar is inside the benchmark. The network acts as insurance  spreading the shock&rsquo;s cost across many locations so no single location bears the full burden.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org40b22f7" class="notitle" data-transition="none">
<h2 id="org40b22f7">Deadweight loss &amp; the resolution operator</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="two-col" style="flex:1; align-items:start; gap:1.2em; max-width:88%; margin:0 auto;">

  <!-- LEFT: DWL derivation chain -->
  <div style="text-align:center;">

    <!-- DWL definition (purple) -->
    <div class="boxed-eq" style="display:block; margin:0.3em auto; border-color:var(--purple); background:#f3eef8;">
      <em style="color:var(--purple);">Deadweight loss:</em><br>
      $\Delta W = \frac{1}{2}\sum_x (K_x - K_x^{FB})^2$
    </div>

    <p class="fragment" data-fragment-index="1" style="margin:0.2em 0; font-size:1.1em; color:var(--purple);">$\big\downarrow$</p>
    <p class="fragment" data-fragment-index="1" style="margin:0; font-size:0.82em; color:var(--gray);">$K_x - K_x^{FB} = \delta\tilde{\mu}_x$</p>

    <!-- DWL in spreads (blue) -->
    <div class="fragment boxed-eq blue-border" data-fragment-index="1" style="display:block; margin:0.3em auto;">
      <em style="color:var(--blue);">In spreads:</em><br>
      $\Delta W = \frac{1}{2}\|\delta\tilde{\mu}\|^2$
    </div>

    <p class="fragment" data-fragment-index="2" style="margin:0.2em 0; font-size:1.1em; color:var(--blue);">$\big\downarrow$</p>
    <p class="fragment" data-fragment-index="2" style="margin:0; font-size:0.82em; color:var(--gray);">$\delta\tilde{\mu} = \gamma M^{-1}\varepsilon$</p>

    <!-- Final form (red) -->
    <div class="fragment boxed-eq red-border" data-fragment-index="2" style="display:block; margin:0.3em auto;">
      $\Delta W = \frac{1}{2}\|\gamma M^{-1}\varepsilon\|^2 = \frac{1}{2}\|R\,\varepsilon\|^2$
    </div>

  </div>

  <!-- RIGHT: Resolution operator + interpretation -->
  <div class="fragment box" data-fragment-index="2" style="border-left-color:var(--green); background:rgba(27,120,55,0.04); font-size:0.88em;">
    <p class="box-title" style="color:var(--green);">Resolution operator</p>
    <p style="text-align:center; margin:0.2em 0 0.5em 0; font-size:1.1em;">$R = \gamma\, M^{-1}$</p>
    <ul style="margin:0; padding-left:0.5em; list-style:none;">
      <li style="margin-bottom:0.5em;">
        <strong>Frozen</strong> ($R = I$): &ensp; $\Delta W = \tfrac{1}{2}\|\varepsilon\|^2$<br>
        <span style="font-size:0.9em; color:var(--gray);">Nobody adjusts &mdash; full misallocation.</span>
      </li>
      <li style="margin-bottom:0.5em;">
        <strong>First-best</strong> ($R = 0$): &ensp; $\Delta W = 0$<br>
        <span style="font-size:0.9em; color:var(--gray);">Frictionless reallocation &mdash; no welfare loss.</span>
      </li>
      <li class="fragment" data-fragment-index="3" style="margin-bottom:0.3em;">
        <strong>Reality:</strong> &ensp; eigenvalues of $R$ &ensp; $\in (0,\,1)$<br>
        <span style="font-size:0.9em; color:var(--gray);">Always helps, never fully resolves. How much depends on <strong>direction</strong> of $\varepsilon$.</span>
      </li>
    </ul>
  </div>

</div><!-- /two-col -->

<!-- DWL theorem: centered below both columns -->
<div class="fragment box theorem" data-fragment-index="4" style="flex:0 0 auto; margin:-0.3em 2em 0.3em 2em; font-size:0.92em;">
  <p class="box-title">Spectral decomposition of DWL</p>
  <p style="text-align:center; margin:0.2em 0;">$\displaystyle\text{DWL} = \frac{1}{2}\sum_{j} r_j^2 \; a_j^2$</p>
  <p style="margin:0.3em 0 0 0;">where:</p>
  <ul style="margin:0.1em 0 0 0; padding-left:1.2em; list-style:none;">
    <li>$r_j = \gamma / \mu_j$ &mdash; resolution failure on mode $j$ &ensp; ($\mu_j$: eigenvalues of $M = \tilde{D} + \kappa G$)</li>
    <li>$a_j = v_j \cdot \varepsilon$ &mdash; shock loading on mode $j$</li>
  </ul>
</div>

</div><!-- /wrapper -->

<aside class="notes">
<p>
Now I want to ask: what is the welfare cost of imperfect shock absorption?
</p>

<p>
DWL is a Harberger triangle: quantity gaps equal price gaps (linear demand), which equal spreads squared. Since  = M, we get W<sup>PE</sup> = (/2)<sup>T</sup> M  = (/2)M.
</p>

<p>
Define R = M as the resolution operator. Two benchmarks: frozen (nobody adjusts)  R = I, every dollar of shock is a dollar of misallocation. First-best (frictions vanish)  R = 0, perfect reallocation. Reality: eigenvalues r<sub>j</sub> = /<sub>j</sub>  (0,1)  adjustment always helps, never fully resolves.
</p>

<p>
The spectral decomposition DWL = (1/2) r<sub>j</sub> a<sub>j</sub> shows that loss depends on which eigenmodes the shock loads on. Some patterns are well-resolved (small r<sub>j</sub>); others leak through (large r<sub>j</sub>). Which is which depends on the eigenvalue spectrum  and that&rsquo;s what the next slides decompose.
</p>

<p>
ALGEBRA: Start from quadratic production Y<sub>x</sub> = A<sub>x</sub> K<sub>x</sub>  (1/2)K<sub>x</sub>. First-best: K<sub>x</sub><sup>FB</sup> = A<sub>x</sub>  <sup>FB</sup>. Welfare loss = <sub>x</sub> [Y<sub>x</sub>(K<sup>FB</sup>)  Y<sub>x</sub>(K)] = (1/2)<sub>x</sub> (K<sub>x</sub>  K<sub>x</sub><sup>FB</sup>). Price-quantity duality with unit-slope demand: K<sub>x</sub>  K<sub>x</sub><sup>FB</sup> = <sub>x</sub>, so W = (1/2). From linearization:  =  = M. Hence W = (/2)M = (/2) <sup>T</sup> M  (using M symmetric  (M)<sup>T</sup> = M). Spectral decomposition: M = <sub>j</sub> <sub>j</sub> v<sub>j</sub> v<sub>j</sub><sup>T</sup> (SPD), so M = <sub>j</sub> <sub>j</sub> v<sub>j</sub> v<sub>j</sub><sup>T</sup>. Write  = <sub>j</sub> a<sub>j</sub> v<sub>j</sub>, a<sub>j</sub> = v<sub>j</sub>  . Then <sup>T</sup> M  = <sub>j</sub> a<sub>j</sub>/<sub>j</sub> = <sub>j</sub> (/<sub>j</sub>) a<sub>j</sub>/. So W = (1/2)<sub>j</sub> r<sub>j</sub> a<sub>j</sub> with r<sub>j</sub> = /<sub>j</sub>. Market always helps: need <sub>j</sub> &gt;  j. For   0: M = D + G  I since D = diag(K<sup>FB</sup> + )  I. For  &lt; 0: use G  diag(K<sup>FB</sup>) (diversification bound): M  D + diag(K<sup>FB</sup>) = diag(K<sup>FB</sup>(1+) + ) = diag(K<sup>FB</sup> / + ) =  diag(K<sup>FB</sup>/ + 1)  I.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org793ce8e" class="notitle" data-transition="none">
<h2 id="org793ce8e">Spectral anatomy of welfare loss</h2>
<div style="margin:-2.5em -0.9em 0em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 0em);">

<h3 style="flex:0 0 auto; text-align:left; margin:0.3em 0 0.2em 0.9em;">Intuition: the homogeneous case</h3>

<!-- Key formula box (unlabeled) -->
<div class="boxed-eq" style="flex:0 0 auto; margin:0 1.5em; padding:0.5em 0.8em; border-color:var(--purple); background:#f3eef8; font-size:1em; text-align:center;">
  $\displaystyle\text{DWL} = \frac{1}{2}\sum_{j} \underbrace{\left(\frac{\gamma}{(K+\gamma) + \kappa\, g_j}\right)^2}_{r_j^2:\;\text{resolution failure}} \; a_j^2$
  &emsp; <span style="font-size:0.9em; color:var(--gray);">$g_j$: eigenvalues of $G = W^\top D_B W$</span>
</div>

<!-- Figure: two-column layout  left has animated r-stack, right reveals at last step -->
<div style="flex:1; display:flex; flex-direction:row; padding-top:1.5em; gap:0.5em;">

  <!-- Left column: animated single-panel graph -->
  <div class="r-stack" style="flex:1; min-width:0;">
    <img class="fragment fade-out" data-fragment-index="1"
         src="./diagrams/rj_gj_anim_f0.svg"
         style="width:80%; object-fit:contain;" alt="r_j vs g_j: base curves">
    <img class="fragment current-visible" data-fragment-index="1"
         src="./diagrams/rj_gj_anim_f1.svg"
         style="width:80%; object-fit:contain;" alt="r_j vs g_j: intermediate eigenvalues at =0">
    <img class="fragment current-visible" data-fragment-index="2"
         src="./diagrams/rj_gj_anim_f2.svg"
         style="width:80%; object-fit:contain;" alt="r_j vs g_j: projected onto <0">
    <img class="fragment current-visible" data-fragment-index="3"
         src="./diagrams/rj_gj_anim_f3.svg"
         style="width:80%; object-fit:contain;" alt="r_j vs g_j: local banks">
    <img class="fragment current-visible" data-fragment-index="4"
         src="./diagrams/rj_gj_anim_f4.svg"
         style="width:80%; object-fit:contain;" alt="r_j vs g_j: national banks">
    <img class="fragment" data-fragment-index="5"
         src="./diagrams/rj_gj_anim_f5.svg"
         style="width:80%; object-fit:contain;" alt="r_j vs g_j: all points summary">
  </div>

  <!-- Right column: optimality takeaways (fade out before summary frame) -->
  <div class="fragment" data-fragment-index="3" style="flex:1; min-width:0; display:flex; align-items:flex-start; padding-top:1em;">
    <div style="font-size:0.92em; padding:0 0.5em;">
      <p style="margin:0 0 0.6em 0; color:var(--gray); font-size:0.9em;">Want low $r_j$ everywhere &mdash; which $g_j$ to aim for?</p>
      <p style="margin:0 0 0.5em 0; color:var(--gray); font-size:0.8em;">(zero-mean shocks: only modes on $\mathbf{1}^\perp$ matter)</p>
      <ul style="margin:0; padding-left:0.5em; list-style:none;">
        <li style="margin-bottom:0.6em;">
          <span class="blue">$\kappa > 0$</span>: &ensp;push $g_j$ high &ensp;$\Rightarrow$&ensp; <strong>local banks</strong> ($W = I$, all $g_j = K$)
        </li>
        <li>
          <span class="orange">$\kappa < 0$</span>: &ensp;push $g_j$ low &ensp;$\Rightarrow$&ensp; <strong>national banks</strong> ($W$ uniform, $g_j = 0$ on $\mathbf{1}^\perp$)
        </li>
      </ul>
    </div>
  </div>

</div>

</div><!-- /wrapper -->

<aside class="notes">
<p>
&ldquo;The general decomposition is in the eigenbasis of M  which combines
market depth and the network. In the heterogeneous case, the diagonal
term tilde-D varies across locations, so the eigenvectors of M mix
local scale with network structure. I don&rsquo;t have sharp results there
yet. In the homogeneous case  all locations same depth  the diagonal
is proportional to the identity, so M and G share eigenvectors. That&rsquo;s
where I have clean results, and that&rsquo;s why the next few slides focus
on G.&rdquo;
</p>

<p>
Homogeneous case: all locations have the same depth K, so r<sub>j</sub> becomes an explicit function of g<sub>j</sub>.
</p>

<p>
THEOREM: In the homogeneous case (K<sub>x</sub><sup>FB</sup> = K x), the resolution ratio on eigenmode j is r<sub>j</sub> =  / [(K+) + g<sub>j</sub>], where g<sub>j</sub> is the j-th eigenvalue of G. For  &gt; 0: r<sub>j</sub> is decreasing in g<sub>j</sub> (tight communities resolve better). For  &lt; 0: r<sub>j</sub> is increasing in g<sub>j</sub> (tight communities amplify more). For  = 0: r<sub>j</sub> = /(K+), constant across all modes.
</p>

<p>
ANIMATION WALKTHROUGH:
[Frame 0  base] Three curves. Blue: &gt;0 (shielding), r<sub>j</sub> decreasing in g<sub>j</sub>  tighter communities resolve better. Red: &lt;0 (amplifying), r<sub>j</sub> increasing  tighter communities amplify more. Gray dashed: =0, flat  no network effect.
</p>

<p>
[Click  Frame 1] Take any intermediate network. It has dispersed eigenvalues  some modes are tightly knit (large g<sub>j</sub>), others loosely connected (small g<sub>j</sub>). At =0 they all sit on the dashed line: same r<sub>j</sub> regardless of g<sub>j</sub>.
</p>

<p>
[Click  Frame 2] Now turn on &lt;0. Same eigenvalues (same x-coordinates), but each one slides up to the red curve. The large-g<sub>j</sub> modes now have high failure rates. Dispersion in eigenvalues  dispersion in failure rates. The brace shows the eigenvalue spread that causes the penalty.
</p>

<p>
[Click  Frame 3] Local banks: W = I, all eigenvalues equal K. Single green dot on each curve at the right endpoint. Under &gt;0 this is the minimum of the blue curve  all modes well-resolved. Under &lt;0 this is the worst point on the red curve.
</p>

<p>
[Click  Frame 4] National banks: W uniform, all eigenvalues equal 0. Single green dot on each curve at the left endpoint. Under &lt;0 this is the minimum of the red curve  all modes well-resolved. Under &gt;0 this is the worst point.
</p>

<p>
PUNCHLINE: If kappa &gt; 0, you want g<sub>j</sub> as high as possible  local banks push all eigenvalues to K. If kappa &lt; 0, you want g<sub>j</sub> as low as possible  national banks push all eigenvalues to 0. Both extremes are clean because all eigenvalues collapse to one point.
</p>

<p>
Caveat: these extreme networks may not be feasible steady states, and heterogeneous depth breaks the clean eigenvector separation. But the core intuition  network design should match the friction regime  carries over.
</p>

<p>
ALGEBRA (homogeneous case): K<sub>x</sub><sup>FB</sup> = K x, so D = (K+)I. Then M = (K+)I + G. Since D  I, M and G share eigenvectors {v<sub>j</sub>}. Eigenvalues: <sub>j</sub> = (K+) + g<sub>j</sub>, where Gv<sub>j</sub> = g<sub>j</sub> v<sub>j</sub>. Resolution ratio: r<sub>j</sub> = /<sub>j</sub> = /[(K+) + g<sub>j</sub>]. Range of g<sub>j</sub>: G1 = K1 (row sums), so g<sub>0</sub> = K for v<sub>0</sub> = 1/L. On 1: 0  g<sub>j</sub>  K (upper bound: G  KI since W row-stochastic  <sub>x</sub> W<sub>hx</sub>  1  v<sup>T</sup> Gv = <sub>h</sub> B<sub>h</sub>(Wv)<sub>h</sub>  Kv). Comparative statics: r<sub>j</sub>/g<sub>j</sub> = /<sub>j</sub>  negative when  &gt; 0 (r<sub>j</sub> decreasing in g<sub>j</sub> = shielding improves with tighter communities), positive when  &lt; 0 (amplification worsens). Extreme networks: W = I (local)  G = diag(B), g<sub>j</sub> = B for all j on 1 (if B<sub>h</sub> = K). All eigenvalues at K. W = (1/L)11<sup>T</sup> (national)  G = (K/L)11<sup>T</sup>, g<sub>j</sub> = 0 for j  1. All eigenvalues on 1 equal zero. DWL comparison: W = (1/2)<sub>j</sub> r<sub>j</sub> a<sub>j</sub>. By Jensen (r is convex in g): E[r(g<sub>j</sub>)]  r(E[g<sub>j</sub>]). Pushing all g<sub>j</sub> to one value (eliminating eigenvalue dispersion) minimizes DWL. Which value? Depends on : max g  K (local) optimal for  &gt; 0; min g  0 (national) optimal for  &lt; 0.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-dual-PCA" class="notitle" data-transition="none">
<h2 id="dual-PCA">Dual PCA interpretation</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<h3 style="flex:0 0 auto; text-align:center; margin:0.3em 0 0.1em 0;">Dual reading of $G = W^\top D_B W$</h3>

<p style="flex:0 0 auto; text-align:center; font-size:0.78em; color:var(--gray); margin:0 0 0.3em 0;">
  Cross-sectional PCA: observations = banks, variables = locations, single period.
</p>

<!-- Rosetta table -->
<div style="flex:1; display:flex; align-items:flex-start; justify-content:center; padding-top:0.3em;">
<table style="font-size:0.82em; width:92%;">
<thead>
<tr>
  <th style="width:18%;"></th>
  <th style="width:41%;"><span class="blue">Location view</span> (network)</th>
  <th style="width:41%;"><span class="orange">Bank view</span> (cross-sectional PCA)</th>
</tr>
</thead>
<tbody>
<tr>
  <td>$G_{xy}$</td>
  <td>Co-lending overlap between $x$ and $y$</td>
  <td>Second moment $\mathbb{E}_B[W_x W_y]$</td>
</tr>
<tr>
  <td>$v_j$</td>
  <td>Community of locations (spectral clustering)</td>
  <td>$j$-th principal direction in location space</td>
</tr>
<tr>
  <td>$g_j$</td>
  <td>Internal cohesion of community $j$</td>
  <td>Variance of bank scores $W v_j$ (eigenvalue)</td>
</tr>
<tr>
  <td>$\alpha_j$</td>
  <td>Cohesion from specialized bridges</td>
  <td>Cross-bank dispersion along $v_j$</td>
</tr>
<tr>
  <td>$\beta_j$</td>
  <td>Cohesion from aggregate presence</td>
  <td>Mean-portfolio mass on $v_j$</td>
</tr>
<tr>
  <td>high $\alpha_j/g_j$</td>
  <td>Tightly knit cluster</td>
  <td>Dispersion-dominated axis (banks specialize)</td>
</tr>
<tr>
  <td>small $g_j$</td>
  <td>Peripheral, loosely connected</td>
  <td>Low-variation direction (banks nearly identical)</td>
</tr>
</tbody>
</table>
</div>

<!-- Formula: pinned below figure -->
<div style="flex:0 0 auto; text-align:center; font-size:1.1em; padding:0.2em 0;">
  $$g_j \;=\;v_j^\top G\, v_j\;=\; \underbrace{\sum_{x,y} v_{j,x} v_{j,y} G_{x,y}}_{\text{community cohesion}} \quad | \quad g_j \;=\; \underbrace{v_j^\top \operatorname{Cov}_B(W)\, v_j}_{\alpha_j:\;\text{how banks differ}} \;+\; \underbrace{B_{\text{tot}}\,(v_j \cdot \bar{w})^2}_{\beta_j:\;\text{what they all do}}$$
</div>

</div><!-- /wrapper -->

<aside class="notes">
<p>
This is the Rosetta stone slide. Every object in the model has two readings, and neither is metaphorical  they are algebraically equivalent projections of the same SVD.
</p>

<p>
Important framing for the audience: this is cross-sectional PCA, not time-series PCA. The observations are banks, the variables are locations, and we are in a single period. There is no time dimension.
</p>

<p>
Walk down the rows:
</p>
<ul>
<li>G<sub>xy</sub>: network people see co-lending overlap (shared banks connect x to y). Statisticians see the second moment of bank holdings in locations x and y.</li>
<li>v<sub>j</sub>: network people see a community detected by spectral clustering. In PCA, it is the j-th principal direction  the linear combination of locations along which banks vary most.</li>
<li>g<sub>j</sub>: network cohesion = PCA eigenvalue = variance of bank scores projected onto v<sub>j</sub>.</li>
<li>alpha/beta: where does the cohesion come from? alpha is genuine cross-bank dispersion (specialized niche banks), beta is the common component (the mean portfolio projected onto v<sub>j</sub>).</li>
<li>High alpha/g: most of the mass on this axis comes from banks genuinely differing  they specialize along this direction.</li>
<li>Small g: banks barely differ along this axis  little total variation, whether from dispersion or the mean.</li>

</ul>

<p>
The economic consequences (which modes are well-resolved, which are fragile) come from how g<sub>j</sub> enters the resolution operator r<sub>j</sub>  that&rsquo;s the next slide.
</p>

<p>
TRANSITION: &ldquo;Now let&rsquo;s look at the empirical spectrum  how much mass sits on each mode?&rdquo;
</p>

</aside>
</section>
</section>
<section>
<section id="slide-eigenvalue-spectrum" class="notitle" data-transition="none">
<h2 id="eigenvalue-spectrum">Eigenvalue spectrum</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<!-- Figure: fills available space -->
<div style="flex:1; display:flex; align-items:center; justify-content:center;">
  <!-- EXISTS: ./figures/eigenvalue_spectrum_alpha_beta.svg -->
  <img src="./figures/eigenvalue_spectrum_alpha_beta.svg"
       style="width:80%; height:80%; object-fit:contain;" alt="Eigenvalue spectrum: alpha/beta stacked bars">
</div>

<!-- Formula: pinned below figure -->
<div style="flex:0 0 auto; text-align:center; font-size:1.1em; padding:0.2em 0;">
  $$g_j \;=\;v_j^\top G\, v_j\;=\; \underbrace{\sum_{x,y} v_{j,x} v_{j,y} G_{x,y}}_{\text{community cohesion}} \quad | \quad g_j \;=\; \underbrace{v_j^\top \operatorname{Cov}_B(W)\, v_j}_{\alpha_j:\;\text{how banks differ}} \;+\; \underbrace{B_{\text{tot}}\,(v_j \cdot \bar{w})^2}_{\beta_j:\;\text{what they all do}}$$
</div>

<p style="text-align:right; flex:0 0 auto; padding:0 0 0.2em 0;"><a href="#/slide-data-methodology-appendix" style="color:var(--blue); font-size:0.7em; text-decoration:none;">Data appendix &rarr;</a></p>

</div><!-- /wrapper -->

<aside class="notes">
<p>
Now I take this to the data. One thing I want to be upfront about:
  the US is not homogeneous  county-level market depth varies by orders
  of magnitude. So the eigendecomposition of G that I&rsquo;m about to show
  you characterizes the co-lending topology  along which geographic
  axes banks differentiate, along which they look alike. That&rsquo;s a
  descriptive fact about banking structure, and it doesn&rsquo;t depend on
  the welfare model. The welfare reading  which of these modes are
  well-resolved, which are fragile  that requires the homogeneous
  approximation. How tight that approximation is when tilde-D is
  heterogeneous is something I&rsquo;m still working on."
</p>

<p>
This is the empirical eigenvalue spectrum of G, constructed from 2023 FDIC Summary of Deposits data (~4,500 commercial banks, ~1,800 counties).
</p>

<p>
The spectrum is the fragility profile of the US banking system. Each bar is one eigenmode  one geographic axis along which shocks can load. The height is the eigenvalue g<sub>j</sub>, measuring how much aggregate bank portfolio weight differentiates along that axis.
</p>

<p>
Key features:
</p>
<ul>
<li>g<sub>1</sub> = 3.13e+08 dominates: this is the Perron eigenvalue, capturing the &ldquo;market portfolio&rdquo; of banking. It mixes both consensus (beta, gold) and specialization (alpha, teal).</li>
<li>g<sub>2</sub>/g<sub>1</sub> = 37%: the stiffest partition is the East-West divide (next slide). It is 37% as &ldquo;bankable&rdquo; as the market direction.</li>
<li>Beta concentrates almost entirely in mode 1. Modes 2 and above are nearly pure alpha  they measure differentiation among banks with the mean netted out. This is where all the fragility structure lives.</li>

</ul>

<p>
The remark box states the punchline concisely: the eigenvalue tells you capacity, kappa tells you whether capacity helps. Under kappa &gt; 0 (info friction dominates), high g<sub>j</sub> means low r<sub>j</sub>  well-resolved. Under kappa &lt; 0 (leverage friction dominates), high g<sub>j</sub> means high r<sub>j</sub>  amplified. The spectrum is the same; the welfare reading flips.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-mode-1" class="notitle" data-transition="none">
<h2 id="mode-1">Mode 1 &amp;mdash; the market portfolio</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="two-col" style="flex:1; align-items:start; gap:1em;">
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
    <p style="margin:0 0 0.2em 0; font-size:1.0em; font-weight:600;">Mode 1</p>
    <img src="./figures/gallery_G_1.svg"
         style="max-width:100%; max-height:85%; object-fit:contain;" alt="Mode 1 national choropleth">
    <a href="#/slide-mode1-alignment-appendix" style="color:var(--blue); font-size:0.7em; text-decoration:none;">Bank alignment &rarr;</a>
  </div>
  <div style="display:flex; flex-direction:column; gap:0.4em; height:100%;">
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_1_loading.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 1 location loadings">
    </div>
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_1_bankbar.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 1 bank contributions">
    </div>
  </div>
</div>

</div>

<aside class="notes">
<p>
Mode 1 is the Perron eigenvector  the only mode with all-positive loadings. It does not partition the network; it ranks locations by banking centrality.
</p>

<p>
Left panel (choropleth): v<sub>1</sub> is approximately proportional to K<sup>FB</sup>, the first-best capital allocation. Empirically cos(v<sub>1</sub>, K<sup>FB</sup>) = 0.89  the most central locations are approximately the locations that should receive the most capital. New York, LA, and other financial centers load highest.
</p>

<p>
Right panel (bank bars): JPMorgan Chase contributes 78% of g<sub>1</sub>. One bank dominates the first mode. This is pure size  JPMorgan is the largest US bank by deposits, and its portfolio is closest to &ldquo;the market portfolio&rdquo; of bank lending. The remaining banks (City National 6%, Flagstar 3%, Wells Fargo 2%) contribute much less.
</p>

<p>
The alpha/beta composition of g<sub>1</sub> is roughly 45/55. The beta component (55%) reflects consensus centrality: NY is central because every bank lends there proportionally. The alpha component (45%) reflects bridging centrality: NY is central because it sits where specialized portfolios overlap  one bank connects NY to Charlotte, another connects NY to LA. The empirical 45/55 split places US banking roughly equidistant between these polar cases.
</p>

<p>
This mode is always well-resolved (largest eigenvalue  smallest r<sub>j</sub>) regardless of kappa. It sets the baseline. The interesting question is what happens on modes 2 and beyond.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-mode-2" class="notitle" data-transition="none">
<h2 id="mode-2">Mode 2 &amp;mdash; East vs. West</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="two-col" style="flex:1; align-items:start; gap:1em;">
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
    <p style="margin:0 0 0.2em 0; font-size:1.0em; font-weight:600;">Mode 2</p>
    <img src="./figures/gallery_G_2.svg"
         style="max-width:100%; max-height:92%; object-fit:contain;" alt="Mode 2 national choropleth">
  </div>
  <div style="display:flex; flex-direction:column; gap:0.4em; height:100%;">
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_2_loading.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 2 location loadings">
    </div>
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_2_bankbar.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 2 bank contributions">
    </div>
  </div>
</div>

</div>

<aside class="notes">
<p>
Mode 2 is the stiffest partition  the cleanest cut in the US banking system. g<sub>2</sub>/g<sub>1</sub> = 37.2%.
</p>

<p>
Left panel (choropleth): v<sub>2</sub> loads positively on Los Angeles (~80%), San Francisco, Orange County, Santa Clara, Mecklenburg County NC (Charlotte), and Minnehaha County SD (Sioux Falls). Loads negatively on New York County (-40%). This is the &ldquo;West Coast / national-bank community&rdquo; vs the &ldquo;New York-centered system.&rdquo;
</p>

<p>
Why Charlotte and Sioux Falls? Not economic similarity with LA  institutional history. Bank of America (headquartered in Charlotte via NationsBank merger) and the credit card subsidiaries domiciled in South Dakota share heavy West Coast exposure. The location partition is an artifact of bank consolidation geography.
</p>

<p>
Right panel (bank bars): Top contributors: 21% (Wells Fargo), 15% (second national), 11% City National, 11% BofA, 10% JPMorgan.
</p>

<p>
This is where kappa matters most. g<sub>2</sub> is large (37% of g<sub>1</sub>), so kappa * g<sub>2</sub> is a substantial addition to (or subtraction from) the restoring force mu<sub>2</sub> = (K+gamma) + kappa * g<sub>2</sub>. A shock aligned with the East-West divide  say, a California housing boom or a NY financial crisis  is the one where the banking network helps most (kappa &gt; 0, leverage overcompensates capital flight) or hurts most (kappa &lt; 0, capital flight overcompensates leverage).
</p>

<p>
Both adjustment channels (leverage and capital flight) are ACTIVE on this mode because large banks span the divide. JPMorgan, BofA, Wells Fargo all have portfolios that load on both sides of v<sub>2</sub>  they are the bridges. When kappa &gt; 0, their leverage response injects capital broadly, overcompensating the flight. When kappa &lt; 0, their capital flight dominates, draining the losing side.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-mode-3" class="notitle" data-transition="none">
<h2 id="mode-3">Mode 3</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="two-col" style="flex:1; align-items:start; gap:1em;">
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
    <p style="margin:0 0 0.2em 0; font-size:1.0em; font-weight:600;">Mode 3</p>
    <img src="./figures/gallery_G_3.svg"
         style="max-width:100%; max-height:92%; object-fit:contain;" alt="Mode 3 national choropleth">
  </div>
  <div style="display:flex; flex-direction:column; gap:0.4em; height:100%;">
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_3_loading.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 3 location loadings">
    </div>
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_3_bankbar.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 3 bank contributions">
    </div>
  </div>
</div>

</div>

<aside class="notes">
<p>
Mode 3. g<sub>3</sub>/g<sub>1</sub> = [XX]%. [Describe the geographic partition visible in the choropleth  which regions load positively vs negatively.] Top bank contributors: [read from bankbar SVG]. Relative to mode 2, this captures a finer geographic cut  the next most bankable axis of differentiation in the US system.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-mode-4" class="notitle" data-transition="none">
<h2 id="mode-4">Mode 4</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="two-col" style="flex:1; align-items:start; gap:1em;">
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
    <p style="margin:0 0 0.2em 0; font-size:1.0em; font-weight:600;">Mode 4</p>
    <img src="./figures/gallery_G_4.svg"
         style="max-width:100%; max-height:92%; object-fit:contain;" alt="Mode 4 national choropleth">
  </div>
  <div style="display:flex; flex-direction:column; gap:0.4em; height:100%;">
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_4_loading.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 4 location loadings">
    </div>
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_4_bankbar.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 4 bank contributions">
    </div>
  </div>
</div>

</div>

<aside class="notes">
<p>
Mode 4. g<sub>4</sub>/g<sub>1</sub> = [XX]%. [Describe the geographic partition visible in the choropleth.] Top bank contributors: [read from bankbar SVG]. Each successive mode captures a finer partition  the eigenvalue decay tells you how much &ldquo;bankable variation&rdquo; remains at this scale.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-mode-5" class="notitle" data-transition="none">
<h2 id="mode-5">Mode 5</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="two-col" style="flex:1; align-items:start; gap:1em;">
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
    <p style="margin:0 0 0.2em 0; font-size:1.0em; font-weight:600;">Mode 5</p>
    <img src="./figures/gallery_G_5.svg"
         style="max-width:100%; max-height:92%; object-fit:contain;" alt="Mode 5 national choropleth">
  </div>
  <div style="display:flex; flex-direction:column; gap:0.4em; height:100%;">
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_5_loading.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 5 location loadings">
    </div>
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_5_bankbar.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 5 bank contributions">
    </div>
  </div>
</div>

</div>

<aside class="notes">
<p>
Mode 5. g<sub>5</sub>/g<sub>1</sub> = [XX]%. [Describe the geographic partition visible in the choropleth.] Top bank contributors: [read from bankbar SVG]. By mode 5 we are deep in the alpha component  pure differentiation, no beta. The welfare reading depends entirely on : under  &gt; 0 these mid-spectrum modes are moderately well-resolved; under  &lt; 0 they are moderately fragile.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-mode-10" class="notitle" data-transition="none">
<h2 id="mode-10">Mode 10 &amp;mdash; Hawaii</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="two-col" style="flex:1; align-items:start; gap:1em;">
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
    <p style="margin:0 0 0.2em 0; font-size:1.0em; font-weight:600;">Mode 15</p>
    <img src="./figures/gallery_G_15.svg"
         style="max-width:100%; max-height:92%; object-fit:contain;" alt="Mode 15 national choropleth">
  </div>
  <div style="display:flex; flex-direction:column; gap:0.4em; height:100%;">
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_15_loading.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 15 location loadings">
    </div>
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <img src="./figures/gallery_G_15_bankbar.svg"
           style="max-width:100%; max-height:100%; object-fit:contain;" alt="Mode 15 bank contributions">
    </div>
  </div>
</div>

</div>

<aside class="notes">
<p>
Mode 15. (Speaker notes to be updated.)
</p>

<p>
WHY BOTH ADJUSTMENT CHANNELS ARE DEAD: Hawaiian specialists can&rsquo;t reallocate (they&rsquo;re 100% Hawaii  nowhere to draw capital from). National banks don&rsquo;t notice the shock (their portfolio&rsquo;s projection onto v<sub>10</sub> is approximately zero). Both the leverage spillover and the capital flight spillover are negligible. Hawaii resolves in autarky. kappa is irrelevant for this mode.
</p>

<p>
CONTRAST WITH MODE 2: On mode 2, large banks span the East-West divide  both channels are active, kappa matters, the network is either the solution or the problem. On mode 10, no bank spans the Hawaii-mainland divide  both channels are dead, kappa doesn&rsquo;t matter, the network might as well not exist.
</p>

<p>
The punchline: the eigenvalue spectrum tells you WHERE the kappa question is live (large g modes) and where it&rsquo;s moot (small g modes).
</p>

</aside>
</section>
</section>
<section>
<section id="slide-mode-10-genesis" class="notitle" data-transition="none">
<h2 id="mode-10-genesis">Mode 10 &amp;mdash; genesis</h2>
<div class="two-col" style="margin-top:0.3em; align-items:center;">
  <div style="text-align:center;">
    <img src="./figures/hawaii_deposit_heatmap.svg"
         style="max-width:100%;" alt="Hawaii deposit heatmap">
    <p style="font-size:0.78em; color:var(--gray); margin-top:0.2em;">Deposit concentration across Hawaiian counties</p>
  </div>
  <div style="text-align:center;">
    <img src="./photos/bankofhawaii.webp"
         style="max-width:90%; max-height:85%; object-fit:contain;" alt="First Hawaiian Bank advertisement (1969)">
    <p style="font-size:0.78em; color:var(--gray); margin:0.3em 0 0;">Ad of First Hawaiian Bank (1969)</p>
  </div>
</div>

<aside class="notes">
<p>
Why does mode 10 exist? This slide shows the genesis: the closed oligopoly structure of Hawaiian banking.
</p>

<p>
Left panel: deposit concentration across Hawaiian counties. First Hawaiian, Bank of Hawaii, and Central Pacific hold virtually all deposits and serve Hawaii and nowhere else. The island chain is a self-contained banking system  no national bank has meaningful penetration.
</p>

<p>
Right panel: a Bank of Hawaii ad from 1969  a historical artifact illustrating the island&rsquo;s banking isolation. &ldquo;Your bank  only in Hawaii.&rdquo; This isn&rsquo;t just marketing; it&rsquo;s a structural fact that persists today.
</p>

<p>
The mode exists because the bank IS the geography. Three banks define the entire co-lending structure of four counties, with zero overlap to the mainland. This produces a near-zero eigenvalue  the Hawaii axis has almost no &ldquo;bankable variation&rdquo; from the perspective of the national network. Under  &gt; 0, this mode is poorly resolved (small g<sub>j</sub>  large r<sub>j</sub>). Under  &lt; 0, it&rsquo;s well-resolved.
</p>

<p>
TRANSITION: &ldquo;The eigenvalue spectrum tells us the US banking system has both well-served axes and coverage gaps. The design question is: can we do better?&rdquo;
</p>

</aside>
</section>
</section>
<section>
<section id="slide-org4ff3405" class="title-as-text" data-transition="none">
<h2 id="org4ff3405">The form of integration matters</h2>
<div style="display:grid; grid-template-columns:1fr 1fr; gap:1.5em; align-items:center;">
  <div>
    <ol style="font-size:0.92em;">
      <li class="fragment" data-fragment-index="1" style="margin-bottom:0.5em;">
        <strong>Integration is a matrix, not a scalar.</strong><br>
        Many networks achieve the same steady-state efficiency &mdash; but differ sharply in resilience. The co-lending overlap $G$ is the object that matters.
      </li>
      <li class="fragment" data-fragment-index="2" style="margin-bottom:0.5em;">
        <strong>Contagion structure is portfolio covariance.</strong><br>
        The co-lending network $G$ is exactly as rich as banks are different &mdash; it encodes both the topology of shock transmission and the cross-sectional covariance of bank portfolios.
      </li>
      <li class="fragment" data-fragment-index="3" style="margin-bottom:0.5em;">
        <strong>Fragility is directional.</strong><br>
        The network's eigenmodes decompose shocks into well-resolved and poorly-resolved directions. Which is which depends on the friction environment ($\kappa$).
      </li>
    </ol>
  </div>
  <div style="text-align:center; overflow:visible;">
    <img src="./diagrams/rj_gj_anim_f5.svg" style="width:55%; max-width:none;" alt="Resolution failure vs co-lending overlap">
  </div>
</div>

<aside class="notes">
<p>
Remember the opening question: Canada, Germany, the US  does the form of integration matter? The answer is yes, and now we can say precisely how.
</p>

<p>
[Takeaway 1] Integration is a matrix, not a scalar  many architectures achieve the same efficiency in steady state, but their fragility profiles differ sharply.
</p>

<p>
[Takeaway 2] Fragility is directional  the spectral decomposition separates well-resolved from poorly-resolved shock patterns, and  determines which is which.
</p>

<p>
[Takeaway 3] The optimal architecture depends on the friction regime:  &gt; 0 favors specialization (high g<sub>j</sub> keeps modes well-resolved),  &lt; 0 favors diversification (low g<sub>j</sub> avoids amplification). No single structure is universally safe.
</p>

<p>
The policy implication: not &ldquo;more integration&rdquo; or &ldquo;less integration&rdquo;  the composition matters, and the right composition depends on which friction dominates.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orgcaff36a" data-transition="none">
<h2 id="orgcaff36a">Open directions</h2>
<div class="two-col">
  <div>
    <h3>Empirics</h3>
    <ul style="font-size:0.88em;">
      <li><strong>Contagion patterns</strong>
        <ul>
          <li>Where do shocks propagate, and how large are spillovers?</li>
          <li>Do soft vs. stiff eigenmodes predict differential pass-through?</li>
        </ul>
      </li>
      <li><strong>Capital reallocation after identified shocks</strong>
        <ul>
          <li>Study portfolio and leverage responses to shocks with known geographic footprints</li>
        </ul>
      </li>
      <li><strong>Calibration</strong>
        <ul>
          <li>Identify friction parameters $\gamma$, $\lambda$ from reallocation patterns</li>
        </ul>
      </li>
      <li><strong>Aggregation</strong>
        <ul>
          <li>Cross-sectional variation alone is insufficient &mdash; need to discipline aggregate network effects</li>
        </ul>
      </li>
    </ul>
  </div>
  <div>
    <h3>Theory</h3>
    <ul style="font-size:0.88em;">
      <li><strong>General equilibrium</strong>
        <ul>
          <li>Interbank rate is another source of shock contagion</li>
          <li>How the centralized bank rate interacts with local rates can be complex</li>
        </ul>
      </li>
      <li><strong>Dynamics</strong>
        <ul>
          <li>Convergence speed toward steady state</li>
          <li>Hysteresis: can transitory shocks permanently shift the network?</li>
        </ul>
      </li>
      <li><strong>Anticipated risk</strong>
        <ul>
          <li>Forward-looking banks that value diversification</li>
          <li>Likely needs "master-equation" type toolkit</li>
        </ul>
      </li>
    </ul>
  </div>
</div>

<aside class="notes">
<p>
On the empirical side: the model predicts specific contagion patterns  which locations are hit, how large the spillovers are, and how this varies across eigenmodes. Testing this requires studying capital reallocation after identified shocks with known geographic footprints. The main challenge is aggregation: cross-sectional variation alone cannot fully discipline network-level predictions.
</p>

<p>
On the theory side: dynamics and endogenous network formation. Can transitory shocks permanently reshape the banking network? And what happens when banks choose W endogenously?
</p>

<p>
Thank you.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-sources-appendix" data-transition="none">
<h2 id="sources-appendix">Sources: Banking system comparison</h2>
<table class="hook-table" style="width:100%; font-size:0.85em; margin-bottom:0.6em;">
<thead>
<tr>
  <th style="width:22%"></th>
  <th style="width:26%">Canada</th>
  <th style="width:26%">Germany</th>
  <th style="width:26%">US</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Number of banks<sup>1</sup></td>
  <td> 88 banks</td>
  <td> 1,360 credit institutions</td>
  <td> 4,600 banks</td>
</tr>
<tr>
  <td>Local banking footprint<sup>2</sup></td>
  <td> 6% outside Big-6</td>
  <td> 25.6% at savings + cooperative banks</td>
  <td> 11.3% at community banks</td>
</tr>
<tr>
  <td>Interbank lending<sup>3</sup><br>
    <span style="font-size:0.75em; opacity:0.85;">(loans to banks / total assets)</span>
  </td>
  <td>Low</td>
  <td> 20.6%</td>
  <td> 1.8%</td>
</tr>
</tbody>
</table>

<ol style="font-size:0.78em; line-height:1.8;">
  <li>Bank counts &mdash; Canadian Bankers Assoc.; Deutsche Bundesbank; FDIC BankFind</li>
  <li>Local footprint &mdash; IMF FSAP (Canada); Bundesbank (Germany); FDIC Quarterly Banking Profile (US)</li>
  <li>Interbank &mdash; ECB WP &ldquo;The Interbank Market Puzzle&rdquo;; BoC &ldquo;What Drives Interbank Loans?&rdquo;</li>
</ol>
<p style="text-align:right; margin-top:0.3em;"><a href="#/slide-fifty-ways" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Back</a></p>
</section>
</section>
<section>
<section id="slide-data-methodology-appendix" class="notitle" data-transition="none">
<h2 id="data-methodology-appendix">Data &amp; Methodology</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<h3 style="margin:0 0 0.3em 0;">Data &amp; Methodology</h3>

<div style="flex:1; display:flex; gap:1.2em; align-items:start; overflow-y:auto;">

  <!-- LEFT (55%): Data sources & sample -->
  <div style="flex:3;">

    <div class="box" style="border-left-color:var(--blue); background:rgba(66,133,244,0.04); font-size:0.82em;">
      <p class="box-title" style="color:var(--blue);">Data sources</p>
      <ul style="margin:0; padding-left:1.2em; line-height:1.5;">
        <li><strong>FDIC Summary of Deposits (SOD) 2023</strong> &mdash; branch-level deposits for all FDIC-insured institutions. Branches aggregated to county level.</li>
        <li><strong>Call Reports (FFIEC 031/041)</strong> &mdash; C&amp;I loans (RCON3387) + agricultural loans (RCON3386), quarterly averages across 2023 Q1&ndash;Q4. Fallback to RCFD1766/1590 when RCON missing.</li>
      </ul>
    </div>

    <div class="box" style="border-left-color:var(--gray); background:rgba(0,0,0,0.02); font-size:0.82em; margin-top:0.4em;">
      <p class="box-title" style="color:var(--gray);">Sample filters (sequential)</p>
      <ol style="margin:0; padding-left:1.4em; line-height:1.5;">
        <li>Commercial bank entities only</li>
        <li>Exclude credit-card banks, trust companies, foreign subsidiaries, broker-dealers</li>
        <li>Domestic deposit share &ge; 65%</li>
        <li>Positive assets and domestic deposits</li>
        <li>Internet bank filter: single-county banks with deposits/branch &gt; $500M or brokered share &gt; 50%</li>
      </ol>
    </div>

    <div class="box" style="border-left-color:var(--green); background:rgba(27,120,55,0.04); font-size:0.82em; margin-top:0.4em;">
      <p class="box-title" style="color:var(--green);">Final sample</p>
      <table style="font-size:0.95em; width:100%;">
        <tr><td>Banks (post-BHC aggregation)</td><td style="text-align:right;"><strong>3,918</strong></td></tr>
        <tr><td>Counties</td><td style="text-align:right;"><strong>3,139</strong></td></tr>
        <tr><td>Total deposits</td><td style="text-align:right;"><strong>$17.8 T</strong></td></tr>
      </table>
    </div>
  </div>

  <!-- RIGHT (45%): Constructing W, B, G -->
  <div style="flex:2.5;">

    <div class="box" style="border-left-color:var(--orange); background:rgba(230,126,34,0.04); font-size:0.82em;">
      <p class="box-title" style="color:var(--orange);">Bank lending capacity $B_h$</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        $B_h =$ annual average of (C&amp;I + agricultural loans) across 2023 Q1&ndash;Q4.
        Multi-bank holding companies: subsidiaries collapsed to single entity, $B_h$ summed across all subs.
      </p>
    </div>

    <div class="box" style="border-left-color:var(--purple); background:rgba(142,68,173,0.04); font-size:0.82em; margin-top:0.4em;">
      <p class="box-title" style="color:var(--purple);">Geographic weights $W_{hx}$ (branch spec)</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        $W_{hx} = \dfrac{\text{branches of } h \text{ in county } x}{\sum_{x'} \text{branches of } h \text{ in } x'}$
      </p>
      <p style="margin:0.2em 0; font-size:0.92em; color:var(--gray);">
        Row-stochastic: each bank&rsquo;s row sums to 1. Equal weight per branch.
      </p>
    </div>

    <div class="box" style="border-left-color:var(--teal); background:rgba(0,128,128,0.04); font-size:0.82em; margin-top:0.4em;">
      <p class="box-title" style="color:var(--teal);">Co-lending operator $G$</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        $G = W^\top D_B\, W$ &ensp; where $D_B = \operatorname{diag}(B_h)$
      </p>
      <p style="margin:0.2em 0; font-size:0.92em; line-height:1.5;">
        $G$ is $L \times L$ (counties), symmetric, PSD by construction.<br>
        $K_x = [W^\top B]_x = $ first-best lending capital per county.<br>
        Identity: $G \cdot \mathbf{1} = K$.
      </p>
    </div>

    <div class="box" style="border-left-color:var(--red); background:#fbeef0; font-size:0.82em; margin-top:0.4em;">
      <p class="box-title" style="color:var(--red);">Shock propagation</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        $\phi = M^{-1}\varepsilon$, &ensp; $M = \operatorname{diag}(K + \gamma) + \kappa\, G$<br>
        Shock: $\varepsilon_x = 0.01 \times K_x$ (1% of county capital).<br>
        $\kappa = +0.50$ (shield) &ensp;|&ensp; $\kappa = -0.50$ (amplify).
      </p>
    </div>

  </div>

</div>

<p style="text-align:right; margin-top:auto; padding:0.2em 0;">
  <a href="#/slide-spectral-methodology-appendix" style="color:var(--blue); font-size:0.7em; text-decoration:none;">Spectral methodology &rarr;</a> &ensp;
  <a href="#/slide-eigenvalue-spectrum" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Back to spectrum</a> &ensp;
  <a href="#/slide-grapes-colending" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Back to colending</a>
</p>

</div>

<aside class="notes">
<p>
TWO DATA SOURCES, ONE MATRIX.
</p>

<p>
The geography comes from SOD  every physical branch of every FDIC-insured bank, aggregated to county level. This gives us the W matrix: how each bank distributes its physical presence across counties. We use branch counts (equal weight per branch), not deposit dollars, to avoid headquarters-booking distortions where a bank like JPMorgan books 184x its mean deposits in Manhattan.
</p>

<p>
The lending capacity comes from Call Reports. B<sub>h</sub> is the annual average of C&amp;I plus agricultural loans across 2023 Q1Q4, not total assets or total deposits. This is the stock of commercial lending  the relevant quantity for the model&rsquo;s &ldquo;how much capital does bank h direct to the real economy&rdquo; question.
</p>

<p>
SAMPLE FILTERS. We start with the full FDIC universe and apply five sequential filters. The key non-obvious ones: (1) domestic deposit share &gt;= 65% removes banks that are primarily foreign-deposit vehicles. (2) The internet bank filter catches entities like Ally or Marcus that have one or two physical branches but enormous deposit bases  these would create spurious geographic concentration. The criterion is deposits/branch &gt; $500M or brokered share &gt; 50%. Multi-bank holding companies are collapsed: subsidiaries aggregated to a single entity using the largest-B<sub>h</sub> sub as representative. Branch counts and B<sub>h</sub> are summed across all subs.
</p>

<p>
G = W<sup>T</sup> D<sub>B</sub> W. Each entry G<sub>xy</sub> measures how much lending capital is shared between counties x and y through common banks, weighted by how concentrated each bank is in those locations. PSD by construction (it&rsquo;s a Gram matrix). The row sum G * 1 = K gives first-best lending capital per county  the total capital directed to x if every bank lends proportionally to its branch footprint.
</p>

<p>
SHOCK PROPAGATION. The Leontief system M phi = epsilon inverts a matrix M that combines the diagonal K + gamma (autarky friction) with kappa * G (network). The shock is proportional: 1% of each county&rsquo;s own K<sub>x</sub>, so cross-county comparisons are apples-to-apples. Kappa &gt; 0 means the network shares the burden (shield); kappa &lt; 0 means it amplifies.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-spectral-methodology-appendix" class="notitle" data-transition="none">
<h2 id="spectral-methodology-appendix">Spectral Methodology</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<h3 style="margin:0 0 0.3em 0;">Spectral Methodology</h3>

<div style="flex:1; display:flex; gap:1.2em; align-items:start; overflow-y:auto;">

  <!-- LEFT: Eigendecomposition + location loadings -->
  <div style="flex:1;">

    <div class="box" style="border-left-color:var(--teal); background:rgba(0,128,128,0.04); font-size:0.82em;">
      <p class="box-title" style="color:var(--teal);">Eigendecomposition</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        $G = V \Lambda V^\top$, &ensp; $\Lambda = \operatorname{diag}(g_1 \ge g_2 \ge \cdots \ge g_L \ge 0)$
      </p>
      <p style="margin:0.2em 0; font-size:0.92em; color:var(--gray); line-height:1.5;">
        <strong>Sign normalization:</strong> for each $v_j$, the entry with the largest absolute value is set positive.
        For mode 1 (Perron vector of a non-negative matrix), this guarantees all entries $\ge 0$.
      </p>
    </div>

    <div class="box" style="border-left-color:var(--blue); background:rgba(66,133,244,0.04); font-size:0.82em; margin-top:0.4em;">
      <p class="box-title" style="color:var(--blue);">Location loading maps (choropleth)</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        Raw entry $v_j(x)$ is sign-preserving log-compressed for display:
      </p>
      <p style="margin:0.2em 0; text-align:center;">
        $v_j^{\text{display}}(x) = \operatorname{sign}\!\big(v_j(x)\big)\;\ln\!\big(1000\,|v_j(x)| + 1\big)$
      </p>
      <p style="margin:0.2em 0; font-size:0.92em; color:var(--gray); line-height:1.5;">
        Diverging scale: teal ($v > 0$) &harr; brown ($v < 0$). Limits: $\pm\ln(1001)$.
      </p>
    </div>

    <div class="box" style="border-left-color:var(--green); background:rgba(27,120,55,0.04); font-size:0.82em; margin-top:0.4em;">
      <p class="box-title" style="color:var(--green);">Top-10 loading bars</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        Counties ranked by $v_j(x)^2$. Bar length is the raw eigenvector entry $v_j(x)$, displayed as a percentage
        (e.g.&nbsp;0.05 &rarr; &ldquo;5.0%&rdquo;). Since $\|v_j\|=1$, the entries are naturally in $[-1,1]$.
        Bar direction and color mirror the map: right/teal for positive, left/brown for negative.
      </p>
    </div>

  </div>

  <!-- RIGHT: Bank bars + alpha/beta -->
  <div style="flex:1;">

    <div class="box" style="border-left-color:var(--orange); background:rgba(230,126,34,0.04); font-size:0.82em;">
      <p class="box-title" style="color:var(--orange);">Eigenmode bank bars</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        Bank $h$&rsquo;s share of eigenvalue $g_j$:
      </p>
      <p style="margin:0.2em 0; text-align:center;">
        $s_{hj} = \dfrac{B_h\,(w_h \cdot v_j)^2}{g_j}$, &ensp; where &ensp; $w_h \cdot v_j = \sum_x W_{hx}\, v_j(x)$
      </p>
      <p style="margin:0.2em 0; font-size:0.92em; color:var(--gray); line-height:1.5;">
        Shares sum to 1 by construction: $g_j = \sum_h B_h\,(w_h \cdot v_j)^2$, so $s_{hj}$ is the fraction of $g_j$ attributable to bank $h$.<br>
        Sign convention: bar extends right (teal) if $w_h \cdot v_j \ge 0$, left (brown) otherwise.
        Top 10 banks shown; remainder pooled as &ldquo;Other.&rdquo;
      </p>
    </div>

    <div class="box" style="border-left-color:var(--purple); background:rgba(142,68,173,0.04); font-size:0.82em; margin-top:0.4em;">
      <p class="box-title" style="color:var(--purple);">$\alpha$/$\beta$ decomposition</p>
      <p style="margin:0.2em 0; line-height:1.5;">
        Each eigenvalue decomposes as $g_j = \alpha_j + \beta_j$:
      </p>
      <p style="margin:0.2em 0; text-align:center; line-height:1.8;">
        $\bar{w} = K / B_{\text{total}}$ &ensp; (capital-share vector)<br>
        $\beta_j = B_{\text{total}}\,(v_j \cdot \bar{w})^2$ &ensp; (aggregate component)<br>
        $\alpha_j = g_j - \beta_j \ge 0$ &ensp; (specialization component)
      </p>
      <p style="margin:0.2em 0; font-size:0.92em; color:var(--gray); line-height:1.5;">
        $\beta_j$ measures alignment with the market portfolio $\bar{w}$: how much of $g_j$ is explained by aggregate capital distribution.
        $\alpha_j = B_{\text{total}} \operatorname{Var}_B(w_h \cdot v_j)$ captures cross-bank specialization &mdash; the bridging structure.
        $\beta$ concentrates in mode 1; higher modes are mostly $\alpha$.
      </p>
    </div>

  </div>

</div>

<p style="text-align:right; margin-top:auto; padding:0.2em 0;">
  <a href="#/slide-data-methodology-appendix" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Data appendix</a> &ensp;
  <a href="#/slide-eigenvalue-spectrum" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Back to spectrum</a>
</p>

</div>

<aside class="notes">
<p>
This slide explains what the charts in the eigenmode gallery actually show.
</p>

<p>
EIGENDECOMPOSITION. G is symmetric PSD, so we get a full orthonormal eigenbasis. Eigenvalues are non-negative and sorted descending. The sign ambiguity (eigenvectors are defined up to +/- flip) is resolved by requiring the largest-magnitude entry to be positive. For mode 1, since G is non-negative, the Perron-Frobenius theorem guarantees v<sub>1</sub> &gt;= 0 everywhere, so this convention just confirms the natural sign.
</p>

<p>
LOCATION LOADING MAPS. The raw eigenvector entries v<sub>j</sub>(x) are extremely heavy-tailed  a few counties load at 10-50% while most are near zero. A linear color scale would wash out all but the peaks. The signed log transform sign(v) * ln(1000|v| + 1) compresses this range while preserving sign. The factor 1000 inside the log sets the &ldquo;knee&rdquo;  entries below ~0.1% are compressed hard, entries above are spread out. The teal/brown diverging palette makes it immediately visible which counties load in the same direction (co-move under this mode) and which load oppositely.
</p>

<p>
TOP-10 LOADING BARS. Counties ranked by v<sub>j</sub>(x)<sup>2</sup>, not |v<sub>j</sub>(x)|. The squared loading is the variance contribution  it measures how much county x contributes to the spatial pattern of mode j. The bars show the raw eigenvector entry v<sub>j</sub>(x) formatted as a percentage: 0.05 displays as &ldquo;5.0%&rdquo;. This is not a percentage of anything  v<sub>j</sub> is a unit vector (||v<sub>j</sub>|| = 1), so entries live in [-1, 1] and the percent formatting is just a convenient way to read small numbers. The sign tells you which side of the mode the county is on.
</p>

<p>
BANK BARS. Build s<sub>hj</sub> in three steps. (1) The inner product w<sub>h</sub> . v<sub>j</sub> projects bank h&rsquo;s geographic portfolio onto the eigenvector  it measures how much bank h&rsquo;s footprint is aligned with spatial pattern j. (2) Squaring removes the sign and gives intensity of alignment  a bank on the teal side and a bank on the brown side both &ldquo;participate&rdquo; in the pattern equally. (3) Multiplying by B<sub>h</sub> converts to dollars: B<sub>h</sub> (w<sub>h</sub> . v<sub>j</sub>)<sup>2</sup> is the dollars of lending that bank h channels through pattern j. Summing across banks gives g<sub>j</sub>  the total dollars organized along this axis. Dividing gives s<sub>hj</sub> = B<sub>h</sub> (w<sub>h</sub> . v<sub>j</sub>)<sup>2</sup> / g<sub>j</sub>, literally bank h&rsquo;s dollar share of the eigenvalue. The shares sum to 1 exactly  the bank bar chart is a pie chart of &ldquo;who puts money into this spatial pattern.&rdquo;
</p>

<p>
The sign of w<sub>h</sub> . v<sub>j</sub> tells you which side the bank is on: teal bars (positive) are banks concentrated in positive-loading counties, brown bars (negative) in negative-loading counties. This is the duality: v<sub>j</sub> tells you which locations form the community, the bank bars tell you which banks create it through their portfolios.
</p>

<p>
WHAT IS g<sub>j</sub>? Not &ldquo;total lending in urban counties&rdquo; or &ldquo;total lending in rural counties.&rdquo; It is the total lending that is geographically organized along the urban/rural axis  the dollars that discriminate between the two sides. A diversified bank spread equally across both contributes zero: its money is there, but it carries no information about the divide. Specialist banks on either side contribute all of g<sub>j</sub>. In network terms: g<sub>j</sub> is the dollars that the two sides of the pattern don&rsquo;t share  the lending that makes them distinct communities rather than one blended whole. Parseval guarantees all modes add up: sum<sub>j</sub> g<sub>j</sub> = tr(G) = sum<sub>h</sub> B<sub>h</sub> HHI<sub>h</sub>, the total dollars of geographically concentrated lending.
</p>

<p>
ALPHA/BETA. The decomposition g<sub>j</sub> = beta<sub>j</sub> + alpha<sub>j</sub> is the variance identity E[X<sup>2</sup>] = (E[X])<sup>2</sup> + Var(X), applied to X = w<sub>h</sub> . v<sub>j</sub> with B-weights.
</p>

<p>
beta<sub>j</sub> = B<sub>total</sub> * (w<sub>bar</sub> . v<sub>j</sub>)<sup>2</sup>, where w<sub>bar</sub> = K / B<sub>total</sub> is the market portfolio. This is the dollars of separation that would exist if every bank were identical, all holding w<sub>bar</sub>. It measures the aggregate tilt of the banking system toward one side of the pattern. For mode 1, beta is large because v<sub>1</sub>  w<sub>bar</sub>  the dominant mode roughly IS the aggregate capital distribution.
</p>

<p>
alpha<sub>j</sub> = g<sub>j</sub> - beta<sub>j</sub> = B<sub>total</sub> * Var<sub>B</sub>(w<sub>h</sub> . v<sub>j</sub>). This is the extra dollars of separation created by banks being different from each other. Even if the system is balanced on average (beta  0), individual banks can specialize on opposite sides, and both pump real dollars into the mode. Bank heterogeneity can only add to the eigenvalue, never subtract  Var &gt;= 0.
</p>

<p>
Network reading: alpha<sub>j</sub> is where the community structure lives. High alpha means banks choose different sides of the pattern  specialist lenders that create dense co-lending links within their community but not across. The dollars of specialization are the dollars that give the network its off-diagonal structure. Higher modes are almost pure alpha: bridging patterns that cannot be explained by the aggregate distribution alone.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-grapes-colending-appendix" class="notitle" data-transition="none">
<h2 id="grapes-colending-appendix">Colending examples</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<h3 style="margin:0 0 0.3em 0;">Colending maps &mdash; additional examples</h3>

<!-- Row 1: Manhattan + LA -->
<div style="flex:1; display:flex; gap:0.8em; justify-content:center; align-items:center;">
  <div style="text-align:center;">
    <img src="./figures/colending_NY_manhattan.svg" style="max-height:55%; max-width:55%;" alt="Manhattan colending">
    <p style="font-size:0.72em; color:var(--gray); margin:0;">New York County, NY</p>
  </div>
  <div style="text-align:center;">
    <img src="./figures/colending_CA_la.svg" style="max-height:55%; max-width:55%;" alt="LA colending">
    <p style="font-size:0.72em; color:var(--gray); margin:0;">Los Angeles County, CA</p>
  </div>
</div>

<!-- Row 2: Bolivar MS + Cass ND -->
<div style="flex:1; display:flex; gap:0.8em; justify-content:center; align-items:center;">
  <div style="text-align:center;">
    <img src="./figures/colending_MS_bolivar.svg" style="max-height:55%; max-width:55%;" alt="Bolivar MS colending">
    <p style="font-size:0.72em; color:var(--gray); margin:0;">Bolivar County, MS</p>
  </div>
  <div style="text-align:center;">
    <img src="./figures/colending_ND_cass.svg" style="max-height:55%; max-width:55%;" alt="Cass ND colending">
    <p style="font-size:0.72em; color:var(--gray); margin:0;">Cass County, ND</p>
  </div>
</div>

<p style="text-align:right; margin-top:auto; padding:0.2em 0;"><a href="#/slide-grapes-colending" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Back</a></p>

</div>
</section>
</section>
<section>
<section id="slide-grapes-shock-appendix" class="notitle" data-transition="none">
<h2 id="grapes-shock-appendix">Shock examples</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<h3 style="margin:0 0 0.3em 0;">Shock maps &mdash; additional examples</h3>

<!-- Row 1: Manhattan amplify / shield -->
<div style="flex:1; display:flex; gap:0.8em; justify-content:center; align-items:center;">
  <div style="text-align:center;">
    <img src="./figures/shock_amplify_kn0.50_g1.00_NY_manhattan.svg" style="max-height:55%; max-width:55%;" alt="Manhattan amplify">
    <p style="font-size:0.72em; color:var(--gray); margin:0;">New York County &mdash; amplify ($\kappa = -0.50$)</p>
  </div>
  <div style="text-align:center;">
    <img src="./figures/shock_shield_kp0.50_g1.00_NY_manhattan.svg" style="max-height:55%; max-width:55%;" alt="Manhattan shield">
    <p style="font-size:0.72em; color:var(--gray); margin:0;">New York County &mdash; shield ($\kappa = +0.50$)</p>
  </div>
</div>

<!-- Row 2: LA amplify / shield -->
<div style="flex:1; display:flex; gap:0.8em; justify-content:center; align-items:center;">
  <div style="text-align:center;">
    <img src="./figures/shock_amplify_kn0.50_g1.00_CA_la.svg" style="max-height:55%; max-width:55%;" alt="LA amplify">
    <p style="font-size:0.72em; color:var(--gray); margin:0;">Los Angeles County &mdash; amplify ($\kappa = -0.50$)</p>
  </div>
  <div style="text-align:center;">
    <img src="./figures/shock_shield_kp0.50_g1.00_CA_la.svg" style="max-height:55%; max-width:55%;" alt="LA shield">
    <p style="font-size:0.72em; color:var(--gray); margin:0;">Los Angeles County &mdash; shield ($\kappa = +0.50$)</p>
  </div>
</div>

<p style="text-align:right; margin-top:auto; padding:0.2em 0;"><a href="#/slide-grapes-shock-amplify" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Back (amplify)</a> &ensp; <a href="#/slide-grapes-shock-shield" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Back (shield)</a></p>

</div>
</section>
</section>
<section>
<section id="slide-slide-mode1-alignment-appendix" class="notitle" data-transition="none">
<h2 id="slide-mode1-alignment-appendix">Mode 1 &amp;mdash; bank alignment</h2>
<div style="margin:-2.5em -0.9em -1em -0.9em; display:flex; flex-direction:column; height:calc(100% + 2.5em + 1em);">

<div class="two-col" style="flex:1; align-items:start; gap:1em;">
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
    <p style="margin:0 0 0.2em 0; font-size:0.9em; font-weight:600;">Top banks by lending capacity</p>
    <img src="./figures/gallery_G_1_alignment.svg"
         style="max-width:100%; max-height:92%; object-fit:contain;" alt="Mode 1 alignment by lending capacity">
  </div>
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
    <p style="margin:0 0 0.2em 0; font-size:0.9em; font-weight:600;">Top banks by eigenvalue contribution</p>
    <img src="./figures/gallery_G_1_alignment_top.svg"
         style="max-width:100%; max-height:92%; object-fit:contain;" alt="Mode 1 alignment by eigenvalue share">
  </div>
</div>

<p style="text-align:right; margin-top:auto; padding:0.2em 0;"><a href="#/mode-1" style="color:var(--blue); font-size:0.7em; text-decoration:none;">&larr; Back</a></p>

</div>
</section>
</section>
</div>
</div>
<script>
/*!
 * reveal.js 5.2.0
 * https://revealjs.com
 * MIT licensed
 *
 * Copyright (C) 2011-2024 Hakim El Hattab, https://hakim.se
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Reveal=t()}(this,(function(){"use strict";const e=(e,t)=>{for(let i in t)e[i]=t[i];return e},t=(e,t)=>Array.from(e.querySelectorAll(t)),i=(e,t,i)=>{i?e.classList.add(t):e.classList.remove(t)},s=e=>{if("string"==typeof e){if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;if(e.match(/^-?[\d\.]+$/))return parseFloat(e)}return e},a=(e,t)=>{e.style.transform=t},n=(e,t)=>{let i=e.matches||e.matchesSelector||e.msMatchesSelector;return!(!i||!i.call(e,t))},r=(e,t)=>{if("function"==typeof e.closest)return e.closest(t);for(;e;){if(n(e,t))return e;e=e.parentNode}return null},o=e=>{let t=(e=e||document.documentElement).requestFullscreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;t&&t.apply(e)},l=e=>{let t=document.createElement("style");return t.type="text/css",e&&e.length>0&&(t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))),document.head.appendChild(t),t},d=()=>{let e={};location.search.replace(/[A-Z0-9]+?=([\w\.%-]*)/gi,(t=>{e[t.split("=").shift()]=t.split("=").pop()}));for(let t in e){let i=e[t];e[t]=s(unescape(i))}return void 0!==e.dependencies&&delete e.dependencies,e},c={mp4:"video/mp4",m4a:"video/mp4",ogv:"video/ogg",mpeg:"video/mpeg",webm:"video/webm"},h=navigator.userAgent,u=/(iphone|ipod|ipad|android)/gi.test(h)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,g=/android/gi.test(h);var v=function(e){if(e){var t=function(e){return[].slice.call(e)},i=3,s=[],a=null,n="requestAnimationFrame"in e?function(){e.cancelAnimationFrame(a),a=e.requestAnimationFrame((function(){return o(s.filter((function(e){return e.dirty&&e.active})))}))}:function(){},r=function(e){return function(){s.forEach((function(t){return t.dirty=e})),n()}},o=function(e){e.filter((function(e){return!e.styleComputed})).forEach((function(e){e.styleComputed=h(e)})),e.filter(u).forEach(g);var t=e.filter(c);t.forEach(d),t.forEach((function(e){g(e),l(e)})),t.forEach(v)},l=function(e){return e.dirty=0},d=function(e){e.availableWidth=e.element.parentNode.clientWidth,e.currentWidth=e.element.scrollWidth,e.previousFontSize=e.currentFontSize,e.currentFontSize=Math.min(Math.max(e.minSize,e.availableWidth/e.currentWidth*e.previousFontSize),e.maxSize),e.whiteSpace=e.multiLine&&e.currentFontSize===e.minSize?"normal":"nowrap"},c=function(e){return 2!==e.dirty||2===e.dirty&&e.element.parentNode.clientWidth!==e.availableWidth},h=function(t){var i=e.getComputedStyle(t.element,null);return t.currentFontSize=parseFloat(i.getPropertyValue("font-size")),t.display=i.getPropertyValue("display"),t.whiteSpace=i.getPropertyValue("white-space"),!0},u=function(e){var t=!1;return!e.preStyleTestCompleted&&(/inline-/.test(e.display)||(t=!0,e.display="inline-block"),"nowrap"!==e.whiteSpace&&(t=!0,e.whiteSpace="nowrap"),e.preStyleTestCompleted=!0,t)},g=function(e){e.element.style.whiteSpace=e.whiteSpace,e.element.style.display=e.display,e.element.style.fontSize=e.currentFontSize+"px"},v=function(e){e.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:e.previousFontSize,newValue:e.currentFontSize,scaleFactor:e.currentFontSize/e.previousFontSize}}))},p=function(e,t){return function(){e.dirty=t,e.active&&n()}},m=function(e){return function(){s=s.filter((function(t){return t.element!==e.element})),e.observeMutations&&e.observer.disconnect(),e.element.style.whiteSpace=e.originalStyle.whiteSpace,e.element.style.display=e.originalStyle.display,e.element.style.fontSize=e.originalStyle.fontSize}},f=function(e){return function(){e.active||(e.active=!0,n())}},y=function(e){return function(){return e.active=!1}},b=function(e){e.observeMutations&&(e.observer=new MutationObserver(p(e,1)),e.observer.observe(e.element,e.observeMutations))},w={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in e&&{subtree:!0,childList:!0,characterData:!0}},E=null,S=function(){e.clearTimeout(E),E=e.setTimeout(r(2),k.observeWindowDelay)},R=["resize","orientationchange"];return Object.defineProperty(k,"observeWindow",{set:function(t){var i="".concat(t?"add":"remove","EventListener");R.forEach((function(t){e[i](t,S)}))}}),k.observeWindow=!0,k.observeWindowDelay=100,k.fitAll=r(i),k}function A(e,t){var a=Object.assign({},w,t),r=e.map((function(e){var t=Object.assign({},a,{element:e,active:!0});return function(e){e.originalStyle={whiteSpace:e.element.style.whiteSpace,display:e.element.style.display,fontSize:e.element.style.fontSize},b(e),e.newbie=!0,e.dirty=!0,s.push(e)}(t),{element:e,fit:p(t,i),unfreeze:f(t),freeze:y(t),unsubscribe:m(t)}}));return n(),r}function k(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e?A(t(document.querySelectorAll(e)),i):A([e],i)[0]}}("undefined"==typeof window?null:window);class p{constructor(e){this.Reveal=e,this.startEmbeddedIframe=this.startEmbeddedIframe.bind(this)}shouldPreload(e){if(this.Reveal.isScrollView())return!0;let t=this.Reveal.getConfig().preloadIframes;return"boolean"!=typeof t&&(t=e.hasAttribute("data-preload")),t}load(e,i={}){e.style.display=this.Reveal.getConfig().display,t(e,"img[data-src], video[data-src], audio[data-src], iframe[data-src]").forEach((e=>{("IFRAME"!==e.tagName||this.shouldPreload(e))&&(e.setAttribute("src",e.getAttribute("data-src")),e.setAttribute("data-lazy-loaded",""),e.removeAttribute("data-src"))})),t(e,"video, audio").forEach((e=>{let i=0;t(e,"source[data-src]").forEach((e=>{e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src"),e.setAttribute("data-lazy-loaded",""),i+=1})),u&&"VIDEO"===e.tagName&&e.setAttribute("playsinline",""),i>0&&e.load()}));let s=e.slideBackgroundElement;if(s){s.style.display="block";let t=e.slideBackgroundContentElement,a=e.getAttribute("data-background-iframe");if(!1===s.hasAttribute("data-loaded")){s.setAttribute("data-loaded","true");let n=e.getAttribute("data-background-image"),r=e.getAttribute("data-background-video"),o=e.hasAttribute("data-background-video-loop"),l=e.hasAttribute("data-background-video-muted");if(n)/^data:/.test(n.trim())?t.style.backgroundImage=`url(${n.trim()})`:t.style.backgroundImage=n.split(",").map((e=>`url(${((e="")=>encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)))(decodeURI(e.trim()))})`)).join(",");else if(r){let e=document.createElement("video");o&&e.setAttribute("loop",""),(l||this.Reveal.isSpeakerNotes())&&(e.muted=!0),u&&(e.muted=!0,e.setAttribute("playsinline","")),r.split(",").forEach((t=>{const i=document.createElement("source");i.setAttribute("src",t);let s=((e="")=>c[e.split(".").pop()])(t);s&&i.setAttribute("type",s),e.appendChild(i)})),t.appendChild(e)}else if(a&&!0!==i.excludeIframes){let e=document.createElement("iframe");e.setAttribute("allowfullscreen",""),e.setAttribute("mozallowfullscreen",""),e.setAttribute("webkitallowfullscreen",""),e.setAttribute("allow","autoplay"),e.setAttribute("data-src",a),e.style.width="100%",e.style.height="100%",e.style.maxHeight="100%",e.style.maxWidth="100%",t.appendChild(e)}}let n=t.querySelector("iframe[data-src]");n&&this.shouldPreload(s)&&!/autoplay=(1|true|yes)/gi.test(a)&&n.getAttribute("src")!==a&&n.setAttribute("src",a)}this.layout(e)}layout(e){Array.from(e.querySelectorAll(".r-fit-text")).forEach((e=>{v(e,{minSize:24,maxSize:.8*this.Reveal.getConfig().height,observeMutations:!1,observeWindow:!1})}))}unload(e){e.style.display="none";let i=this.Reveal.getSlideBackground(e);i&&(i.style.display="none",t(i,"iframe[src]").forEach((e=>{e.removeAttribute("src")}))),t(e,"video[data-lazy-loaded][src], audio[data-lazy-loaded][src], iframe[data-lazy-loaded][src]").forEach((e=>{e.setAttribute("data-src",e.getAttribute("src")),e.removeAttribute("src")})),t(e,"video[data-lazy-loaded] source[src], audio source[src]").forEach((e=>{e.setAttribute("data-src",e.getAttribute("src")),e.removeAttribute("src")}))}formatEmbeddedContent(){let e=(e,i,s)=>{t(this.Reveal.getSlidesElement(),"iframe["+e+'*="'+i+'"]').forEach((t=>{let i=t.getAttribute(e);i&&-1===i.indexOf(s)&&t.setAttribute(e,i+(/\?/.test(i)?"&":"?")+s)}))};e("src","youtube.com/embed/","enablejsapi=1"),e("data-src","youtube.com/embed/","enablejsapi=1"),e("src","player.vimeo.com/","api=1"),e("data-src","player.vimeo.com/","api=1")}startEmbeddedContent(e){if(e){const i=this.Reveal.isSpeakerNotes();t(e,'img[src$=".gif"]').forEach((e=>{e.setAttribute("src",e.getAttribute("src"))})),t(e,"video, audio").forEach((e=>{if(r(e,".fragment")&&!r(e,".fragment.visible"))return;let t=this.Reveal.getConfig().autoPlayMedia;if("boolean"!=typeof t&&(t=e.hasAttribute("data-autoplay")||!!r(e,".slide-background")),t&&"function"==typeof e.play){if(i&&!e.muted)return;if(e.readyState>1)this.startEmbeddedMedia({target:e});else if(u){let t=e.play();t&&"function"==typeof t.catch&&!1===e.controls&&t.catch((()=>{e.controls=!0,e.addEventListener("play",(()=>{e.controls=!1}))}))}else e.removeEventListener("loadeddata",this.startEmbeddedMedia),e.addEventListener("loadeddata",this.startEmbeddedMedia)}})),i||(t(e,"iframe[src]").forEach((e=>{r(e,".fragment")&&!r(e,".fragment.visible")||this.startEmbeddedIframe({target:e})})),t(e,"iframe[data-src]").forEach((e=>{r(e,".fragment")&&!r(e,".fragment.visible")||e.getAttribute("src")!==e.getAttribute("data-src")&&(e.removeEventListener("load",this.startEmbeddedIframe),e.addEventListener("load",this.startEmbeddedIframe),e.setAttribute("src",e.getAttribute("data-src")))})))}}startEmbeddedMedia(e){let t=!!r(e.target,"html"),i=!!r(e.target,".present");t&&i&&(e.target.paused||e.target.ended)&&(e.target.currentTime=0,e.target.play()),e.target.removeEventListener("loadeddata",this.startEmbeddedMedia)}startEmbeddedIframe(e){let t=e.target;if(t&&t.contentWindow){let i=!!r(e.target,"html"),s=!!r(e.target,".present");if(i&&s){let e=this.Reveal.getConfig().autoPlayMedia;"boolean"!=typeof e&&(e=t.hasAttribute("data-autoplay")||!!r(t,".slide-background")),/youtube\.com\/embed\//.test(t.getAttribute("src"))&&e?t.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"):/player\.vimeo\.com\//.test(t.getAttribute("src"))&&e?t.contentWindow.postMessage('{"method":"play"}',"*"):t.contentWindow.postMessage("slide:start","*")}}}stopEmbeddedContent(i,s={}){s=e({unloadIframes:!0},s),i&&i.parentNode&&(t(i,"video, audio").forEach((e=>{e.hasAttribute("data-ignore")||"function"!=typeof e.pause||(e.setAttribute("data-paused-by-reveal",""),e.pause())})),t(i,"iframe").forEach((e=>{e.contentWindow&&e.contentWindow.postMessage("slide:stop","*"),e.removeEventListener("load",this.startEmbeddedIframe)})),t(i,'iframe[src*="youtube.com/embed/"]').forEach((e=>{!e.hasAttribute("data-ignore")&&e.contentWindow&&"function"==typeof e.contentWindow.postMessage&&e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),t(i,'iframe[src*="player.vimeo.com/"]').forEach((e=>{!e.hasAttribute("data-ignore")&&e.contentWindow&&"function"==typeof e.contentWindow.postMessage&&e.contentWindow.postMessage('{"method":"pause"}',"*")})),!0===s.unloadIframes&&t(i,"iframe[data-src]").forEach((e=>{e.setAttribute("src","about:blank"),e.removeAttribute("src")})))}}const m=".slides section",f=".slides>section",y=".slides>section.present>section",b=/registerPlugin|registerKeyboardShortcut|addKeyBinding|addEventListener|showPreview/;class w{constructor(e){this.Reveal=e}render(){this.element=document.createElement("div"),this.element.className="slide-number",this.Reveal.getRevealElement().appendChild(this.element)}configure(e,t){let i="none";e.slideNumber&&!this.Reveal.isPrintView()&&("all"===e.showSlideNumber||"speaker"===e.showSlideNumber&&this.Reveal.isSpeakerNotes())&&(i="block"),this.element.style.display=i}update(){this.Reveal.getConfig().slideNumber&&this.element&&(this.element.innerHTML=this.getSlideNumber())}getSlideNumber(e=this.Reveal.getCurrentSlide()){let t,i=this.Reveal.getConfig(),s="h.v";if("function"==typeof i.slideNumber)t=i.slideNumber(e);else{"string"==typeof i.slideNumber&&(s=i.slideNumber),/c/.test(s)||1!==this.Reveal.getHorizontalSlides().length||(s="c");let a=e&&"uncounted"===e.dataset.visibility?0:1;switch(t=[],s){case"c":t.push(this.Reveal.getSlidePastCount(e)+a);break;case"c/t":t.push(this.Reveal.getSlidePastCount(e)+a,"/",this.Reveal.getTotalSlides());break;default:let i=this.Reveal.getIndices(e);t.push(i.h+a);let n="h/v"===s?"/":".";this.Reveal.isVerticalSlide(e)&&t.push(n,i.v+1)}}let a="#"+this.Reveal.location.getHash(e);return this.formatNumber(t[0],t[1],t[2],a)}formatNumber(e,t,i,s="#"+this.Reveal.location.getHash()){return"number"!=typeof i||isNaN(i)?`<a href="${s}">\n\t\t\t\t\t<span class="slide-number-a">${e}</span>\n\t\t\t\t\t</a>`:`<a href="${s}">\n\t\t\t\t\t<span class="slide-number-a">${e}</span>\n\t\t\t\t\t<span class="slide-number-delimiter">${t}</span>\n\t\t\t\t\t<span class="slide-number-b">${i}</span>\n\t\t\t\t\t</a>`}destroy(){this.element.remove()}}class E{constructor(e){this.Reveal=e,this.onInput=this.onInput.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}render(){this.element=document.createElement("div"),this.element.className="jump-to-slide",this.jumpInput=document.createElement("input"),this.jumpInput.type="text",this.jumpInput.className="jump-to-slide-input",this.jumpInput.placeholder="Jump to slide",this.jumpInput.addEventListener("input",this.onInput),this.jumpInput.addEventListener("keydown",this.onKeyDown),this.jumpInput.addEventListener("blur",this.onBlur),this.element.appendChild(this.jumpInput)}show(){this.indicesOnShow=this.Reveal.getIndices(),this.Reveal.getRevealElement().appendChild(this.element),this.jumpInput.focus()}hide(){this.isVisible()&&(this.element.remove(),this.jumpInput.value="",clearTimeout(this.jumpTimeout),delete this.jumpTimeout)}isVisible(){return!!this.element.parentNode}jump(){clearTimeout(this.jumpTimeout),delete this.jumpTimeout;let e,t=this.jumpInput.value.trim("");if(/^\d+$/.test(t)){const i=this.Reveal.getConfig().slideNumber;if("c"===i||"c/t"===i){const i=this.Reveal.getSlides()[parseInt(t,10)-1];i&&(e=this.Reveal.getIndices(i))}}return e||(/^\d+\.\d+$/.test(t)&&(t=t.replace(".","/")),e=this.Reveal.location.getIndicesFromHash(t,{oneBasedIndex:!0})),!e&&/\S+/i.test(t)&&t.length>1&&(e=this.search(t)),e&&""!==t?(this.Reveal.slide(e.h,e.v,e.f),!0):(this.Reveal.slide(this.indicesOnShow.h,this.indicesOnShow.v,this.indicesOnShow.f),!1)}jumpAfter(e){clearTimeout(this.jumpTimeout),this.jumpTimeout=setTimeout((()=>this.jump()),e)}search(e){const t=new RegExp("\\b"+e.trim()+"\\b","i"),i=this.Reveal.getSlides().find((e=>t.test(e.innerText)));return i?this.Reveal.getIndices(i):null}cancel(){this.Reveal.slide(this.indicesOnShow.h,this.indicesOnShow.v,this.indicesOnShow.f),this.hide()}confirm(){this.jump(),this.hide()}destroy(){this.jumpInput.removeEventListener("input",this.onInput),this.jumpInput.removeEventListener("keydown",this.onKeyDown),this.jumpInput.removeEventListener("blur",this.onBlur),this.element.remove()}onKeyDown(e){13===e.keyCode?this.confirm():27===e.keyCode&&(this.cancel(),e.stopImmediatePropagation())}onInput(e){this.jumpAfter(200)}onBlur(){setTimeout((()=>this.hide()),1)}}const S=e=>{let t=e.match(/^#([0-9a-f]{3})$/i);if(t&&t[1])return t=t[1],{r:17*parseInt(t.charAt(0),16),g:17*parseInt(t.charAt(1),16),b:17*parseInt(t.charAt(2),16)};let i=e.match(/^#([0-9a-f]{6})$/i);if(i&&i[1])return i=i[1],{r:parseInt(i.slice(0,2),16),g:parseInt(i.slice(2,4),16),b:parseInt(i.slice(4,6),16)};let s=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(s)return{r:parseInt(s[1],10),g:parseInt(s[2],10),b:parseInt(s[3],10)};let a=e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d]+|[\d]*.[\d]+)\s*\)$/i);return a?{r:parseInt(a[1],10),g:parseInt(a[2],10),b:parseInt(a[3],10),a:parseFloat(a[4])}:null};class R{constructor(e){this.Reveal=e}render(){this.element=document.createElement("div"),this.element.className="backgrounds",this.Reveal.getRevealElement().appendChild(this.element)}create(){this.element.innerHTML="",this.element.classList.add("no-transition"),this.Reveal.getHorizontalSlides().forEach((e=>{let i=this.createBackground(e,this.element);t(e,"section").forEach((e=>{this.createBackground(e,i),i.classList.add("stack")}))})),this.Reveal.getConfig().parallaxBackgroundImage?(this.element.style.backgroundImage='url("'+this.Reveal.getConfig().parallaxBackgroundImage+'")',this.element.style.backgroundSize=this.Reveal.getConfig().parallaxBackgroundSize,this.element.style.backgroundRepeat=this.Reveal.getConfig().parallaxBackgroundRepeat,this.element.style.backgroundPosition=this.Reveal.getConfig().parallaxBackgroundPosition,setTimeout((()=>{this.Reveal.getRevealElement().classList.add("has-parallax-background")}),1)):(this.element.style.backgroundImage="",this.Reveal.getRevealElement().classList.remove("has-parallax-background"))}createBackground(e,t){let i=document.createElement("div");i.className="slide-background "+e.className.replace(/present|past|future/,"");let s=document.createElement("div");return s.className="slide-background-content",i.appendChild(s),t.appendChild(i),e.slideBackgroundElement=i,e.slideBackgroundContentElement=s,this.sync(e),i}sync(e){const t=e.slideBackgroundElement,i=e.slideBackgroundContentElement,s={background:e.getAttribute("data-background"),backgroundSize:e.getAttribute("data-background-size"),backgroundImage:e.getAttribute("data-background-image"),backgroundVideo:e.getAttribute("data-background-video"),backgroundIframe:e.getAttribute("data-background-iframe"),backgroundColor:e.getAttribute("data-background-color"),backgroundGradient:e.getAttribute("data-background-gradient"),backgroundRepeat:e.getAttribute("data-background-repeat"),backgroundPosition:e.getAttribute("data-background-position"),backgroundTransition:e.getAttribute("data-background-transition"),backgroundOpacity:e.getAttribute("data-background-opacity")},a=e.hasAttribute("data-preload");e.classList.remove("has-dark-background"),e.classList.remove("has-light-background"),t.removeAttribute("data-loaded"),t.removeAttribute("data-background-hash"),t.removeAttribute("data-background-size"),t.removeAttribute("data-background-transition"),t.style.backgroundColor="",i.style.backgroundSize="",i.style.backgroundRepeat="",i.style.backgroundPosition="",i.style.backgroundImage="",i.style.opacity="",i.innerHTML="",s.background&&(/^(http|file|\/\/)/gi.test(s.background)||/\.(svg|png|jpg|jpeg|gif|bmp|webp)([?#\s]|$)/gi.test(s.background)?e.setAttribute("data-background-image",s.background):t.style.background=s.background),(s.background||s.backgroundColor||s.backgroundGradient||s.backgroundImage||s.backgroundVideo||s.backgroundIframe)&&t.setAttribute("data-background-hash",s.background+s.backgroundSize+s.backgroundImage+s.backgroundVideo+s.backgroundIframe+s.backgroundColor+s.backgroundGradient+s.backgroundRepeat+s.backgroundPosition+s.backgroundTransition+s.backgroundOpacity),s.backgroundSize&&t.setAttribute("data-background-size",s.backgroundSize),s.backgroundColor&&(t.style.backgroundColor=s.backgroundColor),s.backgroundGradient&&(t.style.backgroundImage=s.backgroundGradient),s.backgroundTransition&&t.setAttribute("data-background-transition",s.backgroundTransition),a&&t.setAttribute("data-preload",""),s.backgroundSize&&(i.style.backgroundSize=s.backgroundSize),s.backgroundRepeat&&(i.style.backgroundRepeat=s.backgroundRepeat),s.backgroundPosition&&(i.style.backgroundPosition=s.backgroundPosition),s.backgroundOpacity&&(i.style.opacity=s.backgroundOpacity);const n=this.getContrastClass(e);"string"==typeof n&&e.classList.add(n)}getContrastClass(e){const t=e.slideBackgroundElement;let i=e.getAttribute("data-background-color");if(!i||!S(i)){let e=window.getComputedStyle(t);e&&e.backgroundColor&&(i=e.backgroundColor)}if(i){const e=S(i);if(e&&0!==e.a)return"string"==typeof(s=i)&&(s=S(s)),(s?(299*s.r+587*s.g+114*s.b)/1e3:null)<128?"has-dark-background":"has-light-background"}var s;return null}bubbleSlideContrastClassToElement(e,t){["has-light-background","has-dark-background"].forEach((i=>{e.classList.contains(i)?t.classList.add(i):t.classList.remove(i)}),this)}update(e=!1){let i=this.Reveal.getConfig(),s=this.Reveal.getCurrentSlide(),a=this.Reveal.getIndices(),n=null,r=i.rtl?"future":"past",o=i.rtl?"past":"future";if(Array.from(this.element.childNodes).forEach(((i,s)=>{i.classList.remove("past","present","future"),s<a.h?i.classList.add(r):s>a.h?i.classList.add(o):(i.classList.add("present"),n=i),(e||s===a.h)&&t(i,".slide-background").forEach(((e,t)=>{e.classList.remove("past","present","future");const i="number"==typeof a.v?a.v:0;t<i?e.classList.add("past"):t>i?e.classList.add("future"):(e.classList.add("present"),s===a.h&&(n=e))}))})),this.previousBackground&&!this.previousBackground.closest("body")&&(this.previousBackground=null),n&&this.previousBackground){let e=this.previousBackground.getAttribute("data-background-hash"),t=n.getAttribute("data-background-hash");if(t&&t===e&&n!==this.previousBackground){this.element.classList.add("no-transition");const e=n.querySelector("video"),t=this.previousBackground.querySelector("video");if(e&&t){const i=e.parentNode;t.parentNode.appendChild(e),i.appendChild(t)}}}const l=n!==this.previousBackground;if(l&&this.previousBackground&&this.Reveal.slideContent.stopEmbeddedContent(this.previousBackground,{unloadIframes:!this.Reveal.slideContent.shouldPreload(this.previousBackground)}),l&&n){this.Reveal.slideContent.startEmbeddedContent(n);let e=n.querySelector(".slide-background-content");if(e){let t=e.style.backgroundImage||"";/\.gif/i.test(t)&&(e.style.backgroundImage="",window.getComputedStyle(e).opacity,e.style.backgroundImage=t)}this.previousBackground=n}s&&this.bubbleSlideContrastClassToElement(s,this.Reveal.getRevealElement()),setTimeout((()=>{this.element.classList.remove("no-transition")}),10)}updateParallax(){let e=this.Reveal.getIndices();if(this.Reveal.getConfig().parallaxBackgroundImage){let t,i,s=this.Reveal.getHorizontalSlides(),a=this.Reveal.getVerticalSlides(),n=this.element.style.backgroundSize.split(" ");1===n.length?t=i=parseInt(n[0],10):(t=parseInt(n[0],10),i=parseInt(n[1],10));let r,o,l=this.element.offsetWidth,d=s.length;r="number"==typeof this.Reveal.getConfig().parallaxBackgroundHorizontal?this.Reveal.getConfig().parallaxBackgroundHorizontal:d>1?(t-l)/(d-1):0,o=r*e.h*-1;let c,h,u=this.element.offsetHeight,g=a.length;c="number"==typeof this.Reveal.getConfig().parallaxBackgroundVertical?this.Reveal.getConfig().parallaxBackgroundVertical:(i-u)/(g-1),h=g>0?c*e.v:0,this.element.style.backgroundPosition=o+"px "+-h+"px"}}destroy(){this.element.remove()}}let A=0;class k{constructor(e){this.Reveal=e}run(e,t){this.reset();let i=this.Reveal.getSlides(),s=i.indexOf(t),a=i.indexOf(e);if(e&&t&&e.hasAttribute("data-auto-animate")&&t.hasAttribute("data-auto-animate")&&e.getAttribute("data-auto-animate-id")===t.getAttribute("data-auto-animate-id")&&!(s>a?t:e).hasAttribute("data-auto-animate-restart")){this.autoAnimateStyleSheet=this.autoAnimateStyleSheet||l();let i=this.getAutoAnimateOptions(t);e.dataset.autoAnimate="pending",t.dataset.autoAnimate="pending",i.slideDirection=s>a?"forward":"backward";let n="none"===e.style.display;n&&(e.style.display=this.Reveal.getConfig().display);let r=this.getAutoAnimatableElements(e,t).map((e=>this.autoAnimateElements(e.from,e.to,e.options||{},i,A++)));if(n&&(e.style.display="none"),"false"!==t.dataset.autoAnimateUnmatched&&!0===this.Reveal.getConfig().autoAnimateUnmatched){let e=.8*i.duration,s=.2*i.duration;this.getUnmatchedAutoAnimateElements(t).forEach((e=>{let t=this.getAutoAnimateOptions(e,i),s="unmatched";t.duration===i.duration&&t.delay===i.delay||(s="unmatched-"+A++,r.push(`[data-auto-animate="running"] [data-auto-animate-target="${s}"] { transition: opacity ${t.duration}s ease ${t.delay}s; }`)),e.dataset.autoAnimateTarget=s}),this),r.push(`[data-auto-animate="running"] [data-auto-animate-target="unmatched"] { transition: opacity ${e}s ease ${s}s; }`)}this.autoAnimateStyleSheet.innerHTML=r.join(""),requestAnimationFrame((()=>{this.autoAnimateStyleSheet&&(getComputedStyle(this.autoAnimateStyleSheet).fontWeight,t.dataset.autoAnimate="running")})),this.Reveal.dispatchEvent({type:"autoanimate",data:{fromSlide:e,toSlide:t,sheet:this.autoAnimateStyleSheet}})}}reset(){t(this.Reveal.getRevealElement(),'[data-auto-animate]:not([data-auto-animate=""])').forEach((e=>{e.dataset.autoAnimate=""})),t(this.Reveal.getRevealElement(),"[data-auto-animate-target]").forEach((e=>{delete e.dataset.autoAnimateTarget})),this.autoAnimateStyleSheet&&this.autoAnimateStyleSheet.parentNode&&(this.autoAnimateStyleSheet.parentNode.removeChild(this.autoAnimateStyleSheet),this.autoAnimateStyleSheet=null)}autoAnimateElements(e,t,i,s,a){e.dataset.autoAnimateTarget="",t.dataset.autoAnimateTarget=a;let n=this.getAutoAnimateOptions(t,s);void 0!==i.delay&&(n.delay=i.delay),void 0!==i.duration&&(n.duration=i.duration),void 0!==i.easing&&(n.easing=i.easing);let r=this.getAutoAnimatableProperties("from",e,i),o=this.getAutoAnimatableProperties("to",t,i);if(t.classList.contains("fragment")&&delete o.styles.opacity,!1!==i.translate||!1!==i.scale){let e=this.Reveal.getScale(),t={x:(r.x-o.x)/e,y:(r.y-o.y)/e,scaleX:r.width/o.width,scaleY:r.height/o.height};t.x=Math.round(1e3*t.x)/1e3,t.y=Math.round(1e3*t.y)/1e3,t.scaleX=Math.round(1e3*t.scaleX)/1e3,t.scaleX=Math.round(1e3*t.scaleX)/1e3;let s=!1!==i.translate&&(0!==t.x||0!==t.y),a=!1!==i.scale&&(0!==t.scaleX||0!==t.scaleY);if(s||a){let e=[];s&&e.push(`translate(${t.x}px, ${t.y}px)`),a&&e.push(`scale(${t.scaleX}, ${t.scaleY})`),r.styles.transform=e.join(" "),r.styles["transform-origin"]="top left",o.styles.transform="none"}}for(let e in o.styles){const t=o.styles[e],i=r.styles[e];t===i?delete o.styles[e]:(!0===t.explicitValue&&(o.styles[e]=t.value),!0===i.explicitValue&&(r.styles[e]=i.value))}let l="",d=Object.keys(o.styles);if(d.length>0){r.styles.transition="none",o.styles.transition=`all ${n.duration}s ${n.easing} ${n.delay}s`,o.styles["transition-property"]=d.join(", "),o.styles["will-change"]=d.join(", "),l='[data-auto-animate-target="'+a+'"] {'+Object.keys(r.styles).map((e=>e+": "+r.styles[e]+" !important;")).join("")+'}[data-auto-animate="running"] [data-auto-animate-target="'+a+'"] {'+Object.keys(o.styles).map((e=>e+": "+o.styles[e]+" !important;")).join("")+"}"}return l}getAutoAnimateOptions(t,i){let s={easing:this.Reveal.getConfig().autoAnimateEasing,duration:this.Reveal.getConfig().autoAnimateDuration,delay:0};if(s=e(s,i),t.parentNode){let e=r(t.parentNode,"[data-auto-animate-target]");e&&(s=this.getAutoAnimateOptions(e,s))}return t.dataset.autoAnimateEasing&&(s.easing=t.dataset.autoAnimateEasing),t.dataset.autoAnimateDuration&&(s.duration=parseFloat(t.dataset.autoAnimateDuration)),t.dataset.autoAnimateDelay&&(s.delay=parseFloat(t.dataset.autoAnimateDelay)),s}getAutoAnimatableProperties(e,t,i){let s=this.Reveal.getConfig(),a={styles:[]};if(!1!==i.translate||!1!==i.scale){let e;if("function"==typeof i.measure)e=i.measure(t);else if(s.center)e=t.getBoundingClientRect();else{let i=this.Reveal.getScale();e={x:t.offsetLeft*i,y:t.offsetTop*i,width:t.offsetWidth*i,height:t.offsetHeight*i}}a.x=e.x,a.y=e.y,a.width=e.width,a.height=e.height}const n=getComputedStyle(t);return(i.styles||s.autoAnimateStyles).forEach((t=>{let i;"string"==typeof t&&(t={property:t}),void 0!==t.from&&"from"===e?i={value:t.from,explicitValue:!0}:void 0!==t.to&&"to"===e?i={value:t.to,explicitValue:!0}:("line-height"===t.property&&(i=parseFloat(n["line-height"])/parseFloat(n["font-size"])),isNaN(i)&&(i=n[t.property])),""!==i&&(a.styles[t.property]=i)})),a}getAutoAnimatableElements(e,t){let i=("function"==typeof this.Reveal.getConfig().autoAnimateMatcher?this.Reveal.getConfig().autoAnimateMatcher:this.getAutoAnimatePairs).call(this,e,t),s=[];return i.filter(((e,t)=>{if(-1===s.indexOf(e.to))return s.push(e.to),!0}))}getAutoAnimatePairs(e,t){let i=[];const s="h1, h2, h3, h4, h5, h6, p, li";return this.findAutoAnimateMatches(i,e,t,"[data-id]",(e=>e.nodeName+":::"+e.getAttribute("data-id"))),this.findAutoAnimateMatches(i,e,t,s,(e=>e.nodeName+":::"+e.textContent.trim())),this.findAutoAnimateMatches(i,e,t,"img, video, iframe",(e=>e.nodeName+":::"+(e.getAttribute("src")||e.getAttribute("data-src")))),this.findAutoAnimateMatches(i,e,t,"pre",(e=>e.nodeName+":::"+e.textContent.trim())),i.forEach((e=>{n(e.from,s)?e.options={scale:!1}:n(e.from,"pre")&&(e.options={scale:!1,styles:["width","height"]},this.findAutoAnimateMatches(i,e.from,e.to,".hljs .hljs-ln-code",(e=>e.textContent),{scale:!1,styles:[],measure:this.getLocalBoundingBox.bind(this)}),this.findAutoAnimateMatches(i,e.from,e.to,".hljs .hljs-ln-numbers[data-line-number]",(e=>e.getAttribute("data-line-number")),{scale:!1,styles:["width"],measure:this.getLocalBoundingBox.bind(this)}))}),this),i}getLocalBoundingBox(e){const t=this.Reveal.getScale();return{x:Math.round(e.offsetLeft*t*100)/100,y:Math.round(e.offsetTop*t*100)/100,width:Math.round(e.offsetWidth*t*100)/100,height:Math.round(e.offsetHeight*t*100)/100}}findAutoAnimateMatches(e,t,i,s,a,n){let r={},o={};[].slice.call(t.querySelectorAll(s)).forEach(((e,t)=>{const i=a(e);"string"==typeof i&&i.length&&(r[i]=r[i]||[],r[i].push(e))})),[].slice.call(i.querySelectorAll(s)).forEach(((t,i)=>{const s=a(t);let l;if(o[s]=o[s]||[],o[s].push(t),r[s]){const e=o[s].length-1,t=r[s].length-1;r[s][e]?(l=r[s][e],r[s][e]=null):r[s][t]&&(l=r[s][t],r[s][t]=null)}l&&e.push({from:l,to:t,options:n})}))}getUnmatchedAutoAnimateElements(e){return[].slice.call(e.children).reduce(((e,t)=>{const i=t.querySelector("[data-auto-animate-target]");return t.hasAttribute("data-auto-animate-target")||i||e.push(t),t.querySelector("[data-auto-animate-target]")&&(e=e.concat(this.getUnmatchedAutoAnimateElements(t))),e}),[])}}class L{constructor(e){this.Reveal=e,this.active=!1,this.activatedCallbacks=[],this.onScroll=this.onScroll.bind(this)}activate(){if(this.active)return;const e=this.Reveal.getState();this.active=!0,this.slideHTMLBeforeActivation=this.Reveal.getSlidesElement().innerHTML;const i=t(this.Reveal.getRevealElement(),f),s=t(this.Reveal.getRevealElement(),".backgrounds>.slide-background");let a;this.viewportElement.classList.add("loading-scroll-mode","reveal-scroll");const n=window.getComputedStyle(this.viewportElement);n&&n.background&&(a=n.background);const r=[],o=i[0].parentNode;let l;const d=(e,t,i,n)=>{let o;if(l&&this.Reveal.shouldAutoAnimateBetween(l,e))o=document.createElement("div"),o.className="scroll-page-content scroll-auto-animate-page",o.style.display="none",l.closest(".scroll-page-content").parentNode.appendChild(o);else{const e=document.createElement("div");if(e.className="scroll-page",r.push(e),n&&s.length>t){const i=s[t],n=window.getComputedStyle(i);n&&n.background?e.style.background=n.background:a&&(e.style.background=a)}else a&&(e.style.background=a);const i=document.createElement("div");i.className="scroll-page-sticky",e.appendChild(i),o=document.createElement("div"),o.className="scroll-page-content",i.appendChild(o)}o.appendChild(e),e.classList.remove("past","future"),e.setAttribute("data-index-h",t),e.setAttribute("data-index-v",i),e.slideBackgroundElement&&(e.slideBackgroundElement.remove("past","future"),o.insertBefore(e.slideBackgroundElement,e)),l=e};i.forEach(((e,t)=>{this.Reveal.isVerticalStack(e)?e.querySelectorAll("section").forEach(((e,i)=>{d(e,t,i,!0)})):d(e,t,0)}),this),this.createProgressBar(),t(this.Reveal.getRevealElement(),".stack").forEach((e=>e.remove())),r.forEach((e=>o.appendChild(e))),this.Reveal.slideContent.layout(this.Reveal.getSlidesElement()),this.Reveal.layout(),this.Reveal.setState(e),this.activatedCallbacks.forEach((e=>e())),this.activatedCallbacks=[],this.restoreScrollPosition(),this.viewportElement.classList.remove("loading-scroll-mode"),this.viewportElement.addEventListener("scroll",this.onScroll,{passive:!0})}deactivate(){if(!this.active)return;const e=this.Reveal.getState();this.active=!1,this.viewportElement.removeEventListener("scroll",this.onScroll),this.viewportElement.classList.remove("reveal-scroll"),this.removeProgressBar(),this.Reveal.getSlidesElement().innerHTML=this.slideHTMLBeforeActivation,this.Reveal.sync(),this.Reveal.setState(e),this.slideHTMLBeforeActivation=null}toggle(e){"boolean"==typeof e?e?this.activate():this.deactivate():this.isActive()?this.deactivate():this.activate()}isActive(){return this.active}createProgressBar(){this.progressBar=document.createElement("div"),this.progressBar.className="scrollbar",this.progressBarInner=document.createElement("div"),this.progressBarInner.className="scrollbar-inner",this.progressBar.appendChild(this.progressBarInner),this.progressBarPlayhead=document.createElement("div"),this.progressBarPlayhead.className="scrollbar-playhead",this.progressBarInner.appendChild(this.progressBarPlayhead),this.viewportElement.insertBefore(this.progressBar,this.viewportElement.firstChild);const e=e=>{let t=(e.clientY-this.progressBarInner.getBoundingClientRect().top)/this.progressBarHeight;t=Math.max(Math.min(t,1),0),this.viewportElement.scrollTop=t*(this.viewportElement.scrollHeight-this.viewportElement.offsetHeight)},t=i=>{this.draggingProgressBar=!1,this.showProgressBar(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)};this.progressBarInner.addEventListener("mousedown",(i=>{i.preventDefault(),this.draggingProgressBar=!0,document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),e(i)}))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}layout(){this.isActive()&&(this.syncPages(),this.syncScrollPosition())}syncPages(){const e=this.Reveal.getConfig(),t=this.Reveal.getComputedSlideSize(window.innerWidth,window.innerHeight),i=this.Reveal.getScale(),s="compact"===e.scrollLayout,a=this.viewportElement.offsetHeight,n=t.height*i,r=s?n:a;this.scrollTriggerHeight=s?n:a,this.viewportElement.style.setProperty("--page-height",r+"px"),this.viewportElement.style.scrollSnapType="string"==typeof e.scrollSnap?`y ${e.scrollSnap}`:"",this.slideTriggers=[];const o=Array.from(this.Reveal.getRevealElement().querySelectorAll(".scroll-page"));this.pages=o.map((i=>{const n=this.createPage({pageElement:i,slideElement:i.querySelector("section"),stickyElement:i.querySelector(".scroll-page-sticky"),contentElement:i.querySelector(".scroll-page-content"),backgroundElement:i.querySelector(".slide-background"),autoAnimateElements:i.querySelectorAll(".scroll-auto-animate-page"),autoAnimatePages:[]});n.pageElement.style.setProperty("--slide-height",!0===e.center?"auto":t.height+"px"),this.slideTriggers.push({page:n,activate:()=>this.activatePage(n),deactivate:()=>this.deactivatePage(n)}),this.createFragmentTriggersForPage(n),n.autoAnimateElements.length>0&&this.createAutoAnimateTriggersForPage(n);let o=Math.max(n.scrollTriggers.length-1,0);o+=n.autoAnimatePages.reduce(((e,t)=>e+Math.max(t.scrollTriggers.length-1,0)),n.autoAnimatePages.length),n.pageElement.querySelectorAll(".scroll-snap-point").forEach((e=>e.remove()));for(let e=0;e<o+1;e++){const t=document.createElement("div");t.className="scroll-snap-point",t.style.height=this.scrollTriggerHeight+"px",t.style.scrollSnapAlign=s?"center":"start",n.pageElement.appendChild(t),0===e&&(t.style.marginTop=-this.scrollTriggerHeight+"px")}return s&&n.scrollTriggers.length>0?(n.pageHeight=a,n.pageElement.style.setProperty("--page-height",a+"px")):(n.pageHeight=r,n.pageElement.style.removeProperty("--page-height")),n.scrollPadding=this.scrollTriggerHeight*o,n.totalHeight=n.pageHeight+n.scrollPadding,n.pageElement.style.setProperty("--page-scroll-padding",n.scrollPadding+"px"),o>0?(n.stickyElement.style.position="sticky",n.stickyElement.style.top=Math.max((a-n.pageHeight)/2,0)+"px"):(n.stickyElement.style.position="relative",n.pageElement.style.scrollSnapAlign=n.pageHeight<a?"center":"start"),n})),this.setTriggerRanges(),this.viewportElement.setAttribute("data-scrollbar",e.scrollProgress),e.scrollProgress&&this.totalScrollTriggerCount>1?(this.progressBar||this.createProgressBar(),this.syncProgressBar()):this.removeProgressBar()}setTriggerRanges(){this.totalScrollTriggerCount=this.slideTriggers.reduce(((e,t)=>e+Math.max(t.page.scrollTriggers.length,1)),0);let e=0;this.slideTriggers.forEach(((t,i)=>{t.range=[e,e+Math.max(t.page.scrollTriggers.length,1)/this.totalScrollTriggerCount];const s=(t.range[1]-t.range[0])/t.page.scrollTriggers.length;t.page.scrollTriggers.forEach(((t,i)=>{t.range=[e+i*s,e+(i+1)*s]})),e=t.range[1]})),this.slideTriggers[this.slideTriggers.length-1].range[1]=1}createFragmentTriggersForPage(e,t){t=t||e.slideElement;const i=this.Reveal.fragments.sort(t.querySelectorAll(".fragment"),!0);return i.length&&(e.fragments=this.Reveal.fragments.sort(t.querySelectorAll(".fragment:not(.disabled)")),e.scrollTriggers.push({activate:()=>{this.Reveal.fragments.update(-1,e.fragments,t)}}),i.forEach(((i,s)=>{e.scrollTriggers.push({activate:()=>{this.Reveal.fragments.update(s,e.fragments,t)}})}))),e.scrollTriggers.length}createAutoAnimateTriggersForPage(e){e.autoAnimateElements.length>0&&this.slideTriggers.push(...Array.from(e.autoAnimateElements).map(((t,i)=>{let s=this.createPage({slideElement:t.querySelector("section"),contentElement:t,backgroundElement:t.querySelector(".slide-background")});return this.createFragmentTriggersForPage(s,s.slideElement),e.autoAnimatePages.push(s),{page:s,activate:()=>this.activatePage(s),deactivate:()=>this.deactivatePage(s)}})))}createPage(e){return e.scrollTriggers=[],e.indexh=parseInt(e.slideElement.getAttribute("data-index-h"),10),e.indexv=parseInt(e.slideElement.getAttribute("data-index-v"),10),e}syncProgressBar(){this.progressBarInner.querySelectorAll(".scrollbar-slide").forEach((e=>e.remove()));const e=this.viewportElement.scrollHeight,t=this.viewportElement.offsetHeight,i=t/e;this.progressBarHeight=this.progressBarInner.offsetHeight,this.playheadHeight=Math.max(i*this.progressBarHeight,8),this.progressBarScrollableHeight=this.progressBarHeight-this.playheadHeight;const s=t/e*this.progressBarHeight,a=Math.min(s/8,4);this.progressBarPlayhead.style.height=this.playheadHeight-a+"px",s>6?this.slideTriggers.forEach((e=>{const{page:t}=e;t.progressBarSlide=document.createElement("div"),t.progressBarSlide.className="scrollbar-slide",t.progressBarSlide.style.top=e.range[0]*this.progressBarHeight+"px",t.progressBarSlide.style.height=(e.range[1]-e.range[0])*this.progressBarHeight-a+"px",t.progressBarSlide.classList.toggle("has-triggers",t.scrollTriggers.length>0),this.progressBarInner.appendChild(t.progressBarSlide),t.scrollTriggerElements=t.scrollTriggers.map(((i,s)=>{const n=document.createElement("div");return n.className="scrollbar-trigger",n.style.top=(i.range[0]-e.range[0])*this.progressBarHeight+"px",n.style.height=(i.range[1]-i.range[0])*this.progressBarHeight-a+"px",t.progressBarSlide.appendChild(n),0===s&&(n.style.display="none"),n}))})):this.pages.forEach((e=>e.progressBarSlide=null))}syncScrollPosition(){const e=this.viewportElement.offsetHeight,t=e/this.viewportElement.scrollHeight,i=this.viewportElement.scrollTop,s=this.viewportElement.scrollHeight-e,a=Math.max(Math.min(i/s,1),0),n=Math.max(Math.min((i+e/2)/this.viewportElement.scrollHeight,1),0);let r;this.slideTriggers.forEach((e=>{const{page:i}=e;a>=e.range[0]-2*t&&a<=e.range[1]+2*t&&!i.loaded?(i.loaded=!0,this.Reveal.slideContent.load(i.slideElement)):i.loaded&&(i.loaded=!1,this.Reveal.slideContent.unload(i.slideElement)),a>=e.range[0]&&a<=e.range[1]?(this.activateTrigger(e),r=e.page):e.active&&this.deactivateTrigger(e)})),r&&r.scrollTriggers.forEach((e=>{n>=e.range[0]&&n<=e.range[1]?this.activateTrigger(e):e.active&&this.deactivateTrigger(e)})),this.setProgressBarValue(i/(this.viewportElement.scrollHeight-e))}setProgressBarValue(e){this.progressBar&&(this.progressBarPlayhead.style.transform=`translateY(${e*this.progressBarScrollableHeight}px)`,this.getAllPages().filter((e=>e.progressBarSlide)).forEach((e=>{e.progressBarSlide.classList.toggle("active",!0===e.active),e.scrollTriggers.forEach(((t,i)=>{e.scrollTriggerElements[i].classList.toggle("active",!0===e.active&&!0===t.active)}))})),this.showProgressBar())}showProgressBar(){this.progressBar.classList.add("visible"),clearTimeout(this.hideProgressBarTimeout),"auto"!==this.Reveal.getConfig().scrollProgress||this.draggingProgressBar||(this.hideProgressBarTimeout=setTimeout((()=>{this.progressBar&&this.progressBar.classList.remove("visible")}),500))}prev(){this.viewportElement.scrollTop-=this.scrollTriggerHeight}next(){this.viewportElement.scrollTop+=this.scrollTriggerHeight}scrollToSlide(e){if(this.active){const t=this.getScrollTriggerBySlide(e);t&&(this.viewportElement.scrollTop=t.range[0]*(this.viewportElement.scrollHeight-this.viewportElement.offsetHeight))}else this.activatedCallbacks.push((()=>this.scrollToSlide(e)))}storeScrollPosition(){clearTimeout(this.storeScrollPositionTimeout),this.storeScrollPositionTimeout=setTimeout((()=>{sessionStorage.setItem("reveal-scroll-top",this.viewportElement.scrollTop),sessionStorage.setItem("reveal-scroll-origin",location.origin+location.pathname),this.storeScrollPositionTimeout=null}),50)}restoreScrollPosition(){const e=sessionStorage.getItem("reveal-scroll-top"),t=sessionStorage.getItem("reveal-scroll-origin");e&&t===location.origin+location.pathname&&(this.viewportElement.scrollTop=parseInt(e,10))}activatePage(e){if(!e.active){e.active=!0;const{slideElement:t,backgroundElement:i,contentElement:s,indexh:a,indexv:n}=e;s.style.display="block",t.classList.add("present"),i&&i.classList.add("present"),this.Reveal.setCurrentScrollPage(t,a,n),this.Reveal.backgrounds.bubbleSlideContrastClassToElement(t,this.viewportElement),Array.from(s.parentNode.querySelectorAll(".scroll-page-content")).forEach((e=>{e!==s&&(e.style.display="none")}))}}deactivatePage(e){e.active&&(e.active=!1,e.slideElement&&e.slideElement.classList.remove("present"),e.backgroundElement&&e.backgroundElement.classList.remove("present"))}activateTrigger(e){e.active||(e.active=!0,e.activate())}deactivateTrigger(e){e.active&&(e.active=!1,e.deactivate&&e.deactivate())}getSlideByIndices(e,t){const i=this.getAllPages().find((i=>i.indexh===e&&i.indexv===t));return i?i.slideElement:null}getScrollTriggerBySlide(e){return this.slideTriggers.find((t=>t.page.slideElement===e))}getAllPages(){return this.pages.flatMap((e=>[e,...e.autoAnimatePages||[]]))}onScroll(){this.syncScrollPosition(),this.storeScrollPosition()}get viewportElement(){return this.Reveal.getViewportElement()}}class C{constructor(e){this.Reveal=e}async activate(){const e=this.Reveal.getConfig(),i=t(this.Reveal.getRevealElement(),m),s=e.slideNumber&&/all|print/i.test(e.showSlideNumber),a=this.Reveal.getComputedSlideSize(window.innerWidth,window.innerHeight),n=Math.floor(a.width*(1+e.margin)),r=Math.floor(a.height*(1+e.margin)),o=a.width,d=a.height;await new Promise(requestAnimationFrame),l("@page{size:"+n+"px "+r+"px; margin: 0px;}"),l(".reveal section>img, .reveal section>video, .reveal section>iframe{max-width: "+o+"px; max-height:"+d+"px}"),document.documentElement.classList.add("reveal-print","print-pdf"),document.body.style.width=n+"px",document.body.style.height=r+"px";const c=this.Reveal.getViewportElement();let h;if(c){const e=window.getComputedStyle(c);e&&e.background&&(h=e.background)}await new Promise(requestAnimationFrame),this.Reveal.layoutSlideContents(o,d),await new Promise(requestAnimationFrame);const u=i.map((e=>e.scrollHeight)),g=[],v=i[0].parentNode;let p=1;i.forEach((function(i,a){if(!1===i.classList.contains("stack")){let l=(n-o)/2,c=(r-d)/2;const v=u[a];let m=Math.max(Math.ceil(v/r),1);m=Math.min(m,e.pdfMaxPagesPerSlide),(1===m&&e.center||i.classList.contains("center"))&&(c=Math.max((r-v)/2,0));const f=document.createElement("div");if(g.push(f),f.className="pdf-page",f.style.height=(r+e.pdfPageHeightOffset)*m+"px",h&&(f.style.background=h),f.appendChild(i),i.style.left=l+"px",i.style.top=c+"px",i.style.width=o+"px",this.Reveal.slideContent.layout(i),i.slideBackgroundElement&&f.insertBefore(i.slideBackgroundElement,i),e.showNotes){const t=this.Reveal.getSlideNotes(i);if(t){const i=8,s="string"==typeof e.showNotes?e.showNotes:"inline",a=document.createElement("div");a.classList.add("speaker-notes"),a.classList.add("speaker-notes-pdf"),a.setAttribute("data-layout",s),a.innerHTML=t,"separate-page"===s?g.push(a):(a.style.left=i+"px",a.style.bottom=i+"px",a.style.width=n-2*i+"px",f.appendChild(a))}}if(s){const e=document.createElement("div");e.classList.add("slide-number"),e.classList.add("slide-number-pdf"),e.innerHTML=p++,f.appendChild(e)}if(e.pdfSeparateFragments){const e=this.Reveal.fragments.sort(f.querySelectorAll(".fragment"),!0);let t;e.forEach((function(e,i){t&&t.forEach((function(e){e.classList.remove("current-fragment")})),e.forEach((function(e){e.classList.add("visible","current-fragment")}),this);const a=f.cloneNode(!0);if(s){const e=i+1;a.querySelector(".slide-number-pdf").innerHTML+="."+e}g.push(a),t=e}),this),e.forEach((function(e){e.forEach((function(e){e.classList.remove("visible","current-fragment")}))}))}else t(f,".fragment:not(.fade-out)").forEach((function(e){e.classList.add("visible")}))}}),this),await new Promise(requestAnimationFrame),g.forEach((e=>v.appendChild(e))),this.Reveal.slideContent.layout(this.Reveal.getSlidesElement()),this.Reveal.dispatchEvent({type:"pdf-ready"}),c.classList.remove("loading-scroll-mode")}isActive(){return"print"===this.Reveal.getConfig().view}}class x{constructor(e){this.Reveal=e}configure(e,t){!1===e.fragments?this.disable():!1===t.fragments&&this.enable()}disable(){t(this.Reveal.getSlidesElement(),".fragment").forEach((e=>{e.classList.add("visible"),e.classList.remove("current-fragment")}))}enable(){t(this.Reveal.getSlidesElement(),".fragment").forEach((e=>{e.classList.remove("visible"),e.classList.remove("current-fragment")}))}availableRoutes(){let e=this.Reveal.getCurrentSlide();if(e&&this.Reveal.getConfig().fragments){let t=e.querySelectorAll(".fragment:not(.disabled)"),i=e.querySelectorAll(".fragment:not(.disabled):not(.visible)");return{prev:t.length-i.length>0,next:!!i.length}}return{prev:!1,next:!1}}sort(e,t=!1){e=Array.from(e);let i=[],s=[],a=[];e.forEach((e=>{if(e.hasAttribute("data-fragment-index")){let t=parseInt(e.getAttribute("data-fragment-index"),10);i[t]||(i[t]=[]),i[t].push(e)}else s.push([e])})),i=i.concat(s);let n=0;return i.forEach((e=>{e.forEach((e=>{a.push(e),e.setAttribute("data-fragment-index",n)})),n++})),!0===t?i:a}sortAll(){this.Reveal.getHorizontalSlides().forEach((e=>{let i=t(e,"section");i.forEach(((e,t)=>{this.sort(e.querySelectorAll(".fragment"))}),this),0===i.length&&this.sort(e.querySelectorAll(".fragment"))}))}update(e,t,i=this.Reveal.getCurrentSlide()){let s={shown:[],hidden:[]};if(i&&this.Reveal.getConfig().fragments&&(t=t||this.sort(i.querySelectorAll(".fragment"))).length){let a=0;if("number"!=typeof e){let t=this.sort(i.querySelectorAll(".fragment.visible")).pop();t&&(e=parseInt(t.getAttribute("data-fragment-index")||0,10))}Array.from(t).forEach(((t,i)=>{if(t.hasAttribute("data-fragment-index")&&(i=parseInt(t.getAttribute("data-fragment-index"),10)),a=Math.max(a,i),i<=e){let a=t.classList.contains("visible");t.classList.add("visible"),t.classList.remove("current-fragment"),i===e&&(this.Reveal.announceStatus(this.Reveal.getStatusText(t)),t.classList.add("current-fragment"),this.Reveal.slideContent.startEmbeddedContent(t)),a||(s.shown.push(t),this.Reveal.dispatchEvent({target:t,type:"visible",bubbles:!1}))}else{let e=t.classList.contains("visible");t.classList.remove("visible"),t.classList.remove("current-fragment"),e&&(this.Reveal.slideContent.stopEmbeddedContent(t),s.hidden.push(t),this.Reveal.dispatchEvent({target:t,type:"hidden",bubbles:!1}))}})),e="number"==typeof e?e:-1,e=Math.max(Math.min(e,a),-1),i.setAttribute("data-fragment",e)}return s.hidden.length&&this.Reveal.dispatchEvent({type:"fragmenthidden",data:{fragment:s.hidden[0],fragments:s.hidden}}),s.shown.length&&this.Reveal.dispatchEvent({type:"fragmentshown",data:{fragment:s.shown[0],fragments:s.shown}}),s}sync(e=this.Reveal.getCurrentSlide()){return this.sort(e.querySelectorAll(".fragment"))}goto(e,t=0){let i=this.Reveal.getCurrentSlide();if(i&&this.Reveal.getConfig().fragments){let s=this.sort(i.querySelectorAll(".fragment:not(.disabled)"));if(s.length){if("number"!=typeof e){let t=this.sort(i.querySelectorAll(".fragment:not(.disabled).visible")).pop();e=t?parseInt(t.getAttribute("data-fragment-index")||0,10):-1}e+=t;let a=this.update(e,s);return this.Reveal.controls.update(),this.Reveal.progress.update(),this.Reveal.getConfig().fragmentInURL&&this.Reveal.location.writeURL(),!(!a.shown.length&&!a.hidden.length)}}return!1}next(){return this.goto(null,1)}prev(){return this.goto(null,-1)}}class P{constructor(e){this.Reveal=e,this.active=!1,this.onSlideClicked=this.onSlideClicked.bind(this)}activate(){if(this.Reveal.getConfig().overview&&!this.Reveal.isScrollView()&&!this.isActive()){this.active=!0,this.Reveal.getRevealElement().classList.add("overview"),this.Reveal.cancelAutoSlide(),this.Reveal.getSlidesElement().appendChild(this.Reveal.getBackgroundsElement()),t(this.Reveal.getRevealElement(),m).forEach((e=>{e.classList.contains("stack")||e.addEventListener("click",this.onSlideClicked,!0)}));const e=70,i=this.Reveal.getComputedSlideSize();this.overviewSlideWidth=i.width+e,this.overviewSlideHeight=i.height+e,this.Reveal.getConfig().rtl&&(this.overviewSlideWidth=-this.overviewSlideWidth),this.Reveal.updateSlidesVisibility(),this.layout(),this.update(),this.Reveal.layout();const s=this.Reveal.getIndices();this.Reveal.dispatchEvent({type:"overviewshown",data:{indexh:s.h,indexv:s.v,currentSlide:this.Reveal.getCurrentSlide()}})}}layout(){this.Reveal.getHorizontalSlides().forEach(((e,i)=>{e.setAttribute("data-index-h",i),a(e,"translate3d("+i*this.overviewSlideWidth+"px, 0, 0)"),e.classList.contains("stack")&&t(e,"section").forEach(((e,t)=>{e.setAttribute("data-index-h",i),e.setAttribute("data-index-v",t),a(e,"translate3d(0, "+t*this.overviewSlideHeight+"px, 0)")}))})),Array.from(this.Reveal.getBackgroundsElement().childNodes).forEach(((e,i)=>{a(e,"translate3d("+i*this.overviewSlideWidth+"px, 0, 0)"),t(e,".slide-background").forEach(((e,t)=>{a(e,"translate3d(0, "+t*this.overviewSlideHeight+"px, 0)")}))}))}update(){const e=Math.min(window.innerWidth,window.innerHeight),t=Math.max(e/5,150)/e,i=this.Reveal.getIndices();this.Reveal.transformSlides({overview:["scale("+t+")","translateX("+-i.h*this.overviewSlideWidth+"px)","translateY("+-i.v*this.overviewSlideHeight+"px)"].join(" ")})}deactivate(){if(this.Reveal.getConfig().overview){this.active=!1,this.Reveal.getRevealElement().classList.remove("overview"),this.Reveal.getRevealElement().classList.add("overview-deactivating"),setTimeout((()=>{this.Reveal.getRevealElement().classList.remove("overview-deactivating")}),1),this.Reveal.getRevealElement().appendChild(this.Reveal.getBackgroundsElement()),t(this.Reveal.getRevealElement(),m).forEach((e=>{a(e,""),e.removeEventListener("click",this.onSlideClicked,!0)})),t(this.Reveal.getBackgroundsElement(),".slide-background").forEach((e=>{a(e,"")})),this.Reveal.transformSlides({overview:""});const e=this.Reveal.getIndices();this.Reveal.slide(e.h,e.v),this.Reveal.layout(),this.Reveal.cueAutoSlide(),this.Reveal.dispatchEvent({type:"overviewhidden",data:{indexh:e.h,indexv:e.v,currentSlide:this.Reveal.getCurrentSlide()}})}}toggle(e){"boolean"==typeof e?e?this.activate():this.deactivate():this.isActive()?this.deactivate():this.activate()}isActive(){return this.active}onSlideClicked(e){if(this.isActive()){e.preventDefault();let t=e.target;for(;t&&!t.nodeName.match(/section/gi);)t=t.parentNode;if(t&&!t.classList.contains("disabled")&&(this.deactivate(),t.nodeName.match(/section/gi))){let e=parseInt(t.getAttribute("data-index-h"),10),i=parseInt(t.getAttribute("data-index-v"),10);this.Reveal.slide(e,i)}}}}class T{constructor(e){this.Reveal=e,this.shortcuts={},this.bindings={},this.onDocumentKeyDown=this.onDocumentKeyDown.bind(this)}configure(e,t){"linear"===e.navigationMode?(this.shortcuts["&#8594;  ,  &#8595;  ,  SPACE  ,  N  ,  L  ,  J"]="Next slide",this.shortcuts["&#8592;  ,  &#8593;  ,  P  ,  H  ,  K"]="Previous slide"):(this.shortcuts["N  ,  SPACE"]="Next slide",this.shortcuts["P  ,  Shift SPACE"]="Previous slide",this.shortcuts["&#8592;  ,  H"]="Navigate left",this.shortcuts["&#8594;  ,  L"]="Navigate right",this.shortcuts["&#8593;  ,  K"]="Navigate up",this.shortcuts["&#8595;  ,  J"]="Navigate down"),this.shortcuts["Alt + &#8592;/&#8593/&#8594;/&#8595;"]="Navigate without fragments",this.shortcuts["Shift + &#8592;/&#8593/&#8594;/&#8595;"]="Jump to first/last slide",this.shortcuts["B  ,  ."]="Pause",this.shortcuts.F="Fullscreen",this.shortcuts.G="Jump to slide",this.shortcuts["ESC, O"]="Slide overview"}bind(){document.addEventListener("keydown",this.onDocumentKeyDown,!1)}unbind(){document.removeEventListener("keydown",this.onDocumentKeyDown,!1)}addKeyBinding(e,t){"object"==typeof e&&e.keyCode?this.bindings[e.keyCode]={callback:t,key:e.key,description:e.description}:this.bindings[e]={callback:t,key:null,description:null}}removeKeyBinding(e){delete this.bindings[e]}triggerKey(e){this.onDocumentKeyDown({keyCode:e})}registerKeyboardShortcut(e,t){this.shortcuts[e]=t}getShortcuts(){return this.shortcuts}getBindings(){return this.bindings}onDocumentKeyDown(e){let t=this.Reveal.getConfig();if("function"==typeof t.keyboardCondition&&!1===t.keyboardCondition(e))return!0;if("focused"===t.keyboardCondition&&!this.Reveal.isFocused())return!0;let i=e.keyCode,s=!this.Reveal.isAutoSliding();this.Reveal.onUserInput(e);let a=document.activeElement&&!0===document.activeElement.isContentEditable,n=document.activeElement&&document.activeElement.tagName&&/input|textarea/i.test(document.activeElement.tagName),r=document.activeElement&&document.activeElement.className&&/speaker-notes/i.test(document.activeElement.className),l=!(-1!==[32,37,38,39,40,63,78,80,191].indexOf(e.keyCode)&&e.shiftKey||e.altKey)&&(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey);if(a||n||r||l)return;let d,c=[66,86,190,191,112];if("object"==typeof t.keyboard)for(d in t.keyboard)"togglePause"===t.keyboard[d]&&c.push(parseInt(d,10));if(this.Reveal.isOverlayOpen()&&!["Escape","f","c","b","."].includes(e.key))return!1;if(this.Reveal.isPaused()&&-1===c.indexOf(i))return!1;let h="linear"===t.navigationMode||!this.Reveal.hasHorizontalSlides()||!this.Reveal.hasVerticalSlides(),u=!1;if("object"==typeof t.keyboard)for(d in t.keyboard)if(parseInt(d,10)===i){let i=t.keyboard[d];"function"==typeof i?i.apply(null,[e]):"string"==typeof i&&"function"==typeof this.Reveal[i]&&this.Reveal[i].call(),u=!0}if(!1===u)for(d in this.bindings)if(parseInt(d,10)===i){let t=this.bindings[d].callback;"function"==typeof t?t.apply(null,[e]):"string"==typeof t&&"function"==typeof this.Reveal[t]&&this.Reveal[t].call(),u=!0}!1===u&&(u=!0,80===i||33===i?this.Reveal.prev({skipFragments:e.altKey}):78===i||34===i?this.Reveal.next({skipFragments:e.altKey}):72===i||37===i?e.shiftKey?this.Reveal.slide(0):!this.Reveal.overview.isActive()&&h?t.rtl?this.Reveal.next({skipFragments:e.altKey}):this.Reveal.prev({skipFragments:e.altKey}):this.Reveal.left({skipFragments:e.altKey}):76===i||39===i?e.shiftKey?this.Reveal.slide(this.Reveal.getHorizontalSlides().length-1):!this.Reveal.overview.isActive()&&h?t.rtl?this.Reveal.prev({skipFragments:e.altKey}):this.Reveal.next({skipFragments:e.altKey}):this.Reveal.right({skipFragments:e.altKey}):75===i||38===i?e.shiftKey?this.Reveal.slide(void 0,0):!this.Reveal.overview.isActive()&&h?this.Reveal.prev({skipFragments:e.altKey}):this.Reveal.up({skipFragments:e.altKey}):74===i||40===i?e.shiftKey?this.Reveal.slide(void 0,Number.MAX_VALUE):!this.Reveal.overview.isActive()&&h?this.Reveal.next({skipFragments:e.altKey}):this.Reveal.down({skipFragments:e.altKey}):36===i?this.Reveal.slide(0):35===i?this.Reveal.slide(this.Reveal.getHorizontalSlides().length-1):32===i?(this.Reveal.overview.isActive()&&this.Reveal.overview.deactivate(),e.shiftKey?this.Reveal.prev({skipFragments:e.altKey}):this.Reveal.next({skipFragments:e.altKey})):[58,59,66,86,190].includes(i)||191===i&&!e.shiftKey?this.Reveal.togglePause():70===i?o(t.embedded?this.Reveal.getViewportElement():document.documentElement):65===i?t.autoSlideStoppable&&this.Reveal.toggleAutoSlide(s):71===i?t.jumpToSlide&&this.Reveal.toggleJumpToSlide():67===i&&this.Reveal.isOverlayOpen()?this.Reveal.closeOverlay():63!==i&&191!==i||!e.shiftKey?112===i?this.Reveal.toggleHelp():u=!1:this.Reveal.toggleHelp()),u?e.preventDefault&&e.preventDefault():27!==i&&79!==i||(!1===this.Reveal.closeOverlay()&&this.Reveal.overview.toggle(),e.preventDefault&&e.preventDefault()),this.Reveal.cueAutoSlide()}}class N{MAX_REPLACE_STATE_FREQUENCY=1e3;constructor(e){this.Reveal=e,this.writeURLTimeout=0,this.replaceStateTimestamp=0,this.onWindowHashChange=this.onWindowHashChange.bind(this)}bind(){window.addEventListener("hashchange",this.onWindowHashChange,!1)}unbind(){window.removeEventListener("hashchange",this.onWindowHashChange,!1)}getIndicesFromHash(e=window.location.hash,t={}){let i=e.replace(/^#\/?/,""),s=i.split("/");if(/^[0-9]*$/.test(s[0])||!i.length){const e=this.Reveal.getConfig();let i,a=e.hashOneBasedIndex||t.oneBasedIndex?1:0,n=parseInt(s[0],10)-a||0,r=parseInt(s[1],10)-a||0;return e.fragmentInURL&&(i=parseInt(s[2],10),isNaN(i)&&(i=void 0)),{h:n,v:r,f:i}}{let e,t;/\/[-\d]+$/g.test(i)&&(t=parseInt(i.split("/").pop(),10),t=isNaN(t)?void 0:t,i=i.split("/").shift());try{e=document.getElementById(decodeURIComponent(i)).closest(".slides section")}catch(e){}if(e)return{...this.Reveal.getIndices(e),f:t}}return null}readURL(){const e=this.Reveal.getIndices(),t=this.getIndicesFromHash();t?t.h===e.h&&t.v===e.v&&void 0===t.f||this.Reveal.slide(t.h,t.v,t.f):this.Reveal.slide(e.h||0,e.v||0)}writeURL(e){let t=this.Reveal.getConfig(),i=this.Reveal.getCurrentSlide();if(clearTimeout(this.writeURLTimeout),"number"==typeof e)this.writeURLTimeout=setTimeout(this.writeURL,e);else if(i){let e=this.getHash();t.history?window.location.hash=e:t.hash&&("/"===e?this.debouncedReplaceState(window.location.pathname+window.location.search):this.debouncedReplaceState("#"+e))}}replaceState(e){window.history.replaceState(null,null,e),this.replaceStateTimestamp=Date.now()}debouncedReplaceState(e){clearTimeout(this.replaceStateTimeout),Date.now()-this.replaceStateTimestamp>this.MAX_REPLACE_STATE_FREQUENCY?this.replaceState(e):this.replaceStateTimeout=setTimeout((()=>this.replaceState(e)),this.MAX_REPLACE_STATE_FREQUENCY)}getHash(e){let t="/",i=e||this.Reveal.getCurrentSlide(),s=i?i.getAttribute("id"):null;s&&(s=encodeURIComponent(s));let a=this.Reveal.getIndices(e);if(this.Reveal.getConfig().fragmentInURL||(a.f=void 0),"string"==typeof s&&s.length)t="/"+s,a.f>=0&&(t+="/"+a.f);else{let e=this.Reveal.getConfig().hashOneBasedIndex?1:0;(a.h>0||a.v>0||a.f>=0)&&(t+=a.h+e),(a.v>0||a.f>=0)&&(t+="/"+(a.v+e)),a.f>=0&&(t+="/"+a.f)}return t}onWindowHashChange(e){this.readURL()}}class I{constructor(e){this.Reveal=e,this.onNavigateLeftClicked=this.onNavigateLeftClicked.bind(this),this.onNavigateRightClicked=this.onNavigateRightClicked.bind(this),this.onNavigateUpClicked=this.onNavigateUpClicked.bind(this),this.onNavigateDownClicked=this.onNavigateDownClicked.bind(this),this.onNavigatePrevClicked=this.onNavigatePrevClicked.bind(this),this.onNavigateNextClicked=this.onNavigateNextClicked.bind(this),this.onEnterFullscreen=this.onEnterFullscreen.bind(this)}render(){const e=this.Reveal.getConfig().rtl,i=this.Reveal.getRevealElement();this.element=document.createElement("aside"),this.element.className="controls",this.element.innerHTML=`<button class="navigate-left" aria-label="${e?"next slide":"previous slide"}"><div class="controls-arrow"></div></button>\n\t\t\t<button class="navigate-right" aria-label="${e?"previous slide":"next slide"}"><div class="controls-arrow"></div></button>\n\t\t\t<button class="navigate-up" aria-label="above slide"><div class="controls-arrow"></div></button>\n\t\t\t<button class="navigate-down" aria-label="below slide"><div class="controls-arrow"></div></button>`,this.Reveal.getRevealElement().appendChild(this.element),this.controlsLeft=t(i,".navigate-left"),this.controlsRight=t(i,".navigate-right"),this.controlsUp=t(i,".navigate-up"),this.controlsDown=t(i,".navigate-down"),this.controlsPrev=t(i,".navigate-prev"),this.controlsNext=t(i,".navigate-next"),this.controlsFullscreen=t(i,".enter-fullscreen"),this.controlsRightArrow=this.element.querySelector(".navigate-right"),this.controlsLeftArrow=this.element.querySelector(".navigate-left"),this.controlsDownArrow=this.element.querySelector(".navigate-down")}configure(e,t){this.element.style.display=e.controls&&("speaker-only"!==e.controls||this.Reveal.isSpeakerNotes())?"block":"none",this.element.setAttribute("data-controls-layout",e.controlsLayout),this.element.setAttribute("data-controls-back-arrows",e.controlsBackArrows)}bind(){let e=["touchstart","click"];g&&(e=["touchstart"]),e.forEach((e=>{this.controlsLeft.forEach((t=>t.addEventListener(e,this.onNavigateLeftClicked,!1))),this.controlsRight.forEach((t=>t.addEventListener(e,this.onNavigateRightClicked,!1))),this.controlsUp.forEach((t=>t.addEventListener(e,this.onNavigateUpClicked,!1))),this.controlsDown.forEach((t=>t.addEventListener(e,this.onNavigateDownClicked,!1))),this.controlsPrev.forEach((t=>t.addEventListener(e,this.onNavigatePrevClicked,!1))),this.controlsNext.forEach((t=>t.addEventListener(e,this.onNavigateNextClicked,!1))),this.controlsFullscreen.forEach((t=>t.addEventListener(e,this.onEnterFullscreen,!1)))}))}unbind(){["touchstart","click"].forEach((e=>{this.controlsLeft.forEach((t=>t.removeEventListener(e,this.onNavigateLeftClicked,!1))),this.controlsRight.forEach((t=>t.removeEventListener(e,this.onNavigateRightClicked,!1))),this.controlsUp.forEach((t=>t.removeEventListener(e,this.onNavigateUpClicked,!1))),this.controlsDown.forEach((t=>t.removeEventListener(e,this.onNavigateDownClicked,!1))),this.controlsPrev.forEach((t=>t.removeEventListener(e,this.onNavigatePrevClicked,!1))),this.controlsNext.forEach((t=>t.removeEventListener(e,this.onNavigateNextClicked,!1))),this.controlsFullscreen.forEach((t=>t.removeEventListener(e,this.onEnterFullscreen,!1)))}))}update(){let e=this.Reveal.availableRoutes();[...this.controlsLeft,...this.controlsRight,...this.controlsUp,...this.controlsDown,...this.controlsPrev,...this.controlsNext].forEach((e=>{e.classList.remove("enabled","fragmented"),e.setAttribute("disabled","disabled")})),e.left&&this.controlsLeft.forEach((e=>{e.classList.add("enabled"),e.removeAttribute("disabled")})),e.right&&this.controlsRight.forEach((e=>{e.classList.add("enabled"),e.removeAttribute("disabled")})),e.up&&this.controlsUp.forEach((e=>{e.classList.add("enabled"),e.removeAttribute("disabled")})),e.down&&this.controlsDown.forEach((e=>{e.classList.add("enabled"),e.removeAttribute("disabled")})),(e.left||e.up)&&this.controlsPrev.forEach((e=>{e.classList.add("enabled"),e.removeAttribute("disabled")})),(e.right||e.down)&&this.controlsNext.forEach((e=>{e.classList.add("enabled"),e.removeAttribute("disabled")}));let t=this.Reveal.getCurrentSlide();if(t){let e=this.Reveal.fragments.availableRoutes();e.prev&&this.controlsPrev.forEach((e=>{e.classList.add("fragmented","enabled"),e.removeAttribute("disabled")})),e.next&&this.controlsNext.forEach((e=>{e.classList.add("fragmented","enabled"),e.removeAttribute("disabled")}));const i=this.Reveal.isVerticalSlide(t),s=i&&t.parentElement&&t.parentElement.querySelectorAll(":scope > section").length>1;i&&s?(e.prev&&this.controlsUp.forEach((e=>{e.classList.add("fragmented","enabled"),e.removeAttribute("disabled")})),e.next&&this.controlsDown.forEach((e=>{e.classList.add("fragmented","enabled"),e.removeAttribute("disabled")}))):(e.prev&&this.controlsLeft.forEach((e=>{e.classList.add("fragmented","enabled"),e.removeAttribute("disabled")})),e.next&&this.controlsRight.forEach((e=>{e.classList.add("fragmented","enabled"),e.removeAttribute("disabled")})))}if(this.Reveal.getConfig().controlsTutorial){let t=this.Reveal.getIndices();!this.Reveal.hasNavigatedVertically()&&e.down?this.controlsDownArrow.classList.add("highlight"):(this.controlsDownArrow.classList.remove("highlight"),this.Reveal.getConfig().rtl?!this.Reveal.hasNavigatedHorizontally()&&e.left&&0===t.v?this.controlsLeftArrow.classList.add("highlight"):this.controlsLeftArrow.classList.remove("highlight"):!this.Reveal.hasNavigatedHorizontally()&&e.right&&0===t.v?this.controlsRightArrow.classList.add("highlight"):this.controlsRightArrow.classList.remove("highlight"))}}destroy(){this.unbind(),this.element.remove()}onNavigateLeftClicked(e){e.preventDefault(),this.Reveal.onUserInput(),"linear"===this.Reveal.getConfig().navigationMode?this.Reveal.prev():this.Reveal.left()}onNavigateRightClicked(e){e.preventDefault(),this.Reveal.onUserInput(),"linear"===this.Reveal.getConfig().navigationMode?this.Reveal.next():this.Reveal.right()}onNavigateUpClicked(e){e.preventDefault(),this.Reveal.onUserInput(),this.Reveal.up()}onNavigateDownClicked(e){e.preventDefault(),this.Reveal.onUserInput(),this.Reveal.down()}onNavigatePrevClicked(e){e.preventDefault(),this.Reveal.onUserInput(),this.Reveal.prev()}onNavigateNextClicked(e){e.preventDefault(),this.Reveal.onUserInput(),this.Reveal.next()}onEnterFullscreen(e){const t=this.Reveal.getConfig(),i=this.Reveal.getViewportElement();o(t.embedded?i:i.parentElement)}}class M{constructor(e){this.Reveal=e,this.onProgressClicked=this.onProgressClicked.bind(this)}render(){this.element=document.createElement("div"),this.element.className="progress",this.Reveal.getRevealElement().appendChild(this.element),this.bar=document.createElement("span"),this.element.appendChild(this.bar)}configure(e,t){this.element.style.display=e.progress?"block":"none"}bind(){this.Reveal.getConfig().progress&&this.element&&this.element.addEventListener("click",this.onProgressClicked,!1)}unbind(){this.Reveal.getConfig().progress&&this.element&&this.element.removeEventListener("click",this.onProgressClicked,!1)}update(){if(this.Reveal.getConfig().progress&&this.bar){let e=this.Reveal.getProgress();this.Reveal.getTotalSlides()<2&&(e=0),this.bar.style.transform="scaleX("+e+")"}}getMaxWidth(){return this.Reveal.getRevealElement().offsetWidth}onProgressClicked(e){this.Reveal.onUserInput(e),e.preventDefault();let t=this.Reveal.getSlides(),i=t.length,s=Math.floor(e.clientX/this.getMaxWidth()*i);this.Reveal.getConfig().rtl&&(s=i-s);let a=this.Reveal.getIndices(t[s]);this.Reveal.slide(a.h,a.v)}destroy(){this.element.remove()}}class B{constructor(e){this.Reveal=e,this.lastMouseWheelStep=0,this.cursorHidden=!1,this.cursorInactiveTimeout=0,this.onDocumentCursorActive=this.onDocumentCursorActive.bind(this),this.onDocumentMouseScroll=this.onDocumentMouseScroll.bind(this)}configure(e,t){e.mouseWheel?document.addEventListener("wheel",this.onDocumentMouseScroll,!1):document.removeEventListener("wheel",this.onDocumentMouseScroll,!1),e.hideInactiveCursor?(document.addEventListener("mousemove",this.onDocumentCursorActive,!1),document.addEventListener("mousedown",this.onDocumentCursorActive,!1)):(this.showCursor(),document.removeEventListener("mousemove",this.onDocumentCursorActive,!1),document.removeEventListener("mousedown",this.onDocumentCursorActive,!1))}showCursor(){this.cursorHidden&&(this.cursorHidden=!1,this.Reveal.getRevealElement().style.cursor="")}hideCursor(){!1===this.cursorHidden&&(this.cursorHidden=!0,this.Reveal.getRevealElement().style.cursor="none")}destroy(){this.showCursor(),document.removeEventListener("wheel",this.onDocumentMouseScroll,!1),document.removeEventListener("mousemove",this.onDocumentCursorActive,!1),document.removeEventListener("mousedown",this.onDocumentCursorActive,!1)}onDocumentCursorActive(e){this.showCursor(),clearTimeout(this.cursorInactiveTimeout),this.cursorInactiveTimeout=setTimeout(this.hideCursor.bind(this),this.Reveal.getConfig().hideCursorTime)}onDocumentMouseScroll(e){if(Date.now()-this.lastMouseWheelStep>1e3){this.lastMouseWheelStep=Date.now();let t=e.detail||-e.wheelDelta;t>0?this.Reveal.next():t<0&&this.Reveal.prev()}}}const H=(e,t)=>{const i=document.createElement("script");i.type="text/javascript",i.async=!1,i.defer=!1,i.src=e,"function"==typeof t&&(i.onload=i.onreadystatechange=e=>{("load"===e.type||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=i.onerror=null,t())},i.onerror=e=>{i.onload=i.onreadystatechange=i.onerror=null,t(new Error("Failed loading script: "+i.src+"\n"+e))});const s=document.querySelector("head");s.insertBefore(i,s.lastChild)};class D{constructor(e){this.Reveal=e,this.state="idle",this.registeredPlugins={},this.asyncDependencies=[]}load(e,t){return this.state="loading",e.forEach(this.registerPlugin.bind(this)),new Promise((e=>{let i=[],s=0;if(t.forEach((e=>{e.condition&&!e.condition()||(e.async?this.asyncDependencies.push(e):i.push(e))})),i.length){s=i.length;const t=t=>{t&&"function"==typeof t.callback&&t.callback(),0==--s&&this.initPlugins().then(e)};i.forEach((e=>{"string"==typeof e.id?(this.registerPlugin(e),t(e)):"string"==typeof e.src?H(e.src,(()=>t(e))):(console.warn("Unrecognized plugin format",e),t())}))}else this.initPlugins().then(e)}))}initPlugins(){return new Promise((e=>{let t=Object.values(this.registeredPlugins),i=t.length;if(0===i)this.loadAsync().then(e);else{let s,a=()=>{0==--i?this.loadAsync().then(e):s()},n=0;s=()=>{let e=t[n++];if("function"==typeof e.init){let t=e.init(this.Reveal);t&&"function"==typeof t.then?t.then(a):a()}else a()},s()}}))}loadAsync(){return this.state="loaded",this.asyncDependencies.length&&this.asyncDependencies.forEach((e=>{H(e.src,e.callback)})),Promise.resolve()}registerPlugin(e){2===arguments.length&&"string"==typeof arguments[0]?(e=arguments[1]).id=arguments[0]:"function"==typeof e&&(e=e());let t=e.id;"string"!=typeof t?console.warn("Unrecognized plugin format; can't find plugin.id",e):void 0===this.registeredPlugins[t]?(this.registeredPlugins[t]=e,"loaded"===this.state&&"function"==typeof e.init&&e.init(this.Reveal)):console.warn('reveal.js: "'+t+'" plugin has already been registered')}hasPlugin(e){return!!this.registeredPlugins[e]}getPlugin(e){return this.registeredPlugins[e]}getRegisteredPlugins(){return this.registeredPlugins}destroy(){Object.values(this.registeredPlugins).forEach((e=>{"function"==typeof e.destroy&&e.destroy()})),this.registeredPlugins={},this.asyncDependencies=[]}}class F{constructor(e){this.Reveal=e,this.onSlidesClicked=this.onSlidesClicked.bind(this),this.iframeTriggerSelector=null,this.mediaTriggerSelector="[data-preview-image], [data-preview-video]",this.stateProps=["previewIframe","previewImage","previewVideo","previewFit"],this.state={}}update(){this.Reveal.getConfig().previewLinks?this.iframeTriggerSelector="a[href]:not([data-preview-link=false]), [data-preview-link]:not(a):not([data-preview-link=false])":this.iframeTriggerSelector="[data-preview-link]:not([data-preview-link=false])";const e=this.Reveal.getSlidesElement().querySelectorAll(this.iframeTriggerSelector).length>0,t=this.Reveal.getSlidesElement().querySelectorAll(this.mediaTriggerSelector).length>0;e||t?this.Reveal.getSlidesElement().addEventListener("click",this.onSlidesClicked,!1):this.Reveal.getSlidesElement().removeEventListener("click",this.onSlidesClicked,!1)}createOverlay(e){this.dom=document.createElement("div"),this.dom.classList.add("r-overlay"),this.dom.classList.add(e),this.viewport=document.createElement("div"),this.viewport.classList.add("r-overlay-viewport"),this.dom.appendChild(this.viewport),this.Reveal.getRevealElement().appendChild(this.dom)}previewIframe(e){this.close(),this.state={previewIframe:e},this.createOverlay("r-overlay-preview"),this.dom.dataset.state="loading",this.viewport.innerHTML=`<header class="r-overlay-header">\n\t\t\t\t<a class="r-overlay-button r-overlay-external" href="${e}" target="_blank"><span class="icon"></span></a>\n\t\t\t\t<button class="r-overlay-button r-overlay-close"><span class="icon"></span></button>\n\t\t\t</header>\n\t\t\t<div class="r-overlay-spinner"></div>\n\t\t\t<div class="r-overlay-content">\n\t\t\t\t<iframe src="${e}"></iframe>\n\t\t\t\t<small class="r-overlay-content-inner">\n\t\t\t\t\t<span class="r-overlay-error x-frame-error">Unable to load iframe. This is likely due to the site's policy (x-frame-options).</span>\n\t\t\t\t</small>\n\t\t\t</div>`,this.dom.querySelector("iframe").addEventListener("load",(e=>{this.dom.dataset.state="loaded"}),!1),this.dom.querySelector(".r-overlay-close").addEventListener("click",(e=>{this.close(),e.preventDefault()}),!1),this.dom.querySelector(".r-overlay-external").addEventListener("click",(e=>{this.close()}),!1),this.Reveal.dispatchEvent({type:"previewiframe",data:{url:e}})}previewMedia(e,t,i){if("image"!==t&&"video"!==t)return void console.warn("Please specify a valid media type to preview (image|video)");this.close(),i=i||"scale-down",this.createOverlay("r-overlay-preview"),this.dom.dataset.state="loading",this.dom.dataset.previewFit=i,this.viewport.innerHTML='<header class="r-overlay-header">\n\t\t\t\t<button class="r-overlay-button r-overlay-close">Esc <span class="icon"></span></button>\n\t\t\t</header>\n\t\t\t<div class="r-overlay-spinner"></div>\n\t\t\t<div class="r-overlay-content"></div>';const s=this.dom.querySelector(".r-overlay-content");if("image"===t){this.state={previewImage:e,previewFit:i};const t=document.createElement("img",{});t.src=e,s.appendChild(t),t.addEventListener("load",(()=>{this.dom.dataset.state="loaded"}),!1),t.addEventListener("error",(()=>{this.dom.dataset.state="error",s.innerHTML='<span class="r-overlay-error">Unable to load image.</span>'}),!1),this.dom.style.cursor="zoom-out",this.dom.addEventListener("click",(e=>{this.close()}),!1),this.Reveal.dispatchEvent({type:"previewimage",data:{url:e}})}else{if("video"!==t)throw new Error("Please specify a valid media type to preview");{this.state={previewVideo:e,previewFit:i};const t=document.createElement("video");t.autoplay="false"!==this.dom.dataset.previewAutoplay,t.controls="false"!==this.dom.dataset.previewControls,t.loop="true"===this.dom.dataset.previewLoop,t.muted="true"===this.dom.dataset.previewMuted,t.playsInline=!0,t.src=e,s.appendChild(t),t.addEventListener("loadeddata",(()=>{this.dom.dataset.state="loaded"}),!1),t.addEventListener("error",(()=>{this.dom.dataset.state="error",s.innerHTML='<span class="r-overlay-error">Unable to load video.</span>'}),!1),this.Reveal.dispatchEvent({type:"previewvideo",data:{url:e}})}}this.dom.querySelector(".r-overlay-close").addEventListener("click",(e=>{this.close(),e.preventDefault()}),!1)}previewImage(e,t){this.previewMedia(e,"image",t)}previewVideo(e,t){this.previewMedia(e,"video",t)}toggleHelp(e){"boolean"==typeof e?e?this.showHelp():this.close():this.dom?this.close():this.showHelp()}showHelp(){if(this.Reveal.getConfig().help){this.close(),this.createOverlay("r-overlay-help");let e='<p class="title">Keyboard Shortcuts</p>',t=this.Reveal.keyboard.getShortcuts(),i=this.Reveal.keyboard.getBindings();e+="<table><th>KEY</th><th>ACTION</th>";for(let i in t)e+=`<tr><td>${i}</td><td>${t[i]}</td></tr>`;for(let t in i)i[t].key&&i[t].description&&(e+=`<tr><td>${i[t].key}</td><td>${i[t].description}</td></tr>`);e+="</table>",this.viewport.innerHTML=`\n\t\t\t\t<header class="r-overlay-header">\n\t\t\t\t\t<button class="r-overlay-button r-overlay-close">Esc <span class="icon"></span></button>\n\t\t\t\t</header>\n\t\t\t\t<div class="r-overlay-content">\n\t\t\t\t\t<div class="r-overlay-help-content">${e}</div>\n\t\t\t\t</div>\n\t\t\t`,this.dom.querySelector(".r-overlay-close").addEventListener("click",(e=>{this.close(),e.preventDefault()}),!1),this.Reveal.dispatchEvent({type:"showhelp"})}}isOpen(){return!!this.dom}close(){return!!this.dom&&(this.dom.remove(),this.dom=null,this.state={},this.Reveal.dispatchEvent({type:"closeoverlay"}),!0)}getState(){return this.state}setState(e){this.stateProps.every((t=>this.state[t]===e[t]))||(e.previewIframe?this.previewIframe(e.previewIframe):e.previewImage?this.previewImage(e.previewImage,e.previewFit):e.previewVideo?this.previewVideo(e.previewVideo,e.previewFit):this.close())}onSlidesClicked(e){const t=e.target,i=t.closest(this.iframeTriggerSelector),s=t.closest(this.mediaTriggerSelector);if(i){if(e.metaKey||e.shiftKey||e.altKey)return;let t=i.getAttribute("href")||i.getAttribute("data-preview-link");t&&(this.previewIframe(t),e.preventDefault())}else if(s)if(s.hasAttribute("data-preview-image")){let t=s.dataset.previewImage||s.getAttribute("src");t&&(this.previewImage(t,s.dataset.previewFit),e.preventDefault())}else if(s.hasAttribute("data-preview-video")){let t=s.dataset.previewVideo||s.getAttribute("src");if(!t){let e=s.querySelector("source");e&&(t=e.getAttribute("src"))}t&&(this.previewVideo(t,s.dataset.previewFit),e.preventDefault())}}destroy(){this.close()}}class z{constructor(e){this.Reveal=e,this.touchStartX=0,this.touchStartY=0,this.touchStartCount=0,this.touchCaptured=!1,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)}bind(){let e=this.Reveal.getRevealElement();"onpointerdown"in window?(e.addEventListener("pointerdown",this.onPointerDown,!1),e.addEventListener("pointermove",this.onPointerMove,!1),e.addEventListener("pointerup",this.onPointerUp,!1)):window.navigator.msPointerEnabled?(e.addEventListener("MSPointerDown",this.onPointerDown,!1),e.addEventListener("MSPointerMove",this.onPointerMove,!1),e.addEventListener("MSPointerUp",this.onPointerUp,!1)):(e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1))}unbind(){let e=this.Reveal.getRevealElement();e.removeEventListener("pointerdown",this.onPointerDown,!1),e.removeEventListener("pointermove",this.onPointerMove,!1),e.removeEventListener("pointerup",this.onPointerUp,!1),e.removeEventListener("MSPointerDown",this.onPointerDown,!1),e.removeEventListener("MSPointerMove",this.onPointerMove,!1),e.removeEventListener("MSPointerUp",this.onPointerUp,!1),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1)}isSwipePrevented(e){if(n(e,"video[controls], audio[controls]"))return!0;for(;e&&"function"==typeof e.hasAttribute;){if(e.hasAttribute("data-prevent-swipe"))return!0;e=e.parentNode}return!1}onTouchStart(e){if(this.touchCaptured=!1,this.isSwipePrevented(e.target))return!0;this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY,this.touchStartCount=e.touches.length}onTouchMove(e){if(this.isSwipePrevented(e.target))return!0;let t=this.Reveal.getConfig();if(this.touchCaptured)g&&e.preventDefault();else{this.Reveal.onUserInput(e);let i=e.touches[0].clientX,s=e.touches[0].clientY;if(1===e.touches.length&&2!==this.touchStartCount){let a=this.Reveal.availableRoutes({includeFragments:!0}),n=i-this.touchStartX,r=s-this.touchStartY;n>40&&Math.abs(n)>Math.abs(r)?(this.touchCaptured=!0,"linear"===t.navigationMode?t.rtl?this.Reveal.next():this.Reveal.prev():this.Reveal.left()):n<-40&&Math.abs(n)>Math.abs(r)?(this.touchCaptured=!0,"linear"===t.navigationMode?t.rtl?this.Reveal.prev():this.Reveal.next():this.Reveal.right()):r>40&&a.up?(this.touchCaptured=!0,"linear"===t.navigationMode?this.Reveal.prev():this.Reveal.up()):r<-40&&a.down&&(this.touchCaptured=!0,"linear"===t.navigationMode?this.Reveal.next():this.Reveal.down()),t.embedded?(this.touchCaptured||this.Reveal.isVerticalSlide())&&e.preventDefault():e.preventDefault()}}}onTouchEnd(e){this.touchCaptured=!1}onPointerDown(e){e.pointerType!==e.MSPOINTER_TYPE_TOUCH&&"touch"!==e.pointerType||(e.touches=[{clientX:e.clientX,clientY:e.clientY}],this.onTouchStart(e))}onPointerMove(e){e.pointerType!==e.MSPOINTER_TYPE_TOUCH&&"touch"!==e.pointerType||(e.touches=[{clientX:e.clientX,clientY:e.clientY}],this.onTouchMove(e))}onPointerUp(e){e.pointerType!==e.MSPOINTER_TYPE_TOUCH&&"touch"!==e.pointerType||(e.touches=[{clientX:e.clientX,clientY:e.clientY}],this.onTouchEnd(e))}}const q="focus",O="blur";class V{constructor(e){this.Reveal=e,this.onRevealPointerDown=this.onRevealPointerDown.bind(this),this.onDocumentPointerDown=this.onDocumentPointerDown.bind(this)}configure(e,t){e.embedded?this.blur():(this.focus(),this.unbind())}bind(){this.Reveal.getConfig().embedded&&this.Reveal.getRevealElement().addEventListener("pointerdown",this.onRevealPointerDown,!1)}unbind(){this.Reveal.getRevealElement().removeEventListener("pointerdown",this.onRevealPointerDown,!1),document.removeEventListener("pointerdown",this.onDocumentPointerDown,!1)}focus(){this.state!==q&&(this.Reveal.getRevealElement().classList.add("focused"),document.addEventListener("pointerdown",this.onDocumentPointerDown,!1)),this.state=q}blur(){this.state!==O&&(this.Reveal.getRevealElement().classList.remove("focused"),document.removeEventListener("pointerdown",this.onDocumentPointerDown,!1)),this.state=O}isFocused(){return this.state===q}destroy(){this.Reveal.getRevealElement().classList.remove("focused")}onRevealPointerDown(e){this.focus()}onDocumentPointerDown(e){let t=r(e.target,".reveal");t&&t===this.Reveal.getRevealElement()||this.blur()}}class U{constructor(e){this.Reveal=e}render(){this.element=document.createElement("div"),this.element.className="speaker-notes",this.element.setAttribute("data-prevent-swipe",""),this.element.setAttribute("tabindex","0"),this.Reveal.getRevealElement().appendChild(this.element)}configure(e,t){e.showNotes&&this.element.setAttribute("data-layout","string"==typeof e.showNotes?e.showNotes:"inline")}update(){this.Reveal.getConfig().showNotes&&this.element&&this.Reveal.getCurrentSlide()&&!this.Reveal.isScrollView()&&!this.Reveal.isPrintView()&&(this.element.innerHTML=this.getSlideNotes()||'<span class="notes-placeholder">No notes on this slide.</span>')}updateVisibility(){this.Reveal.getConfig().showNotes&&this.hasNotes()&&!this.Reveal.isScrollView()&&!this.Reveal.isPrintView()?this.Reveal.getRevealElement().classList.add("show-notes"):this.Reveal.getRevealElement().classList.remove("show-notes")}hasNotes(){return this.Reveal.getSlidesElement().querySelectorAll("[data-notes], aside.notes").length>0}isSpeakerNotesWindow(){return!!window.location.search.match(/receiver/gi)}getSlideNotes(e=this.Reveal.getCurrentSlide()){if(e.hasAttribute("data-notes"))return e.getAttribute("data-notes");let t=e.querySelectorAll("aside.notes");return t?Array.from(t).map((e=>e.innerHTML)).join("\n"):null}destroy(){this.element.remove()}}class W{constructor(e,t){this.diameter=100,this.diameter2=this.diameter/2,this.thickness=6,this.playing=!1,this.progress=0,this.progressOffset=1,this.container=e,this.progressCheck=t,this.canvas=document.createElement("canvas"),this.canvas.className="playback",this.canvas.width=this.diameter,this.canvas.height=this.diameter,this.canvas.style.width=this.diameter2+"px",this.canvas.style.height=this.diameter2+"px",this.context=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.render()}setPlaying(e){const t=this.playing;this.playing=e,!t&&this.playing?this.animate():this.render()}animate(){const e=this.progress;this.progress=this.progressCheck(),e>.8&&this.progress<.2&&(this.progressOffset=this.progress),this.render(),this.playing&&requestAnimationFrame(this.animate.bind(this))}render(){let e=this.playing?this.progress:0,t=this.diameter2-this.thickness,i=this.diameter2,s=this.diameter2,a=28;this.progressOffset+=.1*(1-this.progressOffset);const n=-Math.PI/2+e*(2*Math.PI),r=-Math.PI/2+this.progressOffset*(2*Math.PI);this.context.save(),this.context.clearRect(0,0,this.diameter,this.diameter),this.context.beginPath(),this.context.arc(i,s,t+4,0,2*Math.PI,!1),this.context.fillStyle="rgba( 0, 0, 0, 0.4 )",this.context.fill(),this.context.beginPath(),this.context.arc(i,s,t,0,2*Math.PI,!1),this.context.lineWidth=this.thickness,this.context.strokeStyle="rgba( 255, 255, 255, 0.2 )",this.context.stroke(),this.playing&&(this.context.beginPath(),this.context.arc(i,s,t,r,n,!1),this.context.lineWidth=this.thickness,this.context.strokeStyle="#fff",this.context.stroke()),this.context.translate(i-14,s-14),this.playing?(this.context.fillStyle="#fff",this.context.fillRect(0,0,10,a),this.context.fillRect(18,0,10,a)):(this.context.beginPath(),this.context.translate(4,0),this.context.moveTo(0,0),this.context.lineTo(24,14),this.context.lineTo(0,a),this.context.fillStyle="#fff",this.context.fill()),this.context.restore()}on(e,t){this.canvas.addEventListener(e,t,!1)}off(e,t){this.canvas.removeEventListener(e,t,!1)}destroy(){this.playing=!1,this.canvas.parentNode&&this.container.removeChild(this.canvas)}}var j={width:960,height:700,margin:.04,minScale:.2,maxScale:2,controls:!0,controlsTutorial:!0,controlsLayout:"bottom-right",controlsBackArrows:"faded",progress:!0,slideNumber:!1,showSlideNumber:"all",hashOneBasedIndex:!1,hash:!1,respondToHashChanges:!0,jumpToSlide:!0,history:!1,keyboard:!0,keyboardCondition:null,disableLayout:!1,overview:!0,center:!0,touch:!0,loop:!1,rtl:!1,navigationMode:"default",shuffle:!1,fragments:!0,fragmentInURL:!0,embedded:!1,help:!0,pause:!0,showNotes:!1,showHiddenSlides:!1,autoPlayMedia:null,preloadIframes:null,autoAnimate:!0,autoAnimateMatcher:null,autoAnimateEasing:"ease",autoAnimateDuration:1,autoAnimateUnmatched:!0,autoAnimateStyles:["opacity","color","background-color","padding","font-size","line-height","letter-spacing","border-width","border-color","border-radius","outline","outline-offset"],autoSlide:0,autoSlideStoppable:!0,autoSlideMethod:null,defaultTiming:null,mouseWheel:!1,previewLinks:!1,postMessage:!0,postMessageEvents:!1,focusBodyOnPageVisibilityChange:!0,transition:"slide",transitionSpeed:"default",backgroundTransition:"fade",parallaxBackgroundImage:"",parallaxBackgroundSize:"",parallaxBackgroundRepeat:"",parallaxBackgroundPosition:"",parallaxBackgroundHorizontal:null,parallaxBackgroundVertical:null,view:null,scrollLayout:"full",scrollSnap:"mandatory",scrollProgress:"auto",scrollActivationWidth:435,pdfMaxPagesPerSlide:Number.POSITIVE_INFINITY,pdfSeparateFragments:!0,pdfPageHeightOffset:-1,viewDistance:3,mobileViewDistance:2,display:"block",hideInactiveCursor:!0,hideCursorTime:5e3,sortFragmentsOnSync:!0,dependencies:[],plugins:[]};const K="5.2.1";function $(n,o){arguments.length<2&&(o=arguments[0],n=document.querySelector(".reveal"));const l={};let c,h,g,v,S,A={},H=!1,q=!1,O={hasNavigatedHorizontally:!1,hasNavigatedVertically:!1},$=[],X=1,Y={layout:"",overview:""},_={},J="idle",G=0,Q=0,Z=-1,ee=!1,te=new p(l),ie=new w(l),se=new E(l),ae=new k(l),ne=new R(l),re=new L(l),oe=new C(l),le=new x(l),de=new P(l),ce=new T(l),he=new N(l),ue=new I(l),ge=new M(l),ve=new B(l),pe=new D(l),me=new F(l),fe=new V(l),ye=new z(l),be=new U(l);function we(){!1!==H&&(q=!0,A.showHiddenSlides||t(_.wrapper,'section[data-visibility="hidden"]').forEach((e=>{const t=e.parentNode;1===t.childElementCount&&/section/i.test(t.nodeName)?t.remove():e.remove()})),function(){_.slides.classList.add("no-transition"),u?_.wrapper.classList.add("no-hover"):_.wrapper.classList.remove("no-hover");ne.render(),ie.render(),se.render(),ue.render(),ge.render(),be.render(),_.pauseOverlay=((e,t,i,s="")=>{let a=e.querySelectorAll("."+i);for(let t=0;t<a.length;t++){let i=a[t];if(i.parentNode===e)return i}let n=document.createElement(t);return n.className=i,n.innerHTML=s,e.appendChild(n),n})(_.wrapper,"div","pause-overlay",A.controls?'<button class="resume-button">Resume presentation</button>':null),_.statusElement=function(){let e=_.wrapper.querySelector(".aria-status");e||(e=document.createElement("div"),e.style.position="absolute",e.style.height="1px",e.style.width="1px",e.style.overflow="hidden",e.style.clip="rect( 1px, 1px, 1px, 1px )",e.classList.add("aria-status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),_.wrapper.appendChild(e));return e}(),_.wrapper.setAttribute("role","application")}(),A.postMessage&&window.addEventListener("message",wt,!1),setInterval((()=>{(!re.isActive()&&0!==_.wrapper.scrollTop||0!==_.wrapper.scrollLeft)&&(_.wrapper.scrollTop=0,_.wrapper.scrollLeft=0)}),1e3),document.addEventListener("fullscreenchange",kt),document.addEventListener("webkitfullscreenchange",kt),st().forEach((e=>{t(e,"section").forEach(((e,t)=>{t>0&&(e.classList.remove("present"),e.classList.remove("past"),e.classList.add("future"),e.setAttribute("aria-hidden","true"))}))})),Re(),ne.update(!0),function(){const e="print"===A.view,t="scroll"===A.view||"reader"===A.view;(e||t)&&(e?ke():ye.unbind(),_.viewport.classList.add("loading-scroll-mode"),e?"complete"===document.readyState?oe.activate():window.addEventListener("load",(()=>oe.activate())):re.activate())}(),he.readURL(),setTimeout((()=>{_.slides.classList.remove("no-transition"),_.wrapper.classList.add("ready"),Pe({type:"ready",data:{indexh:c,indexv:h,currentSlide:v}})}),1))}function Ee(e){_.statusElement.textContent=e}function Se(e){let t="";if(3===e.nodeType)t+=e.textContent;else if(1===e.nodeType){let i=e.getAttribute("aria-hidden"),s="none"===window.getComputedStyle(e).display;"true"===i||s||Array.from(e.childNodes).forEach((e=>{t+=Se(e)}))}return t=t.trim(),""===t?"":t+" "}function Re(t){const s={...A};if("object"==typeof t&&e(A,t),!1===l.isReady())return;const a=_.wrapper.querySelectorAll(m).length;_.wrapper.classList.remove(s.transition),_.wrapper.classList.add(A.transition),_.wrapper.setAttribute("data-transition-speed",A.transitionSpeed),_.wrapper.setAttribute("data-background-transition",A.backgroundTransition),_.viewport.style.setProperty("--slide-width","string"==typeof A.width?A.width:A.width+"px"),_.viewport.style.setProperty("--slide-height","string"==typeof A.height?A.height:A.height+"px"),A.shuffle&&Ye(),i(_.wrapper,"embedded",A.embedded),i(_.wrapper,"rtl",A.rtl),i(_.wrapper,"center",A.center),!1===A.pause&&Ue(),ae.reset(),S&&(S.destroy(),S=null),a>1&&A.autoSlide&&A.autoSlideStoppable&&(S=new W(_.wrapper,(()=>Math.min(Math.max((Date.now()-Z)/G,0),1))),S.on("click",Lt),ee=!1),"default"!==A.navigationMode?_.wrapper.setAttribute("data-navigation-mode",A.navigationMode):_.wrapper.removeAttribute("data-navigation-mode"),be.configure(A,s),fe.configure(A,s),ve.configure(A,s),ue.configure(A,s),ge.configure(A,s),ce.configure(A,s),le.configure(A,s),ie.configure(A,s),Xe()}function Ae(){window.addEventListener("resize",Rt,!1),A.touch&&ye.bind(),A.keyboard&&ce.bind(),A.progress&&ge.bind(),A.respondToHashChanges&&he.bind(),ue.bind(),fe.bind(),_.slides.addEventListener("click",St,!1),_.slides.addEventListener("transitionend",Et,!1),_.pauseOverlay.addEventListener("click",Ue,!1),A.focusBodyOnPageVisibilityChange&&document.addEventListener("visibilitychange",At,!1)}function ke(){ye.unbind(),fe.unbind(),ce.unbind(),ue.unbind(),ge.unbind(),he.unbind(),window.removeEventListener("resize",Rt,!1),_.slides.removeEventListener("click",St,!1),_.slides.removeEventListener("transitionend",Et,!1),_.pauseOverlay.removeEventListener("click",Ue,!1)}function Le(e,t,i){n.addEventListener(e,t,i)}function Ce(e,t,i){n.removeEventListener(e,t,i)}function xe(e){"string"==typeof e.layout&&(Y.layout=e.layout),"string"==typeof e.overview&&(Y.overview=e.overview),Y.layout?a(_.slides,Y.layout+" "+Y.overview):a(_.slides,Y.overview)}function Pe({target:t=_.wrapper,type:i,data:s,bubbles:a=!0}){let n=document.createEvent("HTMLEvents",1,2);return n.initEvent(i,a,!0),e(n,s),t.dispatchEvent(n),t===_.wrapper&&Ne(i),n}function Te(e){Pe({type:"slidechanged",data:{indexh:c,indexv:h,previousSlide:g,currentSlide:v,origin:e}})}function Ne(t,i){if(A.postMessageEvents&&window.parent!==window.self){let s={namespace:"reveal",eventName:t,state:dt()};e(s,i),window.parent.postMessage(JSON.stringify(s),"*")}}function Ie(){if(_.wrapper&&!oe.isActive()){const e=_.viewport.offsetWidth,t=_.viewport.offsetHeight;if(!A.disableLayout){u&&!A.embedded&&document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px");const i=re.isActive()?Be(e,t):Be(),s=X;Me(A.width,A.height),_.slides.style.width=i.width+"px",_.slides.style.height=i.height+"px",X=Math.min(i.presentationWidth/i.width,i.presentationHeight/i.height),X=Math.max(X,A.minScale),X=Math.min(X,A.maxScale),1===X||re.isActive()?(_.slides.style.zoom="",_.slides.style.left="",_.slides.style.top="",_.slides.style.bottom="",_.slides.style.right="",xe({layout:""})):(_.slides.style.zoom="",_.slides.style.left="50%",_.slides.style.top="50%",_.slides.style.bottom="auto",_.slides.style.right="auto",xe({layout:"translate(-50%, -50%) scale("+X+")"}));const a=Array.from(_.wrapper.querySelectorAll(m));for(let e=0,t=a.length;e<t;e++){const t=a[e];"none"!==t.style.display&&(A.center||t.classList.contains("center")?t.classList.contains("stack")?t.style.top=0:t.style.top=Math.max((i.height-t.scrollHeight)/2,0)+"px":t.style.top="")}s!==X&&Pe({type:"resize",data:{oldScale:s,scale:X,size:i}})}!function(){if(_.wrapper&&!A.disableLayout&&!oe.isActive()&&"number"==typeof A.scrollActivationWidth&&"scroll"!==A.view){const e=Be();e.presentationWidth>0&&e.presentationWidth<=A.scrollActivationWidth?re.isActive()||(ne.create(),re.activate()):re.isActive()&&re.deactivate()}}(),_.viewport.style.setProperty("--slide-scale",X),_.viewport.style.setProperty("--viewport-width",e+"px"),_.viewport.style.setProperty("--viewport-height",t+"px"),re.layout(),ge.update(),ne.updateParallax(),de.isActive()&&de.update()}}function Me(e,i){t(_.slides,"section > .stretch, section > .r-stretch").forEach((t=>{let s=((e,t=0)=>{if(e){let i,s=e.style.height;return e.style.height="0px",e.parentNode.style.height="auto",i=t-e.parentNode.offsetHeight,e.style.height=s+"px",e.parentNode.style.removeProperty("height"),i}return t})(t,i);if(/(img|video)/gi.test(t.nodeName)){const i=t.naturalWidth||t.videoWidth,a=t.naturalHeight||t.videoHeight,n=Math.min(e/i,s/a);t.style.width=i*n+"px",t.style.height=a*n+"px"}else t.style.width=e+"px",t.style.height=s+"px"}))}function Be(e,t){let i=A.width,s=A.height;A.disableLayout&&(i=_.slides.offsetWidth,s=_.slides.offsetHeight);const a={width:i,height:s,presentationWidth:e||_.wrapper.offsetWidth,presentationHeight:t||_.wrapper.offsetHeight};return a.presentationWidth-=a.presentationWidth*A.margin,a.presentationHeight-=a.presentationHeight*A.margin,"string"==typeof a.width&&/%$/.test(a.width)&&(a.width=parseInt(a.width,10)/100*a.presentationWidth),"string"==typeof a.height&&/%$/.test(a.height)&&(a.height=parseInt(a.height,10)/100*a.presentationHeight),a}function He(e,t){"object"==typeof e&&"function"==typeof e.setAttribute&&e.setAttribute("data-previous-indexv",t||0)}function De(e){if("object"==typeof e&&"function"==typeof e.setAttribute&&e.classList.contains("stack")){const t=e.hasAttribute("data-start-indexv")?"data-start-indexv":"data-previous-indexv";return parseInt(e.getAttribute(t)||0,10)}return 0}function Fe(e=v){return e&&e.parentNode&&!!e.parentNode.nodeName.match(/section/i)}function ze(){return!(!v||!Fe(v))&&!v.nextElementSibling}function qe(){return 0===c&&0===h}function Oe(){return!!v&&(!v.nextElementSibling&&(!Fe(v)||!v.parentNode.nextElementSibling))}function Ve(){if(A.pause){const e=_.wrapper.classList.contains("paused");ht(),_.wrapper.classList.add("paused"),!1===e&&Pe({type:"paused"})}}function Ue(){const e=_.wrapper.classList.contains("paused");_.wrapper.classList.remove("paused"),ct(),e&&Pe({type:"resumed"})}function We(e){"boolean"==typeof e?e?Ve():Ue():je()?Ue():Ve()}function je(){return _.wrapper.classList.contains("paused")}function Ke(e,i,s,a){if(Pe({type:"beforeslidechange",data:{indexh:void 0===e?c:e,indexv:void 0===i?h:i,origin:a}}).defaultPrevented)return;g=v;const r=_.wrapper.querySelectorAll(f);if(re.isActive()){const t=re.getSlideByIndices(e,i);return void(t&&re.scrollToSlide(t))}if(0===r.length)return;void 0!==i||de.isActive()||(i=De(r[e])),g&&g.parentNode&&g.parentNode.classList.contains("stack")&&He(g.parentNode,h);const o=$.concat();$.length=0;let l=c||0,d=h||0;c=_e(f,void 0===e?c:e),h=_e(y,void 0===i?h:i);let u=c!==l||h!==d;u||(g=null);let p=r[c],m=p.querySelectorAll("section");n.classList.toggle("is-vertical-slide",m.length>1),v=m[h]||p;let b=!1;u&&g&&v&&!de.isActive()&&(J="running",b=$e(g,v,l,d),b&&_.slides.classList.add("disable-slide-transitions")),Qe(),Ie(),de.isActive()&&de.update(),void 0!==s&&le.goto(s),g&&g!==v&&(g.classList.remove("present"),g.setAttribute("aria-hidden","true"),qe()&&setTimeout((()=>{t(_.wrapper,f+".stack").forEach((e=>{He(e,0)}))}),0));e:for(let e=0,t=$.length;e<t;e++){for(let t=0;t<o.length;t++)if(o[t]===$[e]){o.splice(t,1);continue e}_.viewport.classList.add($[e]),Pe({type:$[e]})}for(;o.length;)_.viewport.classList.remove(o.pop());u&&Te(a),!u&&g||(te.stopEmbeddedContent(g),te.startEmbeddedContent(v)),requestAnimationFrame((()=>{Ee(Se(v))})),ge.update(),ue.update(),be.update(),ne.update(),ne.updateParallax(),ie.update(),le.update(),he.writeURL(),ct(),b&&(setTimeout((()=>{_.slides.classList.remove("disable-slide-transitions")}),0),A.autoAnimate&&ae.run(g,v))}function $e(e,t,i,s){return e.hasAttribute("data-auto-animate")&&t.hasAttribute("data-auto-animate")&&e.getAttribute("data-auto-animate-id")===t.getAttribute("data-auto-animate-id")&&!(c>i||h>s?t:e).hasAttribute("data-auto-animate-restart")}function Xe(){ke(),Ae(),Ie(),G=A.autoSlide,ct(),ne.create(),he.writeURL(),!0===A.sortFragmentsOnSync&&le.sortAll(),ue.update(),ge.update(),Qe(),be.update(),be.updateVisibility(),me.update(),ne.update(!0),ie.update(),te.formatEmbeddedContent(),!1===A.autoPlayMedia?te.stopEmbeddedContent(v,{unloadIframes:!1}):te.startEmbeddedContent(v),de.isActive()&&de.layout()}function Ye(e=st()){e.forEach(((t,i)=>{let s=e[Math.floor(Math.random()*e.length)];s.parentNode===t.parentNode&&t.parentNode.insertBefore(t,s);let a=t.querySelectorAll("section");a.length&&Ye(a)}))}function _e(e,i){let s=t(_.wrapper,e),a=s.length,n=re.isActive()||oe.isActive(),r=!1,o=!1;if(a){A.loop&&(i>=a&&(r=!0),(i%=a)<0&&(i=a+i,o=!0)),i=Math.max(Math.min(i,a-1),0);for(let e=0;e<a;e++){let t=s[e],a=A.rtl&&!Fe(t);t.classList.remove("past"),t.classList.remove("present"),t.classList.remove("future"),t.setAttribute("hidden",""),t.setAttribute("aria-hidden","true"),t.querySelector("section")&&t.classList.add("stack"),n?t.classList.add("present"):e<i?(t.classList.add(a?"future":"past"),A.fragments&&Je(t)):e>i?(t.classList.add(a?"past":"future"),A.fragments&&Ge(t)):e===i&&A.fragments&&(r?Ge(t):o&&Je(t))}let e=s[i],t=e.classList.contains("present");e.classList.add("present"),e.removeAttribute("hidden"),e.removeAttribute("aria-hidden"),t||Pe({target:e,type:"visible",bubbles:!1});let l=e.getAttribute("data-state");l&&($=$.concat(l.split(" ")))}else i=0;return i}function Je(e){t(e,".fragment").forEach((e=>{e.classList.add("visible"),e.classList.remove("current-fragment")}))}function Ge(e){t(e,".fragment.visible").forEach((e=>{e.classList.remove("visible","current-fragment")}))}function Qe(){let e,i,s=st(),a=s.length;if(a&&void 0!==c){let n=de.isActive()?10:A.viewDistance;u&&(n=de.isActive()?6:A.mobileViewDistance),oe.isActive()&&(n=Number.MAX_VALUE);for(let r=0;r<a;r++){let o=s[r],l=t(o,"section"),d=l.length;if(e=Math.abs((c||0)-r)||0,A.loop&&(e=Math.abs(((c||0)-r)%(a-n))||0),e<n?te.load(o):te.unload(o),d){let t=De(o);for(let s=0;s<d;s++){let a=l[s];i=r===(c||0)?Math.abs((h||0)-s):Math.abs(s-t),e+i<n?te.load(a):te.unload(a)}}}rt()?_.wrapper.classList.add("has-vertical-slides"):_.wrapper.classList.remove("has-vertical-slides"),nt()?_.wrapper.classList.add("has-horizontal-slides"):_.wrapper.classList.remove("has-horizontal-slides")}}function Ze({includeFragments:e=!1}={}){let t=_.wrapper.querySelectorAll(f),i=_.wrapper.querySelectorAll(y),s={left:c>0,right:c<t.length-1,up:h>0,down:h<i.length-1};if(A.loop&&(t.length>1&&(s.left=!0,s.right=!0),i.length>1&&(s.up=!0,s.down=!0)),t.length>1&&"linear"===A.navigationMode&&(s.right=s.right||s.down,s.left=s.left||s.up),!0===e){let e=le.availableRoutes();s.left=s.left||e.prev,s.up=s.up||e.prev,s.down=s.down||e.next,s.right=s.right||e.next}if(A.rtl){let e=s.left;s.left=s.right,s.right=e}return s}function et(e=v){let t=st(),i=0;e:for(let s=0;s<t.length;s++){let a=t[s],n=a.querySelectorAll("section");for(let t=0;t<n.length;t++){if(n[t]===e)break e;"uncounted"!==n[t].dataset.visibility&&i++}if(a===e)break;!1===a.classList.contains("stack")&&"uncounted"!==a.dataset.visibility&&i++}return i}function tt(e){let i,s=c,a=h;if(e)if(re.isActive())s=parseInt(e.getAttribute("data-index-h"),10),e.getAttribute("data-index-v")&&(a=parseInt(e.getAttribute("data-index-v"),10));else{let i=Fe(e),n=i?e.parentNode:e,r=st();s=Math.max(r.indexOf(n),0),a=void 0,i&&(a=Math.max(t(e.parentNode,"section").indexOf(e),0))}if(!e&&v){if(v.querySelectorAll(".fragment").length>0){let e=v.querySelector(".current-fragment");i=e&&e.hasAttribute("data-fragment-index")?parseInt(e.getAttribute("data-fragment-index"),10):v.querySelectorAll(".fragment.visible").length-1}}return{h:s,v:a,f:i}}function it(){return t(_.wrapper,m+':not(.stack):not([data-visibility="uncounted"])')}function st(){return t(_.wrapper,f)}function at(){return t(_.wrapper,".slides>section>section")}function nt(){return st().length>1}function rt(){return at().length>1}function ot(){return it().length}function lt(e,t){let i=st()[e],s=i&&i.querySelectorAll("section");return s&&s.length&&"number"==typeof t?s?s[t]:void 0:i}function dt(){let e=tt();return{indexh:e.h,indexv:e.v,indexf:e.f,paused:je(),overview:de.isActive(),...me.getState()}}function ct(){if(ht(),v&&!1!==A.autoSlide){let e=v.querySelector(".current-fragment[data-autoslide]"),i=e?e.getAttribute("data-autoslide"):null,s=v.parentNode?v.parentNode.getAttribute("data-autoslide"):null,a=v.getAttribute("data-autoslide");i?G=parseInt(i,10):a?G=parseInt(a,10):s?G=parseInt(s,10):(G=A.autoSlide,0===v.querySelectorAll(".fragment").length&&t(v,"video, audio").forEach((e=>{e.hasAttribute("data-autoplay")&&G&&1e3*e.duration/e.playbackRate>G&&(G=1e3*e.duration/e.playbackRate+1e3)}))),!G||ee||je()||de.isActive()||Oe()&&!le.availableRoutes().next&&!0!==A.loop||(Q=setTimeout((()=>{"function"==typeof A.autoSlideMethod?A.autoSlideMethod():bt(),ct()}),G),Z=Date.now()),S&&S.setPlaying(-1!==Q)}}function ht(){clearTimeout(Q),Q=-1}function ut(){G&&!ee&&(ee=!0,Pe({type:"autoslidepaused"}),clearTimeout(Q),S&&S.setPlaying(!1))}function gt(){G&&ee&&(ee=!1,Pe({type:"autoslideresumed"}),ct())}function vt({skipFragments:e=!1}={}){if(O.hasNavigatedHorizontally=!0,re.isActive())return re.prev();A.rtl?(de.isActive()||e||!1===le.next())&&Ze().left&&Ke(c+1,"grid"===A.navigationMode?h:void 0):(de.isActive()||e||!1===le.prev())&&Ze().left&&Ke(c-1,"grid"===A.navigationMode?h:void 0)}function pt({skipFragments:e=!1}={}){if(O.hasNavigatedHorizontally=!0,re.isActive())return re.next();A.rtl?(de.isActive()||e||!1===le.prev())&&Ze().right&&Ke(c-1,"grid"===A.navigationMode?h:void 0):(de.isActive()||e||!1===le.next())&&Ze().right&&Ke(c+1,"grid"===A.navigationMode?h:void 0)}function mt({skipFragments:e=!1}={}){if(re.isActive())return re.prev();(de.isActive()||e||!1===le.prev())&&Ze().up&&Ke(c,h-1)}function ft({skipFragments:e=!1}={}){if(O.hasNavigatedVertically=!0,re.isActive())return re.next();(de.isActive()||e||!1===le.next())&&Ze().down&&Ke(c,h+1)}function yt({skipFragments:e=!1}={}){if(re.isActive())return re.prev();if(e||!1===le.prev())if(Ze().up)mt({skipFragments:e});else{let i;if(i=A.rtl?t(_.wrapper,f+".future").pop():t(_.wrapper,f+".past").pop(),i&&i.classList.contains("stack")){let e=i.querySelectorAll("section").length-1||void 0;Ke(c-1,e)}else A.rtl?pt({skipFragments:e}):vt({skipFragments:e})}}function bt({skipFragments:e=!1}={}){if(O.hasNavigatedHorizontally=!0,O.hasNavigatedVertically=!0,re.isActive())return re.next();if(e||!1===le.next()){let t=Ze();t.down&&t.right&&A.loop&&ze()&&(t.down=!1),t.down?ft({skipFragments:e}):A.rtl?vt({skipFragments:e}):pt({skipFragments:e})}}function wt(e){let t=e.data;if("string"==typeof t&&"{"===t.charAt(0)&&"}"===t.charAt(t.length-1)&&(t=JSON.parse(t),t.method&&"function"==typeof l[t.method]))if(!1===b.test(t.method)){const e=l[t.method].apply(l,t.args);Ne("callback",{method:t.method,result:e})}else console.warn('reveal.js: "'+t.method+'" is is blacklisted from the postMessage API')}function Et(e){"running"===J&&/section/gi.test(e.target.nodeName)&&(J="idle",Pe({type:"slidetransitionend",data:{indexh:c,indexv:h,previousSlide:g,currentSlide:v}}))}function St(e){const t=r(e.target,'a[href^="#"]');if(t){const i=t.getAttribute("href"),s=he.getIndicesFromHash(i);s&&(l.slide(s.h,s.v,s.f),e.preventDefault())}}function Rt(e){Ie()}function At(e){!1===document.hidden&&document.activeElement!==document.body&&("function"==typeof document.activeElement.blur&&document.activeElement.blur(),document.body.focus())}function kt(e){(document.fullscreenElement||document.webkitFullscreenElement)===_.wrapper&&(e.stopImmediatePropagation(),setTimeout((()=>{l.layout(),l.focus.focus()}),1))}function Lt(e){Oe()&&!1===A.loop?(Ke(0,0),gt()):ee?gt():ut()}const Ct={VERSION:K,initialize:function(e){if(!n)throw'Unable to find presentation root (<div class="reveal">).';if(H)throw"Reveal.js has already been initialized.";if(H=!0,_.wrapper=n,_.slides=n.querySelector(".slides"),!_.slides)throw'Unable to find slides container (<div class="slides">).';return A={...j,...A,...o,...e,...d()},/print-pdf/gi.test(window.location.search)&&(A.view="print"),function(){!0===A.embedded?_.viewport=r(n,".reveal-viewport")||n:(_.viewport=document.body,document.documentElement.classList.add("reveal-full-page"));_.viewport.classList.add("reveal-viewport")}(),window.addEventListener("load",Ie,!1),pe.load(A.plugins,A.dependencies).then(we),new Promise((e=>l.on("ready",e)))},configure:Re,destroy:function(){H=!1,!1!==q&&(ke(),ht(),be.destroy(),fe.destroy(),me.destroy(),pe.destroy(),ve.destroy(),ue.destroy(),ge.destroy(),ne.destroy(),ie.destroy(),se.destroy(),document.removeEventListener("fullscreenchange",kt),document.removeEventListener("webkitfullscreenchange",kt),document.removeEventListener("visibilitychange",At,!1),window.removeEventListener("message",wt,!1),window.removeEventListener("load",Ie,!1),_.pauseOverlay&&_.pauseOverlay.remove(),_.statusElement&&_.statusElement.remove(),document.documentElement.classList.remove("reveal-full-page"),_.wrapper.classList.remove("ready","center","has-horizontal-slides","has-vertical-slides"),_.wrapper.removeAttribute("data-transition-speed"),_.wrapper.removeAttribute("data-background-transition"),_.viewport.classList.remove("reveal-viewport"),_.viewport.style.removeProperty("--slide-width"),_.viewport.style.removeProperty("--slide-height"),_.slides.style.removeProperty("width"),_.slides.style.removeProperty("height"),_.slides.style.removeProperty("zoom"),_.slides.style.removeProperty("left"),_.slides.style.removeProperty("top"),_.slides.style.removeProperty("bottom"),_.slides.style.removeProperty("right"),_.slides.style.removeProperty("transform"),Array.from(_.wrapper.querySelectorAll(m)).forEach((e=>{e.style.removeProperty("display"),e.style.removeProperty("top"),e.removeAttribute("hidden"),e.removeAttribute("aria-hidden")})))},sync:Xe,syncSlide:function(e=v){ne.sync(e),le.sync(e),te.load(e),ne.update(),be.update()},syncFragments:le.sync.bind(le),slide:Ke,left:vt,right:pt,up:mt,down:ft,prev:yt,next:bt,navigateLeft:vt,navigateRight:pt,navigateUp:mt,navigateDown:ft,navigatePrev:yt,navigateNext:bt,navigateFragment:le.goto.bind(le),prevFragment:le.prev.bind(le),nextFragment:le.next.bind(le),on:Le,off:Ce,addEventListener:Le,removeEventListener:Ce,layout:Ie,shuffle:Ye,availableRoutes:Ze,availableFragments:le.availableRoutes.bind(le),toggleHelp:me.toggleHelp.bind(me),toggleOverview:de.toggle.bind(de),toggleScrollView:re.toggle.bind(re),togglePause:We,toggleAutoSlide:function(e){"boolean"==typeof e?e?gt():ut():ee?gt():ut()},toggleJumpToSlide:function(e){"boolean"==typeof e?e?se.show():se.hide():se.isVisible()?se.hide():se.show()},isFirstSlide:qe,isLastSlide:Oe,isLastVerticalSlide:ze,isVerticalSlide:Fe,isVerticalStack:function(e=v){return e.classList.contains(".stack")||null!==e.querySelector("section")},isPaused:je,isAutoSliding:function(){return!(!G||ee)},isSpeakerNotes:be.isSpeakerNotesWindow.bind(be),isOverview:de.isActive.bind(de),isFocused:fe.isFocused.bind(fe),isOverlayOpen:me.isOpen.bind(me),isScrollView:re.isActive.bind(re),isPrintView:oe.isActive.bind(oe),isReady:()=>q,loadSlide:te.load.bind(te),unloadSlide:te.unload.bind(te),startEmbeddedContent:()=>te.startEmbeddedContent(v),stopEmbeddedContent:()=>te.stopEmbeddedContent(v,{unloadIframes:!1}),previewIframe:me.previewIframe.bind(me),previewImage:me.previewImage.bind(me),previewVideo:me.previewVideo.bind(me),showPreview:me.previewIframe.bind(me),hidePreview:me.close.bind(me),addEventListeners:Ae,removeEventListeners:ke,dispatchEvent:Pe,getState:dt,setState:function(e){if("object"==typeof e){Ke(s(e.indexh),s(e.indexv),s(e.indexf));let t=s(e.paused),i=s(e.overview);"boolean"==typeof t&&t!==je()&&We(t),"boolean"==typeof i&&i!==de.isActive()&&de.toggle(i),me.setState(e)}},getProgress:function(){let e=ot(),t=et();if(v){let e=v.querySelectorAll(".fragment");if(e.length>0){let i=.9;t+=v.querySelectorAll(".fragment.visible").length/e.length*i}}return Math.min(t/(e-1),1)},getIndices:tt,getSlidesAttributes:function(){return it().map((e=>{let t={};for(let i=0;i<e.attributes.length;i++){let s=e.attributes[i];t[s.name]=s.value}return t}))},getSlidePastCount:et,getTotalSlides:ot,getSlide:lt,getPreviousSlide:()=>g,getCurrentSlide:()=>v,getSlideBackground:function(e,t){let i="number"==typeof e?lt(e,t):e;if(i)return i.slideBackgroundElement},getSlideNotes:be.getSlideNotes.bind(be),getSlides:it,getHorizontalSlides:st,getVerticalSlides:at,hasHorizontalSlides:nt,hasVerticalSlides:rt,hasNavigatedHorizontally:()=>O.hasNavigatedHorizontally,hasNavigatedVertically:()=>O.hasNavigatedVertically,shouldAutoAnimateBetween:$e,addKeyBinding:ce.addKeyBinding.bind(ce),removeKeyBinding:ce.removeKeyBinding.bind(ce),triggerKey:ce.triggerKey.bind(ce),registerKeyboardShortcut:ce.registerKeyboardShortcut.bind(ce),getComputedSlideSize:Be,setCurrentScrollPage:function(e,t,i){let s=c||0;c=t,h=i;const a=v!==e;g=v,v=e,v&&g&&A.autoAnimate&&$e(g,v,s,h)&&ae.run(g,v),a&&(g&&(te.stopEmbeddedContent(g),te.stopEmbeddedContent(g.slideBackgroundElement)),te.startEmbeddedContent(v),te.startEmbeddedContent(v.slideBackgroundElement)),requestAnimationFrame((()=>{Ee(Se(v))})),Te()},getScale:()=>X,getConfig:()=>A,getQueryHash:d,getSlidePath:he.getHash.bind(he),getRevealElement:()=>n,getSlidesElement:()=>_.slides,getViewportElement:()=>_.viewport,getBackgroundsElement:()=>ne.element,registerPlugin:pe.registerPlugin.bind(pe),hasPlugin:pe.hasPlugin.bind(pe),getPlugin:pe.getPlugin.bind(pe),getPlugins:pe.getRegisteredPlugins.bind(pe)};return e(l,{...Ct,announceStatus:Ee,getStatusText:Se,focus:fe,scroll:re,progress:ge,controls:ue,location:he,overview:de,keyboard:ce,fragments:le,backgrounds:ne,slideContent:te,slideNumber:ie,onUserInput:function(e){A.autoSlideStoppable&&ut()},closeOverlay:me.close.bind(me),updateSlidesVisibility:Qe,layoutSlideContents:Me,transformSlides:xe,cueAutoSlide:ct,cancelAutoSlide:ht}),Ct}let X=$,Y=[];return X.initialize=e=>(Object.assign(X,new $(document.querySelector(".reveal"),e)),Y.map((e=>e(X))),X.initialize()),["configure","on","off","addEventListener","removeEventListener","registerPlugin"].forEach((e=>{X[e]=(...t)=>{Y.push((i=>i[e].call(null,...t)))}})),X.isReady=()=>!1,X.VERSION=K,X}));
//# sourceMappingURL=reveal.js.map

</script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
hash:true, slideNumber:'c/t', transition:'none', width:1920, height:1080, margin:0.06, center:false
});

</script>
</body>
</html>
